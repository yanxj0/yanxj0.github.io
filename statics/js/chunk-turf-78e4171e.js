import{o as mt,q as gi,t as wi,r as mi,v as Et,w as Ei,x as bn,y as be,z as Se,G as Qn,A as Mi,D as Pi,F as Li,H as ne,I as Si,J as Ci,K as Ai,M as ki}from"./chunk-1f1a3c94.js";var Rr=63710088e-1,Qe={centimeters:Rr*100,centimetres:Rr*100,degrees:Rr/111325,feet:Rr*3.28084,inches:Rr*39.37,kilometers:Rr/1e3,kilometres:Rr/1e3,meters:Rr,metres:Rr,miles:Rr/1609.344,millimeters:Rr*1e3,millimetres:Rr*1e3,nauticalmiles:Rr/1852,radians:1,yards:Rr*1.0936},Un={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Rr,yards:1.0936133},Je={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Fr(r,e,t){t===void 0&&(t={});var n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}function Yn(r,e,t){switch(r){case"Point":return W(e).geometry;case"LineString":return yr(e).geometry;case"Polygon":return J(e).geometry;case"MultiPoint":return Ne(e).geometry;case"MultiLineString":return fe(e).geometry;case"MultiPolygon":return Zr(e).geometry;default:throw new Error(r+" is invalid")}}function W(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ir(r[0])||!Ir(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return Fr(n,e,t)}function _n(r,e,t){return t===void 0&&(t={}),T(r.map(function(n){return W(n,e)}),t)}function J(r,e,t){t===void 0&&(t={});for(var n=0,a=r;n<a.length;n++){var i=a[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<i[i.length-1].length;u++)if(i[i.length-1][u]!==i[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:r};return Fr(f,e,t)}function jn(r,e,t){return t===void 0&&(t={}),T(r.map(function(n){return J(n,e)}),t)}function yr(r,e,t){if(t===void 0&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return Fr(n,e,t)}function Vn(r,e,t){return t===void 0&&(t={}),T(r.map(function(n){return yr(n,e)}),t)}function T(r,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function fe(r,e,t){t===void 0&&(t={});var n={type:"MultiLineString",coordinates:r};return Fr(n,e,t)}function Ne(r,e,t){t===void 0&&(t={});var n={type:"MultiPoint",coordinates:r};return Fr(n,e,t)}function Zr(r,e,t){t===void 0&&(t={});var n={type:"MultiPolygon",coordinates:r};return Fr(n,e,t)}function Mt(r,e,t){t===void 0&&(t={});var n={type:"GeometryCollection",geometries:r};return Fr(n,e,t)}function ra(r,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function me(r,e){e===void 0&&(e="kilometers");var t=Qe[e];if(!t)throw new Error(e+" units is invalid");return r*t}function ve(r,e){e===void 0&&(e="kilometers");var t=Qe[e];if(!t)throw new Error(e+" units is invalid");return r/t}function He(r,e){return oe(ve(r,e))}function ce(r){var e=r%360;return e<0&&(e+=360),e}function oe(r){var e=r%(2*Math.PI);return e*180/Math.PI}function xr(r){var e=r%360;return e*Math.PI/180}function de(r,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return me(ve(r,e),t)}function ea(r,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=Je[e];if(!n)throw new Error("invalid original units");var a=Je[t];if(!a)throw new Error("invalid final units");return r/n*a}function Ir(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function wr(r){return!!r&&r.constructor===Object}function ta(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(e){if(!Ir(e))throw new Error("bbox must only contain numbers")})}function na(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}const aa=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Je,bearingToAzimuth:ce,convertArea:ea,convertLength:de,degreesToRadians:xr,earthRadius:Rr,factors:Qe,feature:Fr,featureCollection:T,geometry:Yn,geometryCollection:Mt,isNumber:Ir,isObject:wr,lengthToDegrees:He,lengthToRadians:ve,lineString:yr,lineStrings:Vn,multiLineString:fe,multiPoint:Ne,multiPolygon:Zr,point:W,points:_n,polygon:J,polygons:jn,radiansToDegrees:oe,radiansToLength:me,round:ra,unitsFactors:Un,validateBBox:ta,validateId:na},Symbol.toStringTag,{value:"Module"}));function Cr(r,e,t){if(r!==null)for(var n,a,i,u,f,s,o,h=0,v=0,c,d=r.type,E=d==="FeatureCollection",g=d==="Feature",P=E?r.features.length:1,m=0;m<P;m++){o=E?r.features[m].geometry:g?r.geometry:r,c=o?o.type==="GeometryCollection":!1,f=c?o.geometries.length:1;for(var p=0;p<f;p++){var w=0,L=0;if(u=c?o.geometries[p]:o,u!==null){s=u.coordinates;var M=u.type;switch(h=t&&(M==="Polygon"||M==="MultiPolygon")?1:0,M){case null:break;case"Point":if(e(s,v,m,w,L)===!1)return!1;v++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<s.length;n++){if(e(s[n],v,m,w,L)===!1)return!1;v++,M==="MultiPoint"&&w++}M==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<s.length;n++){for(a=0;a<s[n].length-h;a++){if(e(s[n][a],v,m,w,L)===!1)return!1;v++}M==="MultiLineString"&&w++,M==="Polygon"&&L++}M==="Polygon"&&w++;break;case"MultiPolygon":for(n=0;n<s.length;n++){for(L=0,a=0;a<s[n].length;a++){for(i=0;i<s[n][a].length-h;i++){if(e(s[n][a][i],v,m,w,L)===!1)return!1;v++}L++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(Cr(u.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Pt(r,e,t,n){var a=t;return Cr(r,function(i,u,f,s,o){u===0&&t===void 0?a=i:a=e(a,i,u,f,s,o)},n),a}function Lt(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}function ia(r,e,t){var n=t;return Lt(r,function(a,i){i===0&&t===void 0?n=a:n=e(n,a,i)}),n}function pr(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function St(r,e,t){var n=t;return pr(r,function(a,i){i===0&&t===void 0?n=a:n=e(n,a,i)}),n}function Ee(r){var e=[];return Cr(r,function(t){e.push(t)}),e}function br(r,e){var t,n,a,i,u,f,s,o,h,v,c=0,d=r.type==="FeatureCollection",E=r.type==="Feature",g=d?r.features.length:1;for(t=0;t<g;t++){for(f=d?r.features[t].geometry:E?r.geometry:r,o=d?r.features[t].properties:E?r.properties:{},h=d?r.features[t].bbox:E?r.bbox:void 0,v=d?r.features[t].id:E?r.id:void 0,s=f?f.type==="GeometryCollection":!1,u=s?f.geometries.length:1,a=0;a<u;a++){if(i=s?f.geometries[a]:f,i===null){if(e(null,c,o,h,v)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(i,c,o,h,v)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(e(i.geometries[n],c,o,h,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}c++}}function Ct(r,e,t){var n=t;return br(r,function(a,i,u,f,s){i===0&&t===void 0?n=a:n=e(n,a,i,u,f,s)}),n}function zr(r,e){br(r,function(t,n,a,i,u){var f=t===null?null:t.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return e(Fr(t,a,{bbox:i,id:u}),n,0)===!1?!1:void 0}var s;switch(f){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var o=0;o<t.coordinates.length;o++){var h=t.coordinates[o],v={type:s,coordinates:h};if(e(Fr(v,a),n,o)===!1)return!1}})}function ua(r,e,t){var n=t;return zr(r,function(a,i,u){i===0&&u===0&&t===void 0?n=a:n=e(n,a,i,u)}),n}function ee(r,e){zr(r,function(t,n,a){var i=0;if(t.geometry){var u=t.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,s=0,o=0,h=0;if(Cr(t,function(v,c,d,E,g){if(f===void 0||n>s||E>o||g>h){f=v,s=n,o=E,h=g,i=0;return}var P=yr([f,v],t.properties);if(e(P,n,a,g,i)===!1)return!1;i++,f=v})===!1)return!1}}})}function At(r,e,t){var n=t,a=!1;return ee(r,function(i,u,f,s,o){a===!1&&t===void 0?n=i:n=e(n,i,u,f,s,o),a=!0}),n}function kt(r,e){if(!r)throw new Error("geojson is required");zr(r,function(t,n,a){if(t.geometry!==null){var i=t.geometry.type,u=t.geometry.coordinates;switch(i){case"LineString":if(e(t,n,a,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<u.length;f++)if(e(yr(u[f],t.properties),n,a,f)===!1)return!1;break}}})}function Ot(r,e,t){var n=t;return kt(r,function(a,i,u,f){i===0&&t===void 0?n=a:n=e(n,a,i,u,f)}),n}function oa(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,a=e.geometryIndex||0,i=e.segmentIndex||0,u=e.properties,f;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),u=u||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":u=u||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var s=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return i<0&&(i=s.length+i-1),yr([s[i],s[i+1]],u,e);case"Polygon":return a<0&&(a=s.length+a),i<0&&(i=s[a].length+i-1),yr([s[a][i],s[a][i+1]],u,e);case"MultiLineString":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i-1),yr([s[n][i],s[n][i+1]],u,e);case"MultiPolygon":return n<0&&(n=s.length+n),a<0&&(a=s[n].length+a),i<0&&(i=s[n][a].length-i-1),yr([s[n][a][i],s[n][a][i+1]],u,e)}throw new Error("geojson is invalid")}function sa(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,a=e.geometryIndex||0,i=e.coordIndex||0,u=e.properties,f;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),u=u||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":u=u||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var s=f.coordinates;switch(f.type){case"Point":return W(s,u,e);case"MultiPoint":return n<0&&(n=s.length+n),W(s[n],u,e);case"LineString":return i<0&&(i=s.length+i),W(s[i],u,e);case"Polygon":return a<0&&(a=s.length+a),i<0&&(i=s[a].length+i),W(s[a][i],u,e);case"MultiLineString":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),W(s[n][i],u,e);case"MultiPolygon":return n<0&&(n=s.length+n),a<0&&(a=s[n].length+a),i<0&&(i=s[n][a].length-i),W(s[n][a][i],u,e)}throw new Error("geojson is invalid")}const fa=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Ee,coordEach:Cr,coordReduce:Pt,featureEach:pr,featureReduce:St,findPoint:sa,findSegment:oa,flattenEach:zr,flattenReduce:ua,geomEach:br,geomReduce:Ct,lineEach:kt,lineReduce:Ot,propEach:Lt,propReduce:ia,segmentEach:ee,segmentReduce:At},Symbol.toStringTag,{value:"Module"}));function Ar(r){var e=[1/0,1/0,-1/0,-1/0];return Cr(r,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Ar.default=Ar;function Er(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function G(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function qt(r){if(r.length>1&&Ir(r[0])&&Ir(r[1]))return!0;if(Array.isArray(r[0])&&r[0].length)return qt(r[0]);throw new Error("coordinates must only contain numbers")}function ha(r,e,t){if(!e||!t)throw new Error("type and name required");if(!r||r.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+r.type)}function ke(r,e,t){if(!r)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+r.geometry.type)}function ie(r,e,t){if(!r)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!r||r.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(var n=0,a=r.features;n<a.length;n++){var i=a[n];if(!i||i.type!=="Feature"||!i.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+i.geometry.type)}}function Lr(r){return r.type==="Feature"?r.geometry:r}function Xr(r,e){return r.type==="FeatureCollection"?"FeatureCollection":r.type==="GeometryCollection"?"GeometryCollection":r.type==="Feature"&&r.geometry!==null?r.geometry.type:r.type}const Oi=Object.freeze(Object.defineProperty({__proto__:null,collectionOf:ie,containsNumber:qt,featureOf:ke,geojsonType:ha,getCoord:Er,getCoords:G,getGeom:Lr,getType:Xr},Symbol.toStringTag,{value:"Module"}));/**
* @license GNU Affero General Public License.
* Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
* v. 1.2.0
* https://github.com/RaumZeit/MarchingSquares.js
*
* MarchingSquaresJS is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* MarchingSquaresJS is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
*
* As additional permission under GNU Affero General Public License version 3
* section 7, third-party projects (personal or commercial) may distribute,
* include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
* requirement that said third-party project for that reason alone becomes
* subject to any requirement of the GNU Affero General Public License version 3.
* Any modifications to MarchingSquaresJS, however, must be shared with the public
* and made available.
*
* In summary this:
* - allows you to use MarchingSquaresJS at no cost
* - allows you to use MarchingSquaresJS for both personal and commercial purposes
* - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
*   license as long as this license notice is included
* - enables you to keep the source code of your program that uses MarchingSquaresJS
*   undisclosed
* - forces you to share any modifications you have made to MarchingSquaresJS,
*   e.g. bug-fixes
*
* You should have received a copy of the GNU Affero General Public License
* along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
*/var _t={successCallback:null,verbose:!1},ze={};function qi(r,e,t){t=t||{};for(var n=Object.keys(_t),a=0;a<n.length;a++){var i=n[a],u=t[i];u=typeof u<"u"&&u!==null?u:_t[i],ze[i]=u}ze.verbose;var f=Ni(Bi(r,e));return typeof ze.successCallback=="function"&&ze.successCallback(f),f}function mr(r,e,t){return(r-e)/(t-e)}function Bi(r,e){for(var t=r.length-1,n=r[0].length-1,a={rows:t,cols:n,cells:[]},i=0;i<t;++i){a.cells[i]=[];for(var u=0;u<n;++u){var f=0,s=r[i+1][u],o=r[i+1][u+1],h=r[i][u+1],v=r[i][u];if(!(isNaN(s)||isNaN(o)||isNaN(h)||isNaN(v))){f|=s>=e?8:0,f|=o>=e?4:0,f|=h>=e?2:0,f|=v>=e?1:0;var c=!1;if(f===5||f===10){var d=(s+o+h+v)/4;f===5&&d<e?(f=10,c=!0):f===10&&d<e&&(f=5,c=!0)}if(f!==0&&f!==15){var E,g,P,m;E=g=P=m=.5,f===1?(P=1-mr(e,s,v),g=1-mr(e,h,v)):f===2?(g=mr(e,v,h),m=1-mr(e,o,h)):f===3?(P=1-mr(e,s,v),m=1-mr(e,o,h)):f===4?(E=mr(e,s,o),m=mr(e,h,o)):f===5?(E=mr(e,s,o),m=mr(e,h,o),g=1-mr(e,h,v),P=1-mr(e,s,v)):f===6?(g=mr(e,v,h),E=mr(e,s,o)):f===7?(P=1-mr(e,s,v),E=mr(e,s,o)):f===8?(P=mr(e,v,s),E=1-mr(e,o,s)):f===9?(g=1-mr(e,h,v),E=1-mr(e,o,s)):f===10?(E=1-mr(e,o,s),m=1-mr(e,o,h),g=mr(e,v,h),P=mr(e,v,s)):f===11?(E=1-mr(e,o,s),m=1-mr(e,o,h)):f===12?(P=mr(e,v,s),m=mr(e,h,o)):f===13?(g=1-mr(e,h,v),m=mr(e,h,o)):f===14&&(P=mr(e,v,s),g=mr(e,v,h)),a.cells[i][u]={cval:f,flipped:c,top:E,right:m,bottom:g,left:P}}}}}return a}function Fi(r){return r.cval===5||r.cval===10}function va(r){return r.cval===0||r.cval===15}function jt(r){!va(r)&&r.cval!==5&&r.cval!==10&&(r.cval=15)}function nt(r,e){if(e==="top")return[r.top,1];if(e==="bottom")return[r.bottom,0];if(e==="right")return[1,r.right];if(e==="left")return[0,r.left]}function Ni(r){var e=[],t=0,n=1e-7;return r.cells.forEach(function(a,i){a.forEach(function(u,f){if(typeof u<"u"&&!Fi(u)&&!va(u)){var s=Ri(r.cells,i,f),o=!1;if(s.info==="mergeable"){for(var h=s.path[s.path.length-1][0],v=s.path[s.path.length-1][1],c=t-1;c>=0;c--)if(Math.abs(e[c][0][0]-h)<=n&&Math.abs(e[c][0][1]-v)<=n){for(var d=s.path.length-2;d>=0;--d)e[c].unshift(s.path[d]);o=!0;break}}o||(e[t++]=s.path)}})}),e}function Ri(r,e,t){var n=r.length,a=[],i=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],f,s,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],h=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],d,v=r[e][t],c=v.cval,d=o[c],E=nt(v,d);a.push([t+E[0],e+E[1]]),d=h[c],E=nt(v,d),a.push([t+E[0],e+E[1]]),jt(v);for(var g=t+i[c],P=e+u[c],m=c;g>=0&&P>=0&&P<n&&(g!=t||P!=e)&&(v=r[P][g],!(typeof v>"u"));){if(c=v.cval,c===0||c===15)return{path:a,info:"mergeable"};d=h[c],f=i[c],s=u[c],(c===5||c===10)&&(c===5?v.flipped?u[m]===-1?(d="left",f=-1,s=0):(d="right",f=1,s=0):i[m]===-1&&(d="bottom",f=0,s=-1):c===10&&(v.flipped?i[m]===-1?(d="top",f=0,s=1):(d="bottom",f=0,s=-1):u[m]===1&&(d="left",f=-1,s=0))),E=nt(v,d),a.push([g+E[0],P+E[1]]),jt(v),g+=f,P+=s,m=c}return{path:a,info:"closed"}}function xi(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.zProperty||"elevation",n=e.flip,a=e.flags;ie(r,"Point","input must contain Points");for(var i=Ii(r,n),u=[],f=0;f<i.length;f++){for(var s=i[f],o=[],h=0;h<s.length;h++){var v=s[h];v.properties[t]?o.push(v.properties[t]):o.push(0),a===!0&&(v.properties.matrixPosition=[f,h])}u.push(o)}return u}function Ii(r,e){var t={};pr(r,function(i){var u=G(i)[1];t[u]||(t[u]=[]),t[u].push(i)});var n=Object.keys(t).map(function(i){var u=t[i],f=u.sort(function(s,o){return G(s)[0]-G(o)[0]});return f}),a=n.sort(function(i,u){return e?G(i[0])[1]-G(u[0])[1]:G(u[0])[1]-G(i[0])[1]});return a}function Ti(r,e,t){if(t=t||{},!wr(t))throw new Error("options is invalid");var n=t.zProperty||"elevation",a=t.commonProperties||{},i=t.breaksProperties||[];if(ie(r,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!wr(a))throw new Error("commonProperties must be an Object");if(!Array.isArray(i))throw new Error("breaksProperties must be an Array");var u=xi(r,{zProperty:n,flip:!0}),f=zi(u,e,n,a,i),s=Gi(f,u,r);return T(s)}function zi(r,e,t,n,a){for(var i=[],u=1;u<e.length;u++){var f=+e[u],s=mt({},n,a[u]);s[t]=f;var o=fe(qi(r,f),s);i.push(o)}return i}function Gi(r,e,t){var n=Ar(t),a=n[2]-n[0],i=n[3]-n[1],u=n[0],f=n[1],s=e[0].length-1,o=e.length-1,h=a/s,v=i/o,c=function(d){d[0]=d[0]*h+u,d[1]=d[1]*v+f};return r.forEach(function(d){Cr(d,c)}),r}function ca(r,e){e===void 0&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(Cr(r,function(a){t.push([a[0],a[1]])}),!t.length)return null;var n=gi(t,e.concavity);return n.length>3?J([n]):null}function Pr(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=Er(r),a=Lr(e),i=a.type,u=e.bbox,f=a.coordinates;if(u&&Di(n,u)===!1)return!1;i==="Polygon"&&(f=[f]);for(var s=!1,o=0;o<f.length&&!s;o++)if(Vt(n,f[o][0],t.ignoreBoundary)){for(var h=!1,v=1;v<f[o].length&&!h;)Vt(n,f[o][v],!t.ignoreBoundary)&&(h=!0),v++;h||(s=!0)}return s}function Vt(r,e,t){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var a=0,i=e.length-1;a<e.length;i=a++){var u=e[a][0],f=e[a][1],s=e[i][0],o=e[i][1],h=r[1]*(u-s)+f*(s-r[0])+o*(r[0]-u)===0&&(u-r[0])*(s-r[0])<=0&&(f-r[1])*(o-r[1])<=0;if(h)return!t;var v=f>r[1]!=o>r[1]&&r[0]<(s-u)*(r[1]-f)/(o-f)+u;v&&(n=!n)}return n}function Di(r,e){return e[0]<=r[0]&&e[1]<=r[1]&&e[2]>=r[0]&&e[3]>=r[1]}function ht(r,e){var t=[];return pr(r,function(n){var a=!1;if(n.geometry.type==="Point")br(e,function(u){Pr(n,u)&&(a=!0)}),a&&t.push(n);else if(n.geometry.type==="MultiPoint"){var i=[];br(e,function(u){Cr(n,function(f){Pr(f,u)&&(a=!0,i.push(f))})}),a&&t.push(Ne(i))}else throw new Error("Input geometry must be a Point or MultiPoint")}),T(t)}function gr(r,e,t){t===void 0&&(t={});var n=Er(r),a=Er(e),i=xr(a[1]-n[1]),u=xr(a[0]-n[0]),f=xr(n[1]),s=xr(a[1]),o=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(s);return me(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),t.units)}function da(r,e){var t=!1;return T(Ji(r.features.map(function(n){var a={x:n.geometry.coordinates[0],y:n.geometry.coordinates[1]};return e?a.z=n.properties[e]:n.geometry.coordinates.length===3&&(t=!0,a.z=n.geometry.coordinates[2]),a})).map(function(n){var a=[n.a.x,n.a.y],i=[n.b.x,n.b.y],u=[n.c.x,n.c.y],f={};return t?(a.push(n.a.z),i.push(n.b.z),u.push(n.c.z)):f={a:n.a.z,b:n.b.z,c:n.c.z},J([[a,i,u,a]],f)}))}var rn=function(){function r(e,t,n){this.a=e,this.b=t,this.c=n;var a=t.x-e.x,i=t.y-e.y,u=n.x-e.x,f=n.y-e.y,s=a*(e.x+t.x)+i*(e.y+t.y),o=u*(e.x+n.x)+f*(e.y+n.y),h=2*(a*(n.y-t.y)-i*(n.x-t.x)),v,c;this.x=(f*s-i*o)/h,this.y=(a*o-u*s)/h,v=this.x-e.x,c=this.y-e.y,this.r=v*v+c*c}return r}();function $i(r,e){return e.x-r.x}function Wi(r){var e=r.length,t,n,a,i,u;r:for(;e;)for(n=r[--e],t=r[--e],a=e;a;)if(u=r[--a],i=r[--a],t===i&&n===u||t===u&&n===i){r.splice(e,2),r.splice(a,2),e-=2;continue r}}function Ji(r){if(r.length<3)return[];r.sort($i);for(var e=r.length-1,t=r[e].x,n=r[0].x,a=r[e].y,i=a,u=1e-12,f,s,o,h,v,c;e--;)r[e].y<a&&(a=r[e].y),r[e].y>i&&(i=r[e].y);var d=n-t,E=i-a,g=d>E?d:E,P=(n+t)*.5,m=(i+a)*.5,p=[new rn({__sentinel:!0,x:P-20*g,y:m-g},{__sentinel:!0,x:P,y:m+20*g},{__sentinel:!0,x:P+20*g,y:m-g})],w=[],L=[],M;for(e=r.length;e--;){for(L.length=0,M=p.length;M--;){if(d=r[e].x-p[M].x,d>0&&d*d>p[M].r){w.push(p[M]),p.splice(M,1);continue}E=r[e].y-p[M].y,!(d*d+E*E>p[M].r)&&(L.push(p[M].a,p[M].b,p[M].b,p[M].c,p[M].c,p[M].a),p.splice(M,1))}for(Wi(L),M=L.length;M;)s=L[--M],f=L[--M],o=r[e],h=s.x-f.x,v=s.y-f.y,c=2*(h*(o.y-s.y)-v*(o.x-s.x)),Math.abs(c)>u&&p.push(new rn(f,s,o))}for(Array.prototype.push.apply(w,p),e=w.length;e--;)(w[e].a.__sentinel||w[e].b.__sentinel||w[e].c.__sentinel)&&w.splice(e,1);return w}function Dr(r){if(!r)throw new Error("geojson is required");switch(r.type){case"Feature":return la(r);case"FeatureCollection":return Hi(r);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Bt(r);default:throw new Error("unknown GeoJSON type")}}function la(r){var e={type:"Feature"};return Object.keys(r).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:e[t]=r[t]}}),e.properties=pa(r.properties),e.geometry=Bt(r.geometry),e}function pa(r){var e={};return r&&Object.keys(r).forEach(function(t){var n=r[t];typeof n=="object"?n===null?e[t]=null:Array.isArray(n)?e[t]=n.map(function(a){return a}):e[t]=pa(n):e[t]=n}),e}function Hi(r){var e={type:"FeatureCollection"};return Object.keys(r).forEach(function(t){switch(t){case"type":case"features":return;default:e[t]=r[t]}}),e.features=r.features.map(function(t){return la(t)}),e}function Bt(r){var e={type:r.type};return r.bbox&&(e.bbox=r.bbox),r.type==="GeometryCollection"?(e.geometries=r.geometries.map(function(t){return Bt(t)}),e):(e.coordinates=ya(r.coordinates),e)}function ya(r){var e=r;return typeof e[0]!="object"?e.slice():e.map(function(t){return ya(t)})}function Xi(r,e){if(e===void 0&&(e={}),e=e||{},!wr(e))throw new Error("options is invalid");var t=e.mutate;if(Xr(r)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!r.features.length)throw new Error("geojson is empty");(t===!1||t===void 0)&&(r=Dr(r));var n=[],a=Ot(r,function(i,u){var f=Ki(i,u);return f||(n.push(i),u)});return a&&n.push(a),n.length?n.length===1?n[0]:fe(n.map(function(i){return i.coordinates})):null}function Ge(r){return r[0].toString()+","+r[1].toString()}function Ki(r,e){var t=r.geometry.coordinates,n=e.geometry.coordinates,a=Ge(t[0]),i=Ge(t[t.length-1]),u=Ge(n[0]),f=Ge(n[n.length-1]),s;if(a===f)s=n.concat(t.slice(1));else if(u===i)s=t.concat(n.slice(1));else if(a===u)s=t.slice(1).reverse().concat(n);else if(i===f)s=t.concat(n.reverse().slice(1));else return null;return yr(s)}function Zi(r,e){if(e===void 0&&(e={}),Xr(r)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!r.features.length)throw new Error("geojson is empty");(e.mutate===!1||e.mutate===void 0)&&(r=Dr(r));var t=[];zr(r,function(i){t.push(i.geometry)});var n=wi({geoms:Mt(t).geometry}),a=mi(n,n.objects.geoms.geometries);return a}function bi(r,e){if(e===void 0&&(e={}),e=e||{},!wr(e))throw new Error("options is invalid");var t=e.mutate;if(Xr(r)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!r.features.length)throw new Error("geojson is empty");(t===!1||t===void 0)&&(r=Dr(r));var n=Qi(r);if(!n)throw new Error("geojson must be homogenous");var a=r;switch(n){case"LineString":return Xi(a,e);case"Polygon":return Zi(a,e);default:throw new Error(n+" is not supported")}}function Qi(r){var e={};zr(r,function(n){e[n.geometry.type]=!0});var t=Object.keys(e);return t.length===1?t[0]:null}function Ui(r,e){e===void 0&&(e={});var t=e.maxEdge||1/0,n=Yi(r),a=da(n);if(a.features=a.features.filter(function(u){var f=u.geometry.coordinates[0][0],s=u.geometry.coordinates[0][1],o=u.geometry.coordinates[0][2],h=gr(f,s,e),v=gr(s,o,e),c=gr(f,o,e);return h<=t&&v<=t&&c<=t}),a.features.length<1)return null;var i=bi(a);return i.coordinates.length===1&&(i.coordinates=i.coordinates[0],i.type="Polygon"),Fr(i)}function Yi(r){var e=[],t={};return pr(r,function(n){if(n.geometry){var a=n.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(t,a)||(e.push(n),t[a]=!0)}}),T(e)}function _i(r,e,t,n){var a=Et(6),i=e.features.map(function(u){var f;return{minX:u.geometry.coordinates[0],minY:u.geometry.coordinates[1],maxX:u.geometry.coordinates[0],maxY:u.geometry.coordinates[1],property:(f=u.properties)===null||f===void 0?void 0:f[t]}});return a.load(i),r.features.forEach(function(u){u.properties||(u.properties={});var f=Ar(u),s=a.search({minX:f[0],minY:f[1],maxX:f[2],maxY:f[3]}),o=[];s.forEach(function(h){Pr([h.minX,h.minY],u)&&o.push(h.property)}),u.properties[n]=o}),r}function ji(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.mutate;if(!r)throw new Error("geojson is required");return(t===!1||t===void 0)&&(r=Dr(r)),Cr(r,function(n){var a=n[0],i=n[1];n[0]=i,n[1]=a}),r}function le(r,e){e===void 0&&(e={});var t=typeof e=="object"?e.mutate:e;if(!r)throw new Error("geojson is required");var n=Xr(r),a=[];switch(n){case"LineString":a=at(r);break;case"MultiLineString":case"Polygon":G(r).forEach(function(u){a.push(at(u))});break;case"MultiPolygon":G(r).forEach(function(u){var f=[];u.forEach(function(s){f.push(at(s))}),a.push(f)});break;case"Point":return r;case"MultiPoint":var i={};G(r).forEach(function(u){var f=u.join("-");Object.prototype.hasOwnProperty.call(i,f)||(a.push(u),i[f]=!0)});break;default:throw new Error(n+" geometry not supported")}return r.coordinates?t===!0?(r.coordinates=a,r):{type:n,coordinates:a}:t===!0?(r.geometry.coordinates=a,r):Fr({type:n,coordinates:a},r.properties,{bbox:r.bbox,id:r.id})}function at(r){var e=G(r);if(e.length===2&&!en(e[0],e[1]))return e;var t=[],n=e.length-1,a=t.length;t.push(e[0]);for(var i=1;i<n;i++){var u=t[t.length-1];e[i][0]===u[0]&&e[i][1]===u[1]||(t.push(e[i]),a=t.length,a>2&&tn(t[a-3],t[a-1],t[a-2])&&t.splice(t.length-2,1))}if(t.push(e[e.length-1]),a=t.length,en(e[0],e[e.length-1])&&a<4)throw new Error("invalid polygon");return tn(t[a-3],t[a-1],t[a-2])&&t.splice(t.length-2,1),t}function en(r,e){return r[0]===e[0]&&r[1]===e[1]}function tn(r,e,t){var n=t[0],a=t[1],i=r[0],u=r[1],f=e[0],s=e[1],o=n-i,h=a-u,v=f-i,c=s-u,d=o*c-h*v;return d!==0?!1:Math.abs(v)>=Math.abs(c)?v>0?i<=n&&n<=f:f<=n&&n<=i:c>0?u<=a&&a<=s:s<=a&&a<=u}function Vi(r,e){var t=r.x-e.x,n=r.y-e.y;return t*t+n*n}function ru(r,e,t){var n=e.x,a=e.y,i=t.x-n,u=t.y-a;if(i!==0||u!==0){var f=((r.x-n)*i+(r.y-a)*u)/(i*i+u*u);f>1?(n=t.x,a=t.y):f>0&&(n+=i*f,a+=u*f)}return i=r.x-n,u=r.y-a,i*i+u*u}function eu(r,e){for(var t=r[0],n=[t],a,i=1,u=r.length;i<u;i++)a=r[i],Vi(a,t)>e&&(n.push(a),t=a);return t!==a&&n.push(a),n}function vt(r,e,t,n,a){for(var i=n,u,f=e+1;f<t;f++){var s=ru(r[f],r[e],r[t]);s>i&&(u=f,i=s)}i>n&&(u-e>1&&vt(r,e,u,n,a),a.push(r[u]),t-u>1&&vt(r,u,t,n,a))}function tu(r,e){var t=r.length-1,n=[r[0]];return vt(r,0,t,e,n),n.push(r[t]),n}function ct(r,e,t){if(r.length<=2)return r;var n=e!==void 0?e*e:1;return r=t?r:eu(r,n),r=tu(r,n),r}function nu(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.tolerance!==void 0?e.tolerance:1,n=e.highQuality||!1,a=e.mutate||!1;if(!r)throw new Error("geojson is required");if(t&&t<0)throw new Error("invalid tolerance");return a!==!0&&(r=Dr(r)),br(r,function(i){au(i,t,n)}),r}function au(r,e,t){var n=r.type;if(n==="Point"||n==="MultiPoint")return r;le(r,!0);var a=r.coordinates;switch(n){case"LineString":r.coordinates=nn(a,e,t);break;case"MultiLineString":r.coordinates=a.map(function(i){return nn(i,e,t)});break;case"Polygon":r.coordinates=an(a,e,t);break;case"MultiPolygon":r.coordinates=a.map(function(i){return an(i,e,t)})}return r}function nn(r,e,t){return ct(r.map(function(n){return{x:n[0],y:n[1],z:n[2]}}),e,t).map(function(n){return n.z?[n.x,n.y,n.z]:[n.x,n.y]})}function an(r,e,t){return r.map(function(n){var a=n.map(function(u){return{x:u[0],y:u[1]}});if(a.length<4)throw new Error("invalid polygon");for(var i=ct(a,e,t).map(function(u){return[u.x,u.y]});!iu(i);)e-=e*.01,i=ct(a,e,t).map(function(u){return[u.x,u.y]});return(i[i.length-1][0]!==i[0][0]||i[i.length-1][1]!==i[0][1])&&i.push(i[0]),i})}function iu(r){return r.length<3?!1:!(r.length===3&&r[2][0]===r[0][0]&&r[2][1]===r[0][1])}var uu=function(){function r(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(var t=0;t<this.length-1;t++){var n=this.points[t],a=this.points[t+1];this.centers.push({x:(n.x+a.x)/2,y:(n.y+a.y)/2,z:(n.z+a.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var t=0;t<this.centers.length-1;t++){var i=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,u=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,f=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+i),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+u),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+f)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+i),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+u),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+f)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return r.prototype.cacheSteps=function(e){var t=[],n=this.pos(0);t.push(0);for(var a=0;a<this.duration;a+=10){var i=this.pos(a),u=Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z));u>e&&(t.push(a),n=i)}return t},r.prototype.vector=function(e){var t=this.pos(e+10),n=this.pos(e-10);return{angle:180*Math.atan2(t.y-n.y,t.x-n.x)/3.14,speed:Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)+(n.z-t.z)*(n.z-t.z))}},r.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var n=t/this.duration;if(n>=1)return this.points[this.length-1];var a=Math.floor((this.points.length-1)*n),i=(this.length-1)*n-a;return ou(i,this.points[a],this.controls[a][1],this.controls[a+1][0],this.points[a+1])},r}();function ou(r,e,t,n,a){var i=su(r),u={x:a.x*i[0]+n.x*i[1]+t.x*i[2]+e.x*i[3],y:a.y*i[0]+n.y*i[1]+t.y*i[2]+e.y*i[3],z:a.z*i[0]+n.z*i[1]+t.z*i[2]+e.z*i[3]};return u}function su(r){var e=r*r,t=e*r;return[t,3*e*(1-r),3*r*(1-r)*(1-r),(1-r)*(1-r)*(1-r)]}function un(r,e){e===void 0&&(e={});for(var t=e.resolution||1e4,n=e.sharpness||.85,a=[],i=Lr(r).coordinates.map(function(o){return{x:o[0],y:o[1]}}),u=new uu({duration:t,points:i,sharpness:n}),f=function(o){var h=u.pos(o);Math.floor(o/100)%2===0&&a.push([h.x,h.y])},s=0;s<u.duration;s+=10)f(s);return f(u.duration),yr(a,e.properties)}function fu(r,e,t,n){return r=Dr(r),e=Dr(e),pr(r,function(a){a.properties||(a.properties={}),pr(e,function(i){a.properties[n]===void 0&&Pr(a,i)&&(a.properties[n]=i.properties[t])})}),r}function hu(r,e){if(!r)throw new Error("featurecollection is required");if(e==null)throw new Error("num is required");if(typeof e!="number")throw new Error("num must be a number");var t=T(vu(r.features,e));return t}function vu(r,e){for(var t=r.slice(0),n=r.length,a=n-e,i,u;n-- >a;)u=Math.floor((n+1)*Math.random()),i=t[u],t[u]=t[n],t[n]=i;return t.slice(a)}function Ft(r,e){e===void 0&&(e={});var t=Number(r[0]),n=Number(r[1]),a=Number(r[2]),i=Number(r[3]);if(r.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var u=[t,n],f=[t,i],s=[a,i],o=[a,n];return J([[u,o,s,f,u]],e.properties,{bbox:r,id:e.id})}function ga(r){return Ft(Ar(r))}function wa(r){var e=r[0],t=r[1],n=r[2],a=r[3],i=gr(r.slice(0,2),[n,t]),u=gr(r.slice(0,2),[e,a]);if(i>=u){var f=(t+a)/2;return[e,f-(n-e)/2,n,f+(n-e)/2]}else{var s=(e+n)/2;return[s-(a-t)/2,t,s+(a-t)/2,a]}}function re(r,e,t,n){n===void 0&&(n={});var a=Er(r),i=xr(a[0]),u=xr(a[1]),f=xr(t),s=ve(e,n.units),o=Math.asin(Math.sin(u)*Math.cos(s)+Math.cos(u)*Math.sin(s)*Math.cos(f)),h=i+Math.atan2(Math.sin(f)*Math.sin(s)*Math.cos(u),Math.cos(s)-Math.sin(u)*Math.sin(o)),v=oe(h),c=oe(o);return W([v,c],n.properties)}function Nt(r,e,t){t===void 0&&(t={});for(var n=t.steps||64,a=t.properties?t.properties:!Array.isArray(r)&&r.type==="Feature"&&r.properties?r.properties:{},i=[],u=0;u<n;u++)i.push(re(r,e,u*-360/n,t).geometry.coordinates);return i.push(i[0]),J([i],a)}function ae(r,e,t){if(t===void 0&&(t={}),t.final===!0)return cu(r,e);var n=Er(r),a=Er(e),i=xr(n[0]),u=xr(a[0]),f=xr(n[1]),s=xr(a[1]),o=Math.sin(u-i)*Math.cos(s),h=Math.cos(f)*Math.sin(s)-Math.sin(f)*Math.cos(s)*Math.cos(u-i);return oe(Math.atan2(o,h))}function cu(r,e){var t=ae(e,r);return t=(t+180)%360,t}function du(r,e){var t=gr(r,e),n=ae(r,e),a=re(r,t/2,n);return a}function Ue(r,e){e===void 0&&(e={});var t=Ar(r),n=(t[0]+t[2])/2,a=(t[1]+t[3])/2;return W([n,a],e.properties,e)}function se(r,e){e===void 0&&(e={});var t=0,n=0,a=0;return Cr(r,function(i){t+=i[0],n+=i[1],a++},!0),W([t/a,n/a],e.properties)}function ma(r,e){switch(e===void 0&&(e={}),Xr(r)){case"Point":return W(Er(r),e.properties);case"Polygon":var t=[];Cr(r,function(L){t.push(L)});var n=se(r,{properties:e.properties}),a=n.geometry.coordinates,i=0,u=0,f=0,s,o,h,v,c,d,E,g,P=t.map(function(L){return[L[0]-a[0],L[1]-a[1]]});for(s=0;s<t.length-1;s++)o=P[s],v=o[0],d=o[1],h=P[s+1],c=h[0],E=h[1],g=v*E-c*d,f+=g,i+=(v+c)*g,u+=(d+E)*g;if(f===0)return n;var m=f*.5,p=1/(6*m);return W([a[0]+p*i,a[1]+p*u],e.properties);default:var w=ca(r);return w?ma(w,{properties:e.properties}):se(r,{properties:e.properties})}}function lu(r){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return pr(r,function(t){var n,a,i,u;switch((u=t.geometry)===null||u===void 0?void 0:u.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(a=e.MultiLineString.coordinates).push.apply(a,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break}}),T(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){var n={type:t,coordinates:e[t].coordinates},a={collectedProperties:e[t].properties};return Fr(n,a)}))}function Ye(r){var e=[];return r.type==="FeatureCollection"?pr(r,function(t){Cr(t,function(n){e.push(W(n,t.properties))})}):Cr(r,function(t){e.push(W(t,r.properties))}),T(e)}function pu(r){if(!r.geometry||r.geometry.type!=="Polygon"&&r.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return r.geometry.type==="Polygon"?e.features=on(r.geometry.coordinates):r.geometry.coordinates.forEach(function(t){e.features=e.features.concat(on(t))}),e}function on(r){var e=yu(r),t=2,n=Ei(e.vertices,e.holes,t),a=[],i=[];n.forEach(function(s,o){var h=n[o];i.push([e.vertices[h*t],e.vertices[h*t+1]])});for(var u=0;u<i.length;u+=3){var f=i.slice(u,u+3);f.push(i[u]),a.push(J([f]))}return a}function yu(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,a=0;a<r.length;a++){for(var i=0;i<r[a].length;i++)for(var u=0;u<e;u++)t.vertices.push(r[a][i][u]);a>0&&(n+=r[a-1].length,t.holes.push(n))}return t}function Xe(r,e){if(!r)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var t,n=1/0,a=0;return pr(e,function(i,u){var f=gr(r,i);f<n&&(a=u,n=f)}),t=Dr(e.features[a]),t.properties.featureIndex=a,t.properties.distanceToPoint=n,t}function pe(r){if(!r)throw new Error("geojson is required");var e=[];return zr(r,function(t){gu(t,e)}),T(e)}function gu(r,e){var t=[],n=r.geometry;if(n!==null){switch(n.type){case"Polygon":t=G(n);break;case"LineString":t=[G(n)]}t.forEach(function(a){var i=wu(a,r.properties);i.forEach(function(u){u.id=e.length,e.push(u)})})}}function wu(r,e){var t=[];return r.reduce(function(n,a){var i=yr([n,a],e);return i.bbox=mu(n,a),t.push(i),a}),t}function mu(r,e){var t=r[0],n=r[1],a=e[0],i=e[1],u=t<a?t:a,f=n<i?n:i,s=t>a?t:a,o=n>i?n:i;return[u,f,s,o]}var Eu={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=63710088e-1,r.factors={centimeters:r.earthRadius*100,centimetres:r.earthRadius*100,degrees:r.earthRadius/111325,feet:r.earthRadius*3.28084,inches:r.earthRadius*39.37,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:r.earthRadius*1e3,millimetres:r.earthRadius*1e3,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius*1.0936},r.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r.earthRadius,yards:1.0936133},r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function e(C,A,O){O===void 0&&(O={});var D={type:"Feature"};return(O.id===0||O.id)&&(D.id=O.id),O.bbox&&(D.bbox=O.bbox),D.properties=A||{},D.geometry=C,D}r.feature=e;function t(C,A,O){switch(C){case"Point":return n(A).geometry;case"LineString":return f(A).geometry;case"Polygon":return i(A).geometry;case"MultiPoint":return v(A).geometry;case"MultiLineString":return h(A).geometry;case"MultiPolygon":return c(A).geometry;default:throw new Error(C+" is invalid")}}r.geometry=t;function n(C,A,O){if(O===void 0&&(O={}),!C)throw new Error("coordinates is required");if(!Array.isArray(C))throw new Error("coordinates must be an Array");if(C.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!S(C[0])||!S(C[1]))throw new Error("coordinates must contain numbers");var D={type:"Point",coordinates:C};return e(D,A,O)}r.point=n;function a(C,A,O){return O===void 0&&(O={}),o(C.map(function(D){return n(D,A)}),O)}r.points=a;function i(C,A,O){O===void 0&&(O={});for(var D=0,Sr=C;D<Sr.length;D++){var $=Sr[D];if($.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Nr=0;Nr<$[$.length-1].length;Nr++)if($[$.length-1][Nr]!==$[0][Nr])throw new Error("First and last Position are not equivalent.")}var kr={type:"Polygon",coordinates:C};return e(kr,A,O)}r.polygon=i;function u(C,A,O){return O===void 0&&(O={}),o(C.map(function(D){return i(D,A)}),O)}r.polygons=u;function f(C,A,O){if(O===void 0&&(O={}),C.length<2)throw new Error("coordinates must be an array of two or more positions");var D={type:"LineString",coordinates:C};return e(D,A,O)}r.lineString=f;function s(C,A,O){return O===void 0&&(O={}),o(C.map(function(D){return f(D,A)}),O)}r.lineStrings=s;function o(C,A){A===void 0&&(A={});var O={type:"FeatureCollection"};return A.id&&(O.id=A.id),A.bbox&&(O.bbox=A.bbox),O.features=C,O}r.featureCollection=o;function h(C,A,O){O===void 0&&(O={});var D={type:"MultiLineString",coordinates:C};return e(D,A,O)}r.multiLineString=h;function v(C,A,O){O===void 0&&(O={});var D={type:"MultiPoint",coordinates:C};return e(D,A,O)}r.multiPoint=v;function c(C,A,O){O===void 0&&(O={});var D={type:"MultiPolygon",coordinates:C};return e(D,A,O)}r.multiPolygon=c;function d(C,A,O){O===void 0&&(O={});var D={type:"GeometryCollection",geometries:C};return e(D,A,O)}r.geometryCollection=d;function E(C,A){if(A===void 0&&(A=0),A&&!(A>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,A||0);return Math.round(C*O)/O}r.round=E;function g(C,A){A===void 0&&(A="kilometers");var O=r.factors[A];if(!O)throw new Error(A+" units is invalid");return C*O}r.radiansToLength=g;function P(C,A){A===void 0&&(A="kilometers");var O=r.factors[A];if(!O)throw new Error(A+" units is invalid");return C/O}r.lengthToRadians=P;function m(C,A){return w(P(C,A))}r.lengthToDegrees=m;function p(C){var A=C%360;return A<0&&(A+=360),A}r.bearingToAzimuth=p;function w(C){var A=C%(2*Math.PI);return A*180/Math.PI}r.radiansToDegrees=w;function L(C){var A=C%360;return A*Math.PI/180}r.degreesToRadians=L;function M(C,A,O){if(A===void 0&&(A="kilometers"),O===void 0&&(O="kilometers"),!(C>=0))throw new Error("length must be a positive number");return g(P(C,A),O)}r.convertLength=M;function q(C,A,O){if(A===void 0&&(A="meters"),O===void 0&&(O="kilometers"),!(C>=0))throw new Error("area must be a positive number");var D=r.areaFactors[A];if(!D)throw new Error("invalid original units");var Sr=r.areaFactors[O];if(!Sr)throw new Error("invalid final units");return C/D*Sr}r.convertArea=q;function S(C){return!isNaN(C)&&C!==null&&!Array.isArray(C)}r.isNumber=S;function k(C){return!!C&&C.constructor===Object}r.isObject=k;function y(C){if(!C)throw new Error("bbox is required");if(!Array.isArray(C))throw new Error("bbox must be an Array");if(C.length!==4&&C.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");C.forEach(function(A){if(!S(A))throw new Error("bbox must only contain numbers")})}r.validateBBox=y;function qr(C){if(!C)throw new Error("id is required");if(["string","number"].indexOf(typeof C)===-1)throw new Error("id must be a number or a string")}r.validateId=qr})(Eu);var $r={};const Mu=bn(aa);Object.defineProperty($r,"__esModule",{value:!0});var Hr=Mu;function Re(r,e,t){if(r!==null)for(var n,a,i,u,f,s,o,h=0,v=0,c,d=r.type,E=d==="FeatureCollection",g=d==="Feature",P=E?r.features.length:1,m=0;m<P;m++){o=E?r.features[m].geometry:g?r.geometry:r,c=o?o.type==="GeometryCollection":!1,f=c?o.geometries.length:1;for(var p=0;p<f;p++){var w=0,L=0;if(u=c?o.geometries[p]:o,u!==null){s=u.coordinates;var M=u.type;switch(h=t&&(M==="Polygon"||M==="MultiPolygon")?1:0,M){case null:break;case"Point":if(e(s,v,m,w,L)===!1)return!1;v++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<s.length;n++){if(e(s[n],v,m,w,L)===!1)return!1;v++,M==="MultiPoint"&&w++}M==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<s.length;n++){for(a=0;a<s[n].length-h;a++){if(e(s[n][a],v,m,w,L)===!1)return!1;v++}M==="MultiLineString"&&w++,M==="Polygon"&&L++}M==="Polygon"&&w++;break;case"MultiPolygon":for(n=0;n<s.length;n++){for(L=0,a=0;a<s[n].length;a++){for(i=0;i<s[n][a].length-h;i++){if(e(s[n][a][i],v,m,w,L)===!1)return!1;v++}L++}w++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(Re(u.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Pu(r,e,t,n){var a=t;return Re(r,function(i,u,f,s,o){u===0&&t===void 0?a=i:a=e(a,i,u,f,s,o)},n),a}function Ea(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}function Lu(r,e,t){var n=t;return Ea(r,function(a,i){i===0&&t===void 0?n=a:n=e(n,a,i)}),n}function Ma(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function Su(r,e,t){var n=t;return Ma(r,function(a,i){i===0&&t===void 0?n=a:n=e(n,a,i)}),n}function Cu(r){var e=[];return Re(r,function(t){e.push(t)}),e}function Rt(r,e){var t,n,a,i,u,f,s,o,h,v,c=0,d=r.type==="FeatureCollection",E=r.type==="Feature",g=d?r.features.length:1;for(t=0;t<g;t++){for(f=d?r.features[t].geometry:E?r.geometry:r,o=d?r.features[t].properties:E?r.properties:{},h=d?r.features[t].bbox:E?r.bbox:void 0,v=d?r.features[t].id:E?r.id:void 0,s=f?f.type==="GeometryCollection":!1,u=s?f.geometries.length:1,a=0;a<u;a++){if(i=s?f.geometries[a]:f,i===null){if(e(null,c,o,h,v)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(i,c,o,h,v)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(e(i.geometries[n],c,o,h,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}c++}}function Au(r,e,t){var n=t;return Rt(r,function(a,i,u,f,s){i===0&&t===void 0?n=a:n=e(n,a,i,u,f,s)}),n}function _e(r,e){Rt(r,function(t,n,a,i,u){var f=t===null?null:t.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return e(Hr.feature(t,a,{bbox:i,id:u}),n,0)===!1?!1:void 0}var s;switch(f){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var o=0;o<t.coordinates.length;o++){var h=t.coordinates[o],v={type:s,coordinates:h};if(e(Hr.feature(v,a),n,o)===!1)return!1}})}function ku(r,e,t){var n=t;return _e(r,function(a,i,u){i===0&&u===0&&t===void 0?n=a:n=e(n,a,i,u)}),n}function Pa(r,e){_e(r,function(t,n,a){var i=0;if(t.geometry){var u=t.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,s=0,o=0,h=0;if(Re(t,function(v,c,d,E,g){if(f===void 0||n>s||E>o||g>h){f=v,s=n,o=E,h=g,i=0;return}var P=Hr.lineString([f,v],t.properties);if(e(P,n,a,g,i)===!1)return!1;i++,f=v})===!1)return!1}}})}function Ou(r,e,t){var n=t,a=!1;return Pa(r,function(i,u,f,s,o){a===!1&&t===void 0?n=i:n=e(n,i,u,f,s,o),a=!0}),n}function La(r,e){if(!r)throw new Error("geojson is required");_e(r,function(t,n,a){if(t.geometry!==null){var i=t.geometry.type,u=t.geometry.coordinates;switch(i){case"LineString":if(e(t,n,a,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<u.length;f++)if(e(Hr.lineString(u[f],t.properties),n,a,f)===!1)return!1;break}}})}function qu(r,e,t){var n=t;return La(r,function(a,i,u,f){i===0&&t===void 0?n=a:n=e(n,a,i,u,f)}),n}function Bu(r,e){if(e=e||{},!Hr.isObject(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,a=e.geometryIndex||0,i=e.segmentIndex||0,u=e.properties,f;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),u=u||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":u=u||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var s=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return i<0&&(i=s.length+i-1),Hr.lineString([s[i],s[i+1]],u,e);case"Polygon":return a<0&&(a=s.length+a),i<0&&(i=s[a].length+i-1),Hr.lineString([s[a][i],s[a][i+1]],u,e);case"MultiLineString":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i-1),Hr.lineString([s[n][i],s[n][i+1]],u,e);case"MultiPolygon":return n<0&&(n=s.length+n),a<0&&(a=s[n].length+a),i<0&&(i=s[n][a].length-i-1),Hr.lineString([s[n][a][i],s[n][a][i+1]],u,e)}throw new Error("geojson is invalid")}function Fu(r,e){if(e=e||{},!Hr.isObject(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,a=e.geometryIndex||0,i=e.coordIndex||0,u=e.properties,f;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),u=u||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":u=u||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var s=f.coordinates;switch(f.type){case"Point":return Hr.point(s,u,e);case"MultiPoint":return n<0&&(n=s.length+n),Hr.point(s[n],u,e);case"LineString":return i<0&&(i=s.length+i),Hr.point(s[i],u,e);case"Polygon":return a<0&&(a=s.length+a),i<0&&(i=s[a].length+i),Hr.point(s[a][i],u,e);case"MultiLineString":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),Hr.point(s[n][i],u,e);case"MultiPolygon":return n<0&&(n=s.length+n),a<0&&(a=s[n].length+a),i<0&&(i=s[n][a].length-i),Hr.point(s[n][a][i],u,e)}throw new Error("geojson is invalid")}$r.coordAll=Cu;$r.coordEach=Re;$r.coordReduce=Pu;$r.featureEach=Ma;$r.featureReduce=Su;$r.findPoint=Fu;$r.findSegment=Bu;$r.flattenEach=_e;$r.flattenReduce=ku;$r.geomEach=Rt;$r.geomReduce=Au;$r.lineEach=La;$r.lineReduce=qu;$r.propEach=Ea;$r.propReduce=Lu;$r.segmentEach=Pa;$r.segmentReduce=Ou;var Sa={};const Nu=bn(fa);Object.defineProperty(Sa,"__esModule",{value:!0});var Ru=Nu;function dt(r){var e=[1/0,1/0,-1/0,-1/0];return Ru.coordEach(r,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}dt.default=dt;Sa.default=dt;function ue(r,e){var t={},n=[];if(r.type==="LineString"&&(r=Fr(r)),e.type==="LineString"&&(e=Fr(e)),r.type==="Feature"&&e.type==="Feature"&&r.geometry!==null&&e.geometry!==null&&r.geometry.type==="LineString"&&e.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var a=sn(r,e);return a&&n.push(a),T(n)}var i=be();return i.load(pe(e)),pr(pe(r),function(u){pr(i.search(u),function(f){var s=sn(u,f);if(s){var o=G(s).join(",");t[o]||(t[o]=!0,n.push(s))}})}),T(n)}function sn(r,e){var t=G(r),n=G(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var a=t[0][0],i=t[0][1],u=t[1][0],f=t[1][1],s=n[0][0],o=n[0][1],h=n[1][0],v=n[1][1],c=(v-o)*(u-a)-(h-s)*(f-i),d=(h-s)*(i-o)-(v-o)*(a-s),E=(u-a)*(i-o)-(f-i)*(a-s);if(c===0)return null;var g=d/c,P=E/c;if(g>=0&&g<=1&&P>=0&&P<=1){var m=a+g*(u-a),p=i+g*(f-i);return W([m,p])}return null}function te(r,e,t){t===void 0&&(t={});var n=W([1/0,1/0],{dist:1/0}),a=0;return zr(r,function(i){for(var u=G(i),f=0;f<u.length-1;f++){var s=W(u[f]);s.properties.dist=gr(e,s,t);var o=W(u[f+1]);o.properties.dist=gr(e,o,t);var h=gr(s,o,t),v=Math.max(s.properties.dist,o.properties.dist),c=ae(s,o),d=re(e,v,c+90,t),E=re(e,v,c-90,t),g=ue(yr([d.geometry.coordinates,E.geometry.coordinates]),yr([s.geometry.coordinates,o.geometry.coordinates])),P=null;g.features.length>0&&(P=g.features[0],P.properties.dist=gr(e,P,t),P.properties.location=a+gr(s,P,t)),s.properties.dist<n.properties.dist&&(n=s,n.properties.index=f,n.properties.location=a),o.properties.dist<n.properties.dist&&(n=o,n.properties.index=f+1,n.properties.location=a+h),P&&P.properties.dist<n.properties.dist&&(n=P,n.properties.index=f),a+=h}}),n}function je(r,e,t){t===void 0&&(t={});var n=Er(r),a=Er(e);a[0]+=a[0]-n[0]>180?-360:n[0]-a[0]>180?360:0;var i=xu(n,a),u=de(i,"meters",t.units);return u}function xu(r,e,t){t=t===void 0?Rr:Number(t);var n=t,a=r[1]*Math.PI/180,i=e[1]*Math.PI/180,u=i-a,f=Math.abs(e[0]-r[0])*Math.PI/180;f>Math.PI&&(f-=2*Math.PI);var s=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),o=Math.abs(s)>1e-11?u/s:Math.cos(a),h=Math.sqrt(u*u+o*o*f*f),v=h*n;return v}function Ca(r,e,t){if(t===void 0&&(t={}),t.method||(t.method="geodesic"),t.units||(t.units="kilometers"),!r)throw new Error("pt is required");if(Array.isArray(r)?r=W(r):r.type==="Point"?r=Fr(r):ke(r,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=yr(e):e.type==="LineString"?e=Fr(e):ke(e,"LineString","line");var n=1/0,a=r.geometry.coordinates;return ee(e,function(i){var u=i.geometry.coordinates[0],f=i.geometry.coordinates[1],s=Iu(a,u,f,t);s<n&&(n=s)}),de(n,"degrees",t.units)}function Iu(r,e,t,n){var a=[t[0]-e[0],t[1]-e[1]],i=[r[0]-e[0],r[1]-e[1]],u=fn(i,a);if(u<=0)return it(r,e,{method:n.method,units:"degrees"});var f=fn(a,a);if(f<=u)return it(r,t,{method:n.method,units:"degrees"});var s=u/f,o=[e[0]+s*a[0],e[1]+s*a[1]];return it(r,o,{method:n.method,units:"degrees"})}function fn(r,e){return r[0]*e[0]+r[1]*e[1]}function it(r,e,t){return t.method==="planar"?je(r,e,t):gr(r,e,t)}function Tu(r,e,t){t===void 0&&(t={});var n=t.units,a=t.properties||{},i=zu(r);if(!i.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if(Xr(e)!=="LineString")throw new Error("line must be a LineString");var u=1/0,f=null;return pr(i,function(s){var o=Ca(s,e,{units:n});o<u&&(u=o,f=s)}),f&&(f.properties=mt({dist:u},f.properties,a)),f}function zu(r){var e=[],t=r.geometry?r.geometry.type:r.type;switch(t){case"GeometryCollection":return br(r,function(n){n.type==="Point"&&e.push({type:"Feature",properties:{},geometry:n})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return r.features=r.features.filter(function(n){return n.geometry.type==="Point"}),r;default:throw new Error("points must be a Point Collection")}}function Gu(r,e){var t=Er(r),n=Lr(e),a=n.coordinates,i=a[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var u=e.properties||{},f=u.a,s=u.b,o=u.c,h=t[0],v=t[1],c=i[0][0],d=i[0][1],E=f!==void 0?f:i[0][2],g=i[1][0],P=i[1][1],m=s!==void 0?s:i[1][2],p=i[2][0],w=i[2][1],L=o!==void 0?o:i[2][2],M=(L*(h-c)*(v-P)+E*(h-g)*(v-w)+m*(h-p)*(v-d)-m*(h-c)*(v-w)-L*(h-g)*(v-d)-E*(h-p)*(v-P))/((h-c)*(v-P)+(h-g)*(v-w)+(h-p)*(v-d)-(h-c)*(v-w)-(h-g)*(v-d)-(h-p)*(v-P));return M}function Du(r){var e,t,n={type:"FeatureCollection",features:[]};if(r.type==="Feature"?t=r.geometry:t=r,t.type==="LineString")e=[t.coordinates];else if(t.type==="MultiLineString")e=t.coordinates;else if(t.type==="MultiPolygon")e=[].concat.apply([],t.coordinates);else if(t.type==="Polygon")e=t.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return e.forEach(function(a){e.forEach(function(i){for(var u=0;u<a.length-1;u++)for(var f=u;f<i.length-1;f++)if(!(a===i&&(Math.abs(u-f)===1||u===0&&f===a.length-2&&a[u][0]===a[a.length-1][0]&&a[u][1]===a[a.length-1][1]))){var s=$u(a[u][0],a[u][1],a[u+1][0],a[u+1][1],i[f][0],i[f][1],i[f+1][0],i[f+1][1]);s&&n.features.push(W([s[0],s[1]]))}})}),n}function $u(r,e,t,n,a,i,u,f){var s,o,h,v,c,d={x:null,y:null,onLine1:!1,onLine2:!1};return s=(f-i)*(t-r)-(u-a)*(n-e),s===0?d.x!==null&&d.y!==null?d:!1:(o=e-i,h=r-a,v=(u-a)*o-(f-i)*h,c=(t-r)*o-(n-e)*h,o=v/s,h=c/s,d.x=r+o*(t-r),d.y=e+o*(n-e),o>=0&&o<=1&&(d.onLine1=!0),h>=0&&h<=1&&(d.onLine2=!0),d.onLine1&&d.onLine2?[d.x,d.y]:!1)}function hn(r){for(var e=Wu(r),t=Ue(e),n=!1,a=0;!n&&a<e.features.length;){var i=e.features[a].geometry,u,f,s,o,h,v,c,d=!1;if(i.type==="Point")t.geometry.coordinates[0]===i.coordinates[0]&&t.geometry.coordinates[1]===i.coordinates[1]&&(n=!0);else if(i.type==="MultiPoint"){var E=!1;for(c=0;!E&&c<i.coordinates.length;)t.geometry.coordinates[0]===i.coordinates[c][0]&&t.geometry.coordinates[1]===i.coordinates[c][1]&&(n=!0,E=!0),c++}else if(i.type==="LineString")for(c=0;!d&&c<i.coordinates.length-1;)u=t.geometry.coordinates[0],f=t.geometry.coordinates[1],s=i.coordinates[c][0],o=i.coordinates[c][1],h=i.coordinates[c+1][0],v=i.coordinates[c+1][1],vn(u,f,s,o,h,v)&&(d=!0,n=!0),c++;else if(i.type==="MultiLineString")for(var g=0;g<i.coordinates.length;){d=!1,c=0;for(var P=i.coordinates[g];!d&&c<P.length-1;)u=t.geometry.coordinates[0],f=t.geometry.coordinates[1],s=P[c][0],o=P[c][1],h=P[c+1][0],v=P[c+1][1],vn(u,f,s,o,h,v)&&(d=!0,n=!0),c++;g++}else(i.type==="Polygon"||i.type==="MultiPolygon")&&Pr(t,i)&&(n=!0);a++}if(n)return t;var m=T([]);for(a=0;a<e.features.length;a++)m.features=m.features.concat(Ye(e.features[a]).features);return W(Xe(t,m).geometry.coordinates)}function Wu(r){return r.type!=="FeatureCollection"?r.type!=="Feature"?T([Fr(r)]):T([r]):r}function vn(r,e,t,n,a,i){var u=Math.sqrt((a-t)*(a-t)+(i-n)*(i-n)),f=Math.sqrt((r-t)*(r-t)+(e-n)*(e-n)),s=Math.sqrt((a-r)*(a-r)+(i-e)*(i-e));return u===f+s}var cn=6378137;function xt(r){return Ct(r,function(e,t){return e+Ju(t)},0)}function Ju(r){var e=0,t;switch(r.type){case"Polygon":return dn(r.coordinates);case"MultiPolygon":for(t=0;t<r.coordinates.length;t++)e+=dn(r.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function dn(r){var e=0;if(r&&r.length>0){e+=Math.abs(ln(r[0]));for(var t=1;t<r.length;t++)e-=Math.abs(ln(r[t]))}return e}function ln(r){var e,t,n,a,i,u,f,s=0,o=r.length;if(o>2){for(f=0;f<o;f++)f===o-2?(a=o-2,i=o-1,u=0):f===o-1?(a=o-1,i=0,u=1):(a=f,i=f+1,u=f+2),e=r[a],t=r[i],n=r[u],s+=(ut(n[0])-ut(e[0]))*Math.sin(ut(t[1]));s=s*cn*cn/2}return s}function ut(r){return r*Math.PI/180}function Hu(r,e,t){t===void 0&&(t={});for(var n=Lr(r),a=n.coordinates,i=0,u=0;u<a.length&&!(e>=i&&u===a.length-1);u++)if(i>=e){var f=e-i;if(f){var s=ae(a[u],a[u-1])-180,o=re(a[u],f,s,t);return o}else return W(a[u])}else i+=gr(a[u],a[u+1],t);return W(a[a.length-1])}function lt(r,e){return e===void 0&&(e={}),At(r,function(t,n){var a=n.geometry.coordinates;return t+gr(a[0],a[1],e)},0)}function Xu(r,e,t){var n=G(t);if(Xr(t)!=="LineString")throw new Error("line must be a LineString");var a=te(t,r),i=te(t,e),u;a.properties.index<=i.properties.index?u=[a,i]:u=[i,a];for(var f=[u[0].geometry.coordinates],s=u[0].properties.index+1;s<u[1].properties.index+1;s++)f.push(n[s]);return f.push(u[1].geometry.coordinates),yr(f,t.properties)}function Aa(r,e,t,n){if(n=n||{},!wr(n))throw new Error("options is invalid");var a,i=[];if(r.type==="Feature")a=r.geometry.coordinates;else if(r.type==="LineString")a=r.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var u=a.length,f=0,s,o,h,v=0;v<a.length&&!(e>=f&&v===a.length-1);v++){if(f>e&&i.length===0){if(s=e-f,!s)return i.push(a[v]),yr(i);o=ae(a[v],a[v-1])-180,h=re(a[v],s,o,n),i.push(h.geometry.coordinates)}if(f>=t)return s=t-f,s?(o=ae(a[v],a[v-1])-180,h=re(a[v],s,o,n),i.push(h.geometry.coordinates),yr(i)):(i.push(a[v]),yr(i));if(f>=e&&i.push(a[v]),v===a.length-1)return yr(i);f+=gr(a[v],a[v+1],n)}if(f<e&&a.length===u)throw new Error("Start position is beyond line");var c=a[a.length-1];return yr([c,c])}function Kr(r,e,t){t===void 0&&(t={});for(var n=Er(r),a=G(e),i=0;i<a.length-1;i++){var u=!1;if(t.ignoreEndVertices&&(i===0&&(u="start"),i===a.length-2&&(u="end"),i===0&&i+1===a.length-1&&(u="both")),Ku(a[i],a[i+1],n,u,typeof t.epsilon>"u"?null:t.epsilon))return!0}return!1}function Ku(r,e,t,n,a){var i=t[0],u=t[1],f=r[0],s=r[1],o=e[0],h=e[1],v=t[0]-f,c=t[1]-s,d=o-f,E=h-s,g=v*E-c*d;if(a!==null){if(Math.abs(g)>a)return!1}else if(g!==0)return!1;if(n){if(n==="start")return Math.abs(d)>=Math.abs(E)?d>0?f<i&&i<=o:o<=i&&i<f:E>0?s<u&&u<=h:h<=u&&u<s;if(n==="end")return Math.abs(d)>=Math.abs(E)?d>0?f<=i&&i<o:o<i&&i<=f:E>0?s<=u&&u<h:h<u&&u<=s;if(n==="both")return Math.abs(d)>=Math.abs(E)?d>0?f<i&&i<o:o<i&&i<f:E>0?s<u&&u<h:h<u&&u<s}else return Math.abs(d)>=Math.abs(E)?d>0?f<=i&&i<=o:o<=i&&i<=f:E>0?s<=u&&u<=h:h<=u&&u<=s;return!1}function ka(r,e){var t=Lr(r),n=Lr(e),a=t.type,i=n.type;switch(a){case"Point":switch(i){case"MultiPoint":return Zu(t,n);case"LineString":return Kr(t,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Pr(t,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"MultiPoint":return bu(t,n);case"LineString":return Qu(t,n);case"Polygon":case"MultiPolygon":return Uu(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"LineString":return Yu(t,n);case"Polygon":case"MultiPolygon":return _u(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Polygon":case"MultiPolygon":return ju(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+a+" geometry not supported")}}function Zu(r,e){var t,n=!1;for(t=0;t<e.coordinates.length;t++)if(qa(e.coordinates[t],r.coordinates)){n=!0;break}return n}function bu(r,e){for(var t=0;t<r.coordinates.length;t++){for(var n=!1,a=0;a<e.coordinates.length;a++)qa(r.coordinates[t],e.coordinates[a])&&(n=!0);if(!n)return!1}return!0}function Qu(r,e){for(var t=!1,n=0;n<r.coordinates.length;n++){if(!Kr(r.coordinates[n],e))return!1;t||(t=Kr(r.coordinates[n],e,{ignoreEndVertices:!0}))}return t}function Uu(r,e){for(var t=!0,n=!1,a=0;a<r.coordinates.length;a++){if(n=Pr(r.coordinates[1],e),!n){t=!1;break}n=Pr(r.coordinates[1],e,{ignoreBoundary:!0})}return t&&n}function Yu(r,e){for(var t=0;t<r.coordinates.length;t++)if(!Kr(r.coordinates[t],e))return!1;return!0}function _u(r,e){var t=Ar(e),n=Ar(r);if(!Oa(t,n))return!1;for(var a=!1,i=0;i<r.coordinates.length-1;i++){if(!Pr(r.coordinates[i],e))return!1;if(a||(a=Pr(r.coordinates[i],e,{ignoreBoundary:!0})),!a){var u=Vu(r.coordinates[i],r.coordinates[i+1]);a=Pr(u,e,{ignoreBoundary:!0})}}return a}function ju(r,e){var t=Ar(r),n=Ar(e);if(!Oa(n,t))return!1;for(var a=0;a<r.coordinates[0].length;a++)if(!Pr(r.coordinates[0][a],e))return!1;return!0}function Oa(r,e){return!(r[0]>e[0]||r[2]<e[2]||r[1]>e[1]||r[3]<e[3])}function qa(r,e){return r[0]===e[0]&&r[1]===e[1]}function Vu(r,e){return[(r[0]+e[0])/2,(r[1]+e[1])/2]}function Ba(r,e,t){t===void 0&&(t={}),t.mask&&!t.units&&(t.units="kilometers");for(var n=[],a=r[0],i=r[1],u=r[2],f=r[3],s=e/gr([a,i],[u,i],t),o=s*(u-a),h=e/gr([a,i],[a,f],t),v=h*(f-i),c=u-a,d=f-i,E=Math.floor(c/o),g=Math.floor(d/v),P=(c-E*o)/2,m=(d-g*v)/2,p=a+P;p<=u;){for(var w=i+m;w<=f;){var L=W([p,w],t.properties);t.mask?ka(L,t.mask)&&n.push(L):n.push(L),w+=v}p+=o}return T(n)}function Fa(r,e){e===void 0&&(e={});var t=e.precision,n=e.coordinates,a=e.mutate;if(t=t==null||isNaN(t)?6:t,n=n==null||isNaN(n)?3:n,!r)throw new Error("<geojson> is required");if(typeof t!="number")throw new Error("<precision> must be a number");if(typeof n!="number")throw new Error("<coordinates> must be a number");(a===!1||a===void 0)&&(r=JSON.parse(JSON.stringify(r)));var i=Math.pow(10,t);return Cr(r,function(u){ro(u,i,n)}),r}function ro(r,e,t){r.length>t&&r.splice(t,r.length);for(var n=0;n<r.length;n++)r[n]=Math.round(r[n]*e)/e;return r}function pt(r){if(!r)throw new Error("geojson is required");var e=[];return zr(r,function(t){e.push(t)}),T(e)}function eo(r,e,t){if(t=t||{},!wr(t))throw new Error("options is invalid");var n=t.units,a=t.reverse;if(!r)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var i=[];return zr(r,function(u){a&&(u.geometry.coordinates=u.geometry.coordinates.reverse()),to(u,e,n,function(f){i.push(f)})}),T(i)}function to(r,e,t,n){var a=lt(r,{units:t});if(a<=e)return n(r);var i=a/e;Number.isInteger(i)||(i=Math.floor(i)+1);for(var u=0;u<i;u++){var f=Aa(r,e*u,e*(u+1),{units:t});n(f,u)}}function no(r,e,t){if(r.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");t===void 0&&(t=1);var n=r.geometry.coordinates,a=[],i={};if(t){for(var u=[],f=0;f<n.length;f++)for(var s=0;s<n[f].length-1;s++)u.push(P(f,s));var o=Et();o.load(u)}for(var h=0;h<n.length;h++)for(var v=0;v<n[h].length-1;v++)if(t){var c=o.search(P(h,v));c.forEach(function(m){var p=m.ring,w=m.edge;g(h,v,p,w)})}else for(var d=0;d<n.length;d++)for(var E=0;E<n[d].length-1;E++)g(h,v,d,E);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a;function g(m,p,w,L){var M=n[m][p],q=n[m][p+1],S=n[w][L],k=n[w][L+1],y=ao(M,q,S,k);if(y!==null){var qr,C;if(q[0]!==M[0]?qr=(y[0]-M[0])/(q[0]-M[0]):qr=(y[1]-M[1])/(q[1]-M[1]),k[0]!==S[0]?C=(y[0]-S[0])/(k[0]-S[0]):C=(y[1]-S[1])/(k[1]-S[1]),!(qr>=1||qr<=0||C>=1||C<=0)){var A=y,O=!i[A];O&&(i[A]=!0),e?a.push(e(y,m,p,M,q,qr,w,L,S,k,C,O)):a.push(y)}}}function P(m,p){var w=n[m][p],L=n[m][p+1],M,q,S,k;return w[0]<L[0]?(M=w[0],q=L[0]):(M=L[0],q=w[0]),w[1]<L[1]?(S=w[1],k=L[1]):(S=L[1],k=w[1]),{minX:M,minY:S,maxX:q,maxY:k,ring:m,edge:p}}}function ao(r,e,t,n){if(Ce(r,t)||Ce(r,n)||Ce(e,t)||Ce(n,t))return null;var a=r[0],i=r[1],u=e[0],f=e[1],s=t[0],o=t[1],h=n[0],v=n[1],c=(a-u)*(o-v)-(i-f)*(s-h);if(c===0)return null;var d=((a*f-i*u)*(s-h)-(a-u)*(s*v-o*h))/c,E=((a*f-i*u)*(o-v)-(i-f)*(s*v-o*h))/c;return[d,E]}function Ce(r,e){if(!r||!e||r.length!==e.length)return!1;for(var t=0,n=r.length;t<n;t++)if(r[t]instanceof Array&&e[t]instanceof Array){if(!Ce(r[t],e[t]))return!1}else if(r[t]!==e[t])return!1;return!0}function io(r){if(r.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(r.geometry===void 0||r.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(r.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var e=r.geometry.coordinates.length,t=[],p=0;p<e;p++){var n=r.geometry.coordinates[p];Ae(n[0],n[n.length-1])||n.push(n[0]),t.push.apply(t,n.slice(0,n.length-1))}if(!oo(t))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var a=t.length,i=no(r,function(Or,Wr,jr,Vr,tt,Le,Ie,Te,di,li,pi,yi){return[Or,Wr,jr,Vr,tt,Le,Ie,Te,di,li,pi,yi]}),u=i.length;if(u==0){for(var S=[],p=0;p<e;p++)S.push(J([r.geometry.coordinates[p]],{parent:-1,winding:uo(r.geometry.coordinates[p])}));var Mr=T(S);return Ur(),Yr(),Mr}for(var f=[],s=[],p=0;p<e;p++){f.push([]);for(var o=0;o<r.geometry.coordinates[p].length-1;o++)f[p].push([new pn(r.geometry.coordinates[p][ge(o+1,r.geometry.coordinates[p].length-1)],1,[p,o],[p,ge(o+1,r.geometry.coordinates[p].length-1)],void 0)]),s.push(new yn(r.geometry.coordinates[p][o],[p,ge(o-1,r.geometry.coordinates[p].length-1)],[p,o],void 0,void 0,!1,!0))}for(var p=0;p<u;p++)f[i[p][1]][i[p][2]].push(new pn(i[p][0],i[p][5],[i[p][1],i[p][2]],[i[p][6],i[p][7]],void 0)),i[p][11]&&s.push(new yn(i[p][0],[i[p][1],i[p][2]],[i[p][6],i[p][7]],void 0,void 0,!0,!0));for(var h=s.length,p=0;p<f.length;p++)for(var o=0;o<f[p].length;o++)f[p][o].sort(function(Wr,jr){return Wr.param<jr.param?-1:1});for(var v=[],p=0;p<h;p++)v.push({minX:s[p].coord[0],minY:s[p].coord[1],maxX:s[p].coord[0],maxY:s[p].coord[1],index:p});var c=Et();c.load(v);for(var p=0;p<f.length;p++)for(var o=0;o<f[p].length;o++)for(var d=0;d<f[p][o].length;d++){var E;d==f[p][o].length-1?E=f[p][ge(o+1,r.geometry.coordinates[p].length-1)][0].coord:E=f[p][o][d+1].coord;var g=c.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];f[p][o][d].nxtIsectAlongEdgeIn=g.index}for(var p=0;p<f.length;p++)for(var o=0;o<f[p].length;o++)for(var d=0;d<f[p][o].length;d++){var E=f[p][o][d].coord,g=c.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0],P=g.index;P<a?s[P].nxtIsectAlongRingAndEdge2=f[p][o][d].nxtIsectAlongEdgeIn:Ae(s[P].ringAndEdge1,f[p][o][d].ringAndEdgeIn)?s[P].nxtIsectAlongRingAndEdge1=f[p][o][d].nxtIsectAlongEdgeIn:s[P].nxtIsectAlongRingAndEdge2=f[p][o][d].nxtIsectAlongEdgeIn}for(var m=[],p=0,o=0;o<e;o++){for(var w=p,d=0;d<r.geometry.coordinates[o].length-1;d++)s[p].coord[0]<s[w].coord[0]&&(w=p),p++;for(var L=s[w].nxtIsectAlongRingAndEdge2,d=0;d<s.length;d++)if(s[d].nxtIsectAlongRingAndEdge1==w||s[d].nxtIsectAlongRingAndEdge2==w){var M=d;break}var q=De([s[M].coord,s[w].coord,s[L].coord],!0)?1:-1;m.push({isect:w,parent:-1,winding:q})}m.sort(function(Br,Or){return s[Br.isect].coord>s[Or.isect].coord?-1:1});for(var S=[];m.length>0;){var k=m.pop(),y=k.isect,qr=k.parent,C=k.winding,A=S.length,O=[s[y].coord],D=y;if(s[y].ringAndEdge1Walkable)var Sr=s[y].ringAndEdge1,$=s[y].nxtIsectAlongRingAndEdge1;else var Sr=s[y].ringAndEdge2,$=s[y].nxtIsectAlongRingAndEdge2;for(;!Ae(s[y].coord,s[$].coord);){O.push(s[$].coord);for(var Nr=void 0,p=0;p<m.length;p++)if(m[p].isect==$){Nr=p;break}if(Nr!=null&&m.splice(Nr,1),Ae(Sr,s[$].ringAndEdge1)){if(Sr=s[$].ringAndEdge2,s[$].ringAndEdge2Walkable=!1,s[$].ringAndEdge1Walkable){var kr={isect:$};De([s[D].coord,s[$].coord,s[s[$].nxtIsectAlongRingAndEdge2].coord],C==1)?(kr.parent=qr,kr.winding=-C):(kr.parent=A,kr.winding=C),m.push(kr)}D=$,$=s[$].nxtIsectAlongRingAndEdge2}else{if(Sr=s[$].ringAndEdge1,s[$].ringAndEdge1Walkable=!1,s[$].ringAndEdge2Walkable){var kr={isect:$};De([s[D].coord,s[$].coord,s[s[$].nxtIsectAlongRingAndEdge1].coord],C==1)?(kr.parent=qr,kr.winding=-C):(kr.parent=A,kr.winding=C),m.push(kr)}D=$,$=s[$].nxtIsectAlongRingAndEdge1}}O.push(s[$].coord),S.push(J([O],{index:A,parent:qr,winding:C,netWinding:void 0}))}var Mr=T(S);Ur(),Yr();function Ur(){for(var Br=[],Or=0;Or<Mr.features.length;Or++)Mr.features[Or].properties.parent==-1&&Br.push(Or);if(Br.length>1)for(var Or=0;Or<Br.length;Or++){for(var Wr=-1,jr=1/0,Vr=0;Vr<Mr.features.length;Vr++)Br[Or]!=Vr&&Pr(Mr.features[Br[Or]].geometry.coordinates[0][0],Mr.features[Vr],{ignoreBoundary:!0})&&xt(Mr.features[Vr])<jr&&(Wr=Vr);Mr.features[Br[Or]].properties.parent=Wr}}function Yr(){for(var Br=0;Br<Mr.features.length;Br++)if(Mr.features[Br].properties.parent==-1){var Or=Mr.features[Br].properties.winding;Mr.features[Br].properties.netWinding=Or,_r(Br,Or)}}function _r(Br,Or){for(var Wr=0;Wr<Mr.features.length;Wr++)if(Mr.features[Wr].properties.parent==Br){var jr=Or+Mr.features[Wr].properties.winding;Mr.features[Wr].properties.netWinding=jr,_r(Wr,jr)}}return Mr}var pn=function(r,e,t,n,a){this.coord=r,this.param=e,this.ringAndEdgeIn=t,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=a},yn=function(r,e,t,n,a,i,u){this.coord=r,this.ringAndEdge1=e,this.ringAndEdge2=t,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=a,this.ringAndEdge1Walkable=i,this.ringAndEdge2Walkable=u};function De(r,e){if(typeof e>"u"&&(e=!0),r.length!=3)throw new Error("This function requires an array of three points [x,y]");var t=(r[1][0]-r[0][0])*(r[2][1]-r[0][1])-(r[1][1]-r[0][1])*(r[2][0]-r[0][0]);return t>=0==e}function uo(r){for(var e=0,t=0;t<r.length-1;t++)r[t][0]<r[e][0]&&(e=t);if(De([r[ge(e-1,r.length-1)],r[e],r[ge(e+1,r.length-1)]],!0))var n=1;else var n=-1;return n}function Ae(r,e){if(!r||!e||r.length!=e.length)return!1;for(var t=0,n=r.length;t<n;t++)if(r[t]instanceof Array&&e[t]instanceof Array){if(!Ae(r[t],e[t]))return!1}else if(r[t]!=e[t])return!1;return!0}function ge(r,e){return(r%e+e)%e}function oo(r){for(var e={},t=1,n=0,a=r.length;n<a;++n){if(Object.prototype.hasOwnProperty.call(e,r[n])){t=0;break}e[r[n]]=1}return t}function so(r){var e=[];return zr(r,function(t){t.geometry.type==="Polygon"&&pr(io(t),function(n){e.push(J(n.geometry.coordinates,t.properties))})}),T(e)}var gn=Math.PI/180,wn=180/Math.PI,Oe=function(r,e){this.lon=r,this.lat=e,this.x=gn*r,this.y=gn*e};Oe.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};Oe.prototype.antipode=function(){var r=-1*this.lat,e=this.lon<0?180+this.lon:(180-this.lon)*-1;return new Oe(e,r)};var Na=function(){this.coords=[],this.length=0};Na.prototype.move_to=function(r){this.length++,this.coords.push(r)};var It=function(r){this.properties=r||{},this.geometries=[]};It.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var r=[],e=0;e<this.geometries.length;e++)r.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:r},type:"Feature",properties:this.properties}};It.prototype.wkt=function(){for(var r="",e="LINESTRING(",t=function(i){e+=i[0]+" "+i[1]+","},n=0;n<this.geometries.length;n++){if(this.geometries[n].coords.length===0)return"LINESTRING(empty)";var a=this.geometries[n].coords;a.forEach(t),r+=e.substring(0,e.length-1)+")"}return r};var Tt=function(r,e,t){if(!r||r.x===void 0||r.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||e.x===void 0||e.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Oe(r.x,r.y),this.end=new Oe(e.x,e.y),this.properties=t||{};var n=this.start.x-this.end.x,a=this.start.y-this.end.y,i=Math.pow(Math.sin(a/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(i)),this.g===Math.PI)throw new Error("it appears "+r.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+r+" and "+e)};Tt.prototype.interpolate=function(r){var e=Math.sin((1-r)*this.g)/Math.sin(this.g),t=Math.sin(r*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),a=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),i=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),u=wn*Math.atan2(i,Math.sqrt(Math.pow(n,2)+Math.pow(a,2))),f=wn*Math.atan2(a,n);return[f,u]};Tt.prototype.Arc=function(r,e){var t=[];if(!r||r<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var n=1/(r-1),a=0;a<r;++a){var i=n*a,u=this.interpolate(i);t.push(u)}for(var f=!1,s=0,o=e&&e.offset?e.offset:10,h=180-o,v=-180+o,c=360-o,d=1;d<t.length;++d){var E=t[d-1][0],g=t[d][0],P=Math.abs(g-E);P>c&&(g>h&&E<v||E>h&&g<v)?f=!0:P>s&&(s=P)}var m=[];if(f&&s<o){var p=[];m.push(p);for(var w=0;w<t.length;++w){var L=parseFloat(t[w][0]);if(w>0&&Math.abs(L-t[w-1][0])>c){var M=parseFloat(t[w-1][0]),q=parseFloat(t[w-1][1]),S=parseFloat(t[w][0]),k=parseFloat(t[w][1]);if(M>-180&&M<v&&S===180&&w+1<t.length&&t[w-1][0]>-180&&t[w-1][0]<v){p.push([-180,t[w][1]]),w++,p.push([t[w][0],t[w][1]]);continue}else if(M>h&&M<180&&S===-180&&w+1<t.length&&t[w-1][0]>h&&t[w-1][0]<180){p.push([180,t[w][1]]),w++,p.push([t[w][0],t[w][1]]);continue}if(M<v&&S>h){var y=M;M=S,S=y;var qr=q;q=k,k=qr}if(M>h&&S<v&&(S+=360),M<=180&&S>=180&&M<S){var C=(180-M)/(S-M),A=C*k+(1-C)*q;p.push([t[w-1][0]>h?180:-180,A]),p=[],p.push([t[w-1][0]>h?-180:180,A]),m.push(p)}else p=[],m.push(p);p.push([L,t[w][1]])}else p.push([t[w][0],t[w][1]])}}else{var O=[];m.push(O);for(var D=0;D<t.length;++D)O.push([t[D][0],t[D][1]])}for(var Sr=new It(this.properties),$=0;$<m.length;++$){var Nr=new Na;Sr.geometries.push(Nr);for(var kr=m[$],Mr=0;Mr<kr.length;++Mr)Nr.move_to(kr[Mr])}return Sr};function fo(r,e,t){if(t=t||{},typeof t!="object")throw new Error("options is invalid");var n=t.properties,a=t.npoints,i=t.offset;r=Er(r),e=Er(e),n=n||{},a=a||100,i=i||10;var u=new Tt({x:r[0],y:r[1]},{x:e[0],y:e[1]},n),f=u.Arc(a,{offset:i});return f.json()}function ho(r,e){if(!r)throw new Error("line is required");if(!e)throw new Error("splitter is required");var t=Xr(r),n=Xr(e);if(t!=="LineString")throw new Error("line must be LineString");if(n==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(n==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var a=Fa(e,{precision:7});switch(n){case"Point":return yt(r,a);case"MultiPoint":return mn(r,a);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return mn(r,ue(r,a))}}function mn(r,e){var t=[],n=be();return zr(e,function(a){if(t.forEach(function(f,s){f.id=s}),!t.length)t=yt(r,a).features,t.forEach(function(f){f.bbox||(f.bbox=wa(Ar(f)))}),n.load(T(t));else{var i=n.search(a);if(i.features.length){var u=Ra(a,i);t=t.filter(function(f){return f.id!==u.id}),n.remove(u),pr(yt(u,a),function(f){t.push(f),n.insert(f)})}}}),T(t)}function yt(r,e){var t=[],n=G(r)[0],a=G(r)[r.geometry.coordinates.length-1];if(ot(n,Er(e))||ot(a,Er(e)))return T([r]);var i=be(),u=pe(r);i.load(u);var f=i.search(e);if(!f.features.length)return T([r]);var s=Ra(e,f),o=[n],h=St(u,function(v,c,d){var E=G(c)[1],g=Er(e);return d===s.id?(v.push(g),t.push(yr(v)),ot(g,E)?[g]:[g,E]):(v.push(E),v)},o);return h.length>1&&t.push(yr(h)),T(t)}function Ra(r,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var t,n=1/0;return pr(e,function(a){var i=te(a,r),u=i.properties.dist;u<n&&(t=a,n=u)}),t}function ot(r,e){return r[0]===e[0]&&r[1]===e[1]}function xa(r,e,t,n,a){a===void 0&&(a={});var i=a.steps||64,u=En(t),f=En(n),s=!Array.isArray(r)&&r.type==="Feature"?r.properties:{};if(u===f)return yr(Nt(r,e,a).geometry.coordinates[0],s);for(var o=u,h=u<f?f:f+360,v=o,c=[],d=0;v<h;)c.push(re(r,e,v,a).geometry.coordinates),d++,v=o+d*360/i;return v>h&&c.push(re(r,e,h,a).geometry.coordinates),yr(c,s)}function En(r){var e=r%360;return e<0&&(e+=360),e}function qe(r,e){e===void 0&&(e={});var t=Lr(r);switch(!e.properties&&r.type==="Feature"&&(e.properties=r.properties),t.type){case"Polygon":return Ia(t,e);case"MultiPolygon":return vo(t,e);default:throw new Error("invalid poly")}}function Ia(r,e){e===void 0&&(e={});var t=Lr(r),n=t.coordinates,a=e.properties?e.properties:r.type==="Feature"?r.properties:{};return Ta(n,a)}function vo(r,e){e===void 0&&(e={});var t=Lr(r),n=t.coordinates,a=e.properties?e.properties:r.type==="Feature"?r.properties:{},i=[];return n.forEach(function(u){i.push(Ta(u,a))}),T(i)}function Ta(r,e){return r.length>1?fe(r,e):yr(r[0],e)}function Mn(r,e){e===void 0&&(e={});var t,n,a,i=e.properties,u=(t=e.autoComplete)!==null&&t!==void 0?t:!0,f=(n=e.orderCoords)!==null&&n!==void 0?n:!0,s=(a=e.mutate)!==null&&a!==void 0?a:!1;switch(s||(r=Dr(r)),r.type){case"FeatureCollection":var o=[];return r.features.forEach(function(h){o.push(G(Pn(h,{},u,f)))}),Zr(o,i);default:return Pn(r,i,u,f)}}function Pn(r,e,t,n){e=e||(r.type==="Feature"?r.properties:{});var a=Lr(r),i=a.coordinates,u=a.type;if(!i.length)throw new Error("line must contain coordinates");switch(u){case"LineString":return t&&(i=Ln(i)),J([i],e);case"MultiLineString":var f=[],s=0;return i.forEach(function(o){if(t&&(o=Ln(o)),n){var h=co(Ar(yr(o)));h>s?(f.unshift(o),s=h):f.push(o)}else f.push(o)}),J(f,e);default:throw new Error("geometry type "+u+" is not supported")}}function Ln(r){var e=r[0],t=e[0],n=e[1],a=r[r.length-1],i=a[0],u=a[1];return(t!==i||n!==u)&&r.push(e),r}function co(r){var e=r[0],t=r[1],n=r[2],a=r[3];return Math.abs(e-n)*Math.abs(t-a)}function lo(r,e,t){var n=r.length,a=we(r[0],e),i=[],u,f,s,o,h;for(t||(t=[]),u=1;u<n;u++){for(o=r[u-1],h=r[u],f=s=we(h,e);;)if(a|f){if(a&f)break;a?(o=gt(o,h,a,e),a=we(o,e)):(h=gt(o,h,f,e),f=we(h,e))}else{i.push(o),f!==s?(i.push(h),u<n-1&&(t.push(i),i=[])):u===n-1&&i.push(h);break}a=s}return i.length&&t.push(i),t}function po(r,e){var t,n,a,i,u,f,s;for(n=1;n<=8;n*=2){for(t=[],a=r[r.length-1],i=!(we(a,e)&n),u=0;u<r.length;u++)f=r[u],s=!(we(f,e)&n),s!==i&&t.push(gt(a,f,n,e)),s&&t.push(f),a=f,i=s;if(r=t,!r.length)break}return t}function gt(r,e,t,n){return t&8?[r[0]+(e[0]-r[0])*(n[3]-r[1])/(e[1]-r[1]),n[3]]:t&4?[r[0]+(e[0]-r[0])*(n[1]-r[1])/(e[1]-r[1]),n[1]]:t&2?[n[2],r[1]+(e[1]-r[1])*(n[2]-r[0])/(e[0]-r[0])]:t&1?[n[0],r[1]+(e[1]-r[1])*(n[0]-r[0])/(e[0]-r[0])]:null}function we(r,e){var t=0;return r[0]<e[0]?t|=1:r[0]>e[2]&&(t|=2),r[1]<e[1]?t|=4:r[1]>e[3]&&(t|=8),t}function yo(r,e){var t=Lr(r),n=t.type,a=r.type==="Feature"?r.properties:{},i=t.coordinates;switch(n){case"LineString":case"MultiLineString":{var u=[];return n==="LineString"&&(i=[i]),i.forEach(function(f){lo(f,e,u)}),u.length===1?yr(u[0],a):fe(u,a)}case"Polygon":return J(Sn(i,e),a);case"MultiPolygon":return Zr(i.map(function(f){return Sn(f,e)}),a);default:throw new Error("geometry "+n+" not supported")}}function Sn(r,e){for(var t=[],n=0,a=r;n<a.length;n++){var i=a[n],u=po(i,e);u.length>0&&((u[0][0]!==u[u.length-1][0]||u[0][1]!==u[u.length-1][1])&&u.push(u[0]),u.length>=4&&t.push(u))}return t}function za(r,e,t){if(t===void 0&&(t={}),t=t||{},!wr(t))throw new Error("options is invalid");var n=t.tolerance||0,a=[],i=be(),u=pe(r);i.load(u);var f;return ee(e,function(s){var o=!1;s&&(pr(i.search(s),function(h){if(o===!1){var v=G(s).sort(),c=G(h).sort();Se(v,c)||(n===0?Kr(v[0],h)&&Kr(v[1],h):te(h,v[0]).properties.dist<=n&&te(h,v[1]).properties.dist<=n)?(o=!0,f?f=st(f,s):f=s):(n===0?Kr(c[0],s)&&Kr(c[1],s):te(s,c[0]).properties.dist<=n&&te(s,c[1]).properties.dist<=n)&&(f?f=st(f,h):f=h)}}),o===!1&&f&&(a.push(f),f=void 0))}),f&&a.push(f),T(a)}function st(r,e){var t=G(e),n=G(r),a=n[0],i=n[n.length-1],u=r.geometry.coordinates;return Se(t[0],a)?u.unshift(t[1]):Se(t[0],i)?u.push(t[1]):Se(t[1],a)?u.unshift(t[0]):Se(t[1],i)&&u.push(t[0]),r}function go(r,e,t,n,a){if(a=a||{},!wr(a))throw new Error("options is invalid");var i=a.properties;if(!r)throw new Error("center is required");if(t==null)throw new Error("bearing1 is required");if(n==null)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if(typeof a!="object")throw new Error("options must be an object");if(Cn(t)===Cn(n))return Nt(r,e,a);var u=G(r),f=xa(r,e,t,n,a),s=[[u]];return Cr(f,function(o){s[0].push(o)}),s[0].push(u),J(s,i)}function Cn(r){var e=r%360;return e<0&&(e+=360),e}function ye(r,e,t){t===void 0&&(t={});var n;t.final?n=An(Er(e),Er(r)):n=An(Er(r),Er(e));var a=n>180?-(360-n):n;return a}function An(r,e){var t=xr(r[1]),n=xr(e[1]),a=xr(e[0]-r[0]);a>Math.PI&&(a-=2*Math.PI),a<-Math.PI&&(a+=2*Math.PI);var i=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(t/2+Math.PI/4)),u=Math.atan2(a,i);return(oe(u)+360)%360}function Me(r,e,t,n){n===void 0&&(n={});var a=e<0,i=de(Math.abs(e),n.units,"meters");a&&(i=-Math.abs(i));var u=Er(r),f=wo(u,i,t);return f[0]+=f[0]-u[0]>180?-360:u[0]-f[0]>180?360:0,W(f,n.properties)}function wo(r,e,t,n){n=n===void 0?Rr:Number(n);var a=e/n,i=r[0]*Math.PI/180,u=xr(r[1]),f=xr(t),s=a*Math.cos(f),o=u+s;Math.abs(o)>Math.PI/2&&(o=o>0?Math.PI-o:-Math.PI-o);var h=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(u/2+Math.PI/4)),v=Math.abs(h)>1e-11?s/h:Math.cos(u),c=a*Math.sin(f)/v,d=i+c;return[(d*180/Math.PI+540)%360-180,o*180/Math.PI]}function mo(r,e){var t=G(r),n=G(e),a,i,u,f,s=Ar(e),o=0,h=null;t[0]>s[0]&&t[0]<s[2]&&t[1]>s[1]&&t[1]<s[3]&&(h=Xe(r,Ye(e)),o=h.properties.featureIndex);var v=Xr(e);switch(v){case"Polygon":a=n[0][o],i=n[0][0],h!==null&&h.geometry.coordinates[1]<t[1]&&(i=n[0][o]),f=Be(n[0][0],n[0][n[0].length-1],t);var c=kn(n[0],t,f,u,a,i);a=c[0],i=c[1];break;case"MultiPolygon":for(var d=0,E=0,g=0,P=0;P<n[0].length;P++){d=P;for(var m=!1,p=0;p<n[0][P].length;p++){if(E=p,g===o){m=!0;break}g++}if(m)break}a=n[0][d][E],i=n[0][d][E],f=Be(n[0][0][0],n[0][0][n[0][0].length-1],t),n.forEach(function(w){var L=kn(w[0],t,f,u,a,i);a=L[0],i=L[1]});break}return T([W(a),W(i)])}function kn(r,e,t,n,a,i){for(var u=0;u<r.length;u++){var f=r[u],s=r[u+1];u===r.length-1&&(s=r[0]),n=Be(f,s,e),t<=0&&n>0?Mo(e,f,a)||(a=f):t>0&&n<=0&&(Eo(e,f,i)||(i=f)),t=n}return[a,i]}function Eo(r,e,t){return Be(r,e,t)>0}function Mo(r,e,t){return Be(r,e,t)<0}function Be(r,e,t){return(e[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(e[1]-r[1])}function Ke(r){for(var e=G(r),t=0,n=1,a,i;n<e.length;)a=i||e[0],i=e[n],t+=(i[0]-a[0])*(i[1]+a[1]),n++;return t>0}function Po(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.reverse||!1,n=e.mutate||!1;if(!r)throw new Error("<geojson> is required");if(typeof t!="boolean")throw new Error("<reverse> must be a boolean");if(typeof n!="boolean")throw new Error("<mutate> must be a boolean");n===!1&&(r=Dr(r));var a=[];switch(r.type){case"GeometryCollection":return br(r,function(i){$e(i,t)}),r;case"FeatureCollection":return pr(r,function(i){pr($e(i,t),function(u){a.push(u)})}),T(a)}return $e(r,t)}function $e(r,e){var t=r.type==="Feature"?r.geometry.type:r.type;switch(t){case"GeometryCollection":return br(r,function(n){$e(n,e)}),r;case"LineString":return On(G(r),e),r;case"Polygon":return qn(G(r),e),r;case"MultiLineString":return G(r).forEach(function(n){On(n,e)}),r;case"MultiPolygon":return G(r).forEach(function(n){qn(n,e)}),r;case"Point":case"MultiPoint":return r}}function On(r,e){Ke(r)===e&&r.reverse()}function qn(r,e){Ke(r[0])!==e&&r[0].reverse();for(var t=1;t<r.length;t++)Ke(r[t])===e&&r[t].reverse()}function Lo(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.zProperty||"elevation",n=e.flip,a=e.flags;ie(r,"Point","input must contain Points");for(var i=So(r,n),u=[],f=0;f<i.length;f++){for(var s=i[f],o=[],h=0;h<s.length;h++){var v=s[h];v.properties[t]?o.push(v.properties[t]):o.push(0),a===!0&&(v.properties.matrixPosition=[f,h])}u.push(o)}return u}function So(r,e){var t={};pr(r,function(i){var u=G(i)[1];t[u]||(t[u]=[]),t[u].push(i)});var n=Object.keys(t).map(function(i){var u=t[i],f=u.sort(function(s,o){return G(s)[0]-G(o)[0]});return f}),a=n.sort(function(i,u){return e?G(i[0])[1]-G(u[0])[1]:G(u[0])[1]-G(i[0])[1]});return a}/*!
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var Bn={successCallback:null,verbose:!1,polygons:!1},he={};function Co(r,e,t,n){n=n||{};for(var a=Object.keys(Bn),i=0;i<a.length;i++){var u=a[i],f=n[u];f=typeof f<"u"&&f!==null?f:Bn[u],he[u]=f}he.verbose;var s=as(r,e,t),o;return he.polygons?(he.verbose,o=hs(s)):(he.verbose,o=is(s)),typeof he.successCallback=="function"&&he.successCallback(o),o}var Jr=64,Qr=16,Tr=4,Gr=1,H=[],X=[],K=[],Z=[],b=[],Q=[],U=[],Y=[],_=[],j=[],V=[],rr=[],er=[],tr=[],nr=[],ar=[],ir=[],ur=[],or=[],sr=[],fr=[],hr=[],vr=[],cr=[];U[85]=j[85]=-1;Y[85]=V[85]=0;_[85]=rr[85]=1;or[85]=hr[85]=1;sr[85]=vr[85]=0;fr[85]=cr[85]=1;H[85]=Z[85]=0;X[85]=b[85]=-1;K[85]=nr[85]=0;ar[85]=er[85]=0;ir[85]=tr[85]=1;Q[85]=ur[85]=1;hr[1]=hr[169]=0;vr[1]=vr[169]=-1;cr[1]=cr[169]=0;er[1]=er[169]=-1;tr[1]=tr[169]=0;nr[1]=nr[169]=0;j[4]=j[166]=0;V[4]=V[166]=-1;rr[4]=rr[166]=1;ar[4]=ar[166]=1;ir[4]=ir[166]=0;ur[4]=ur[166]=0;U[16]=U[154]=0;Y[16]=Y[154]=1;_[16]=_[154]=1;Z[16]=Z[154]=1;b[16]=b[154]=0;Q[16]=Q[154]=1;or[64]=or[106]=0;sr[64]=sr[106]=1;fr[64]=fr[106]=0;H[64]=H[106]=-1;X[64]=X[106]=0;K[64]=K[106]=1;or[2]=or[168]=0;sr[2]=sr[168]=-1;fr[2]=fr[168]=1;hr[2]=hr[168]=0;vr[2]=vr[168]=-1;cr[2]=cr[168]=0;er[2]=er[168]=-1;tr[2]=tr[168]=0;nr[2]=nr[168]=0;ar[2]=ar[168]=-1;ir[2]=ir[168]=0;ur[2]=ur[168]=1;U[8]=U[162]=0;Y[8]=Y[162]=-1;_[8]=_[162]=0;j[8]=j[162]=0;V[8]=V[162]=-1;rr[8]=rr[162]=1;er[8]=er[162]=1;tr[8]=tr[162]=0;nr[8]=nr[162]=1;ar[8]=ar[162]=1;ir[8]=ir[162]=0;ur[8]=ur[162]=0;U[32]=U[138]=0;Y[32]=Y[138]=1;_[32]=_[138]=1;j[32]=j[138]=0;V[32]=V[138]=1;rr[32]=rr[138]=0;H[32]=H[138]=1;X[32]=X[138]=0;K[32]=K[138]=0;Z[32]=Z[138]=1;b[32]=b[138]=0;Q[32]=Q[138]=1;hr[128]=hr[42]=0;vr[128]=vr[42]=1;cr[128]=cr[42]=1;or[128]=or[42]=0;sr[128]=sr[42]=1;fr[128]=fr[42]=0;H[128]=H[42]=-1;X[128]=X[42]=0;K[128]=K[42]=1;Z[128]=Z[42]=-1;b[128]=b[42]=0;Q[128]=Q[42]=0;j[5]=j[165]=-1;V[5]=V[165]=0;rr[5]=rr[165]=0;hr[5]=hr[165]=1;vr[5]=vr[165]=0;cr[5]=cr[165]=0;ar[20]=ar[150]=0;ir[20]=ir[150]=1;ur[20]=ur[150]=1;Z[20]=Z[150]=0;b[20]=b[150]=-1;Q[20]=Q[150]=1;U[80]=U[90]=-1;Y[80]=Y[90]=0;_[80]=_[90]=1;or[80]=or[90]=1;sr[80]=sr[90]=0;fr[80]=fr[90]=1;er[65]=er[105]=0;tr[65]=tr[105]=1;nr[65]=nr[105]=0;H[65]=H[105]=0;X[65]=X[105]=-1;K[65]=K[105]=0;U[160]=U[10]=-1;Y[160]=Y[10]=0;_[160]=_[10]=1;j[160]=j[10]=-1;V[160]=V[10]=0;rr[160]=rr[10]=0;hr[160]=hr[10]=1;vr[160]=vr[10]=0;cr[160]=cr[10]=0;or[160]=or[10]=1;sr[160]=sr[10]=0;fr[160]=fr[10]=1;ar[130]=ar[40]=0;ir[130]=ir[40]=1;ur[130]=ur[40]=1;er[130]=er[40]=0;tr[130]=tr[40]=1;nr[130]=nr[40]=0;H[130]=H[40]=0;X[130]=X[40]=-1;K[130]=K[40]=0;Z[130]=Z[40]=0;b[130]=b[40]=-1;Q[130]=Q[40]=1;j[37]=j[133]=0;V[37]=V[133]=1;rr[37]=rr[133]=1;hr[37]=hr[133]=0;vr[37]=vr[133]=1;cr[37]=cr[133]=0;H[37]=H[133]=-1;X[37]=X[133]=0;K[37]=K[133]=0;Z[37]=Z[133]=1;b[37]=b[133]=0;Q[37]=Q[133]=0;ar[148]=ar[22]=-1;ir[148]=ir[22]=0;ur[148]=ur[22]=0;hr[148]=hr[22]=0;vr[148]=vr[22]=-1;cr[148]=cr[22]=1;or[148]=or[22]=0;sr[148]=sr[22]=1;fr[148]=fr[22]=1;Z[148]=Z[22]=-1;b[148]=b[22]=0;Q[148]=Q[22]=1;U[82]=U[88]=0;Y[82]=Y[88]=-1;_[82]=_[88]=1;ar[82]=ar[88]=1;ir[82]=ir[88]=0;ur[82]=ur[88]=1;er[82]=er[88]=-1;tr[82]=tr[88]=0;nr[82]=nr[88]=1;or[82]=or[88]=0;sr[82]=sr[88]=-1;fr[82]=fr[88]=0;U[73]=U[97]=0;Y[73]=Y[97]=1;_[73]=_[97]=0;j[73]=j[97]=0;V[73]=V[97]=-1;rr[73]=rr[97]=0;er[73]=er[97]=1;tr[73]=tr[97]=0;nr[73]=nr[97]=0;H[73]=H[97]=1;X[73]=X[97]=0;K[73]=K[97]=1;U[145]=U[25]=0;Y[145]=Y[25]=-1;_[145]=_[25]=0;er[145]=er[25]=1;tr[145]=tr[25]=0;nr[145]=nr[25]=1;hr[145]=hr[25]=0;vr[145]=vr[25]=1;cr[145]=cr[25]=1;Z[145]=Z[25]=-1;b[145]=b[25]=0;Q[145]=Q[25]=0;j[70]=j[100]=0;V[70]=V[100]=1;rr[70]=rr[100]=0;ar[70]=ar[100]=-1;ir[70]=ir[100]=0;ur[70]=ur[100]=1;or[70]=or[100]=0;sr[70]=sr[100]=-1;fr[70]=fr[100]=1;H[70]=H[100]=1;X[70]=X[100]=0;K[70]=K[100]=0;j[101]=j[69]=0;V[101]=V[69]=1;rr[101]=rr[69]=0;H[101]=H[69]=1;X[101]=X[69]=0;K[101]=K[69]=0;hr[149]=hr[21]=0;vr[149]=vr[21]=1;cr[149]=cr[21]=1;Z[149]=Z[21]=-1;b[149]=b[21]=0;Q[149]=Q[21]=0;ar[86]=ar[84]=-1;ir[86]=ir[84]=0;ur[86]=ur[84]=1;or[86]=or[84]=0;sr[86]=sr[84]=-1;fr[86]=fr[84]=1;U[89]=U[81]=0;Y[89]=Y[81]=-1;_[89]=_[81]=0;er[89]=er[81]=1;tr[89]=tr[81]=0;nr[89]=nr[81]=1;U[96]=U[74]=0;Y[96]=Y[74]=1;_[96]=_[74]=0;j[96]=j[74]=-1;V[96]=V[74]=0;rr[96]=rr[74]=1;or[96]=or[74]=1;sr[96]=sr[74]=0;fr[96]=fr[74]=0;H[96]=H[74]=1;X[96]=X[74]=0;K[96]=K[74]=1;U[24]=U[146]=0;Y[24]=Y[146]=-1;_[24]=_[146]=1;ar[24]=ar[146]=1;ir[24]=ir[146]=0;ur[24]=ur[146]=1;er[24]=er[146]=0;tr[24]=tr[146]=1;nr[24]=nr[146]=1;Z[24]=Z[146]=0;b[24]=b[146]=-1;Q[24]=Q[146]=0;j[6]=j[164]=-1;V[6]=V[164]=0;rr[6]=rr[164]=1;ar[6]=ar[164]=-1;ir[6]=ir[164]=0;ur[6]=ur[164]=0;hr[6]=hr[164]=0;vr[6]=vr[164]=-1;cr[6]=cr[164]=1;or[6]=or[164]=1;sr[6]=sr[164]=0;fr[6]=fr[164]=0;er[129]=er[41]=0;tr[129]=tr[41]=1;nr[129]=nr[41]=1;hr[129]=hr[41]=0;vr[129]=vr[41]=1;cr[129]=cr[41]=0;H[129]=H[41]=-1;X[129]=X[41]=0;K[129]=K[41]=0;Z[129]=Z[41]=0;b[129]=b[41]=-1;Q[129]=Q[41]=0;ar[66]=ar[104]=0;ir[66]=ir[104]=1;ur[66]=ur[104]=0;er[66]=er[104]=-1;tr[66]=tr[104]=0;nr[66]=nr[104]=1;or[66]=or[104]=0;sr[66]=sr[104]=-1;fr[66]=fr[104]=0;H[66]=H[104]=0;X[66]=X[104]=-1;K[66]=K[104]=1;U[144]=U[26]=-1;Y[144]=Y[26]=0;_[144]=_[26]=0;hr[144]=hr[26]=1;vr[144]=vr[26]=0;cr[144]=cr[26]=1;or[144]=or[26]=0;sr[144]=sr[26]=1;fr[144]=fr[26]=1;Z[144]=Z[26]=-1;b[144]=b[26]=0;Q[144]=Q[26]=1;j[36]=j[134]=0;V[36]=V[134]=1;rr[36]=rr[134]=1;ar[36]=ar[134]=0;ir[36]=ir[134]=1;ur[36]=ur[134]=0;H[36]=H[134]=0;X[36]=X[134]=-1;K[36]=K[134]=1;Z[36]=Z[134]=1;b[36]=b[134]=0;Q[36]=Q[134]=0;U[9]=U[161]=-1;Y[9]=Y[161]=0;_[9]=_[161]=0;j[9]=j[161]=0;V[9]=V[161]=-1;rr[9]=rr[161]=0;er[9]=er[161]=1;tr[9]=tr[161]=0;nr[9]=nr[161]=0;hr[9]=hr[161]=1;vr[9]=vr[161]=0;cr[9]=cr[161]=1;U[136]=0;Y[136]=1;_[136]=1;j[136]=0;V[136]=1;rr[136]=0;ar[136]=-1;ir[136]=0;ur[136]=1;er[136]=-1;tr[136]=0;nr[136]=0;hr[136]=0;vr[136]=-1;cr[136]=0;or[136]=0;sr[136]=-1;fr[136]=1;H[136]=1;X[136]=0;K[136]=0;Z[136]=1;b[136]=0;Q[136]=1;U[34]=0;Y[34]=-1;_[34]=0;j[34]=0;V[34]=-1;rr[34]=1;ar[34]=1;ir[34]=0;ur[34]=0;er[34]=1;tr[34]=0;nr[34]=1;hr[34]=0;vr[34]=1;cr[34]=1;or[34]=0;sr[34]=1;fr[34]=0;H[34]=-1;X[34]=0;K[34]=1;Z[34]=-1;b[34]=0;Q[34]=0;U[35]=0;Y[35]=1;_[35]=1;j[35]=0;V[35]=-1;rr[35]=1;ar[35]=1;ir[35]=0;ur[35]=0;er[35]=-1;tr[35]=0;nr[35]=0;hr[35]=0;vr[35]=-1;cr[35]=0;or[35]=0;sr[35]=1;fr[35]=0;H[35]=-1;X[35]=0;K[35]=1;Z[35]=1;b[35]=0;Q[35]=1;U[153]=0;Y[153]=1;_[153]=1;er[153]=-1;tr[153]=0;nr[153]=0;hr[153]=0;vr[153]=-1;cr[153]=0;Z[153]=1;b[153]=0;Q[153]=1;j[102]=0;V[102]=-1;rr[102]=1;ar[102]=1;ir[102]=0;ur[102]=0;or[102]=0;sr[102]=1;fr[102]=0;H[102]=-1;X[102]=0;K[102]=1;U[155]=0;Y[155]=-1;_[155]=0;er[155]=1;tr[155]=0;nr[155]=1;hr[155]=0;vr[155]=1;cr[155]=1;Z[155]=-1;b[155]=0;Q[155]=0;j[103]=0;V[103]=1;rr[103]=0;ar[103]=-1;ir[103]=0;ur[103]=1;or[103]=0;sr[103]=-1;fr[103]=1;H[103]=1;X[103]=0;K[103]=0;U[152]=0;Y[152]=1;_[152]=1;ar[152]=-1;ir[152]=0;ur[152]=1;er[152]=-1;tr[152]=0;nr[152]=0;hr[152]=0;vr[152]=-1;cr[152]=0;or[152]=0;sr[152]=-1;fr[152]=1;Z[152]=1;b[152]=0;Q[152]=1;U[156]=0;Y[156]=-1;_[156]=1;ar[156]=1;ir[156]=0;ur[156]=1;er[156]=-1;tr[156]=0;nr[156]=0;hr[156]=0;vr[156]=-1;cr[156]=0;or[156]=0;sr[156]=1;fr[156]=1;Z[156]=-1;b[156]=0;Q[156]=1;U[137]=0;Y[137]=1;_[137]=1;j[137]=0;V[137]=1;rr[137]=0;er[137]=-1;tr[137]=0;nr[137]=0;hr[137]=0;vr[137]=-1;cr[137]=0;H[137]=1;X[137]=0;K[137]=0;Z[137]=1;b[137]=0;Q[137]=1;U[139]=0;Y[139]=1;_[139]=1;j[139]=0;V[139]=-1;rr[139]=0;er[139]=1;tr[139]=0;nr[139]=0;hr[139]=0;vr[139]=1;cr[139]=0;H[139]=-1;X[139]=0;K[139]=0;Z[139]=1;b[139]=0;Q[139]=1;U[98]=0;Y[98]=-1;_[98]=0;j[98]=0;V[98]=-1;rr[98]=1;ar[98]=1;ir[98]=0;ur[98]=0;er[98]=1;tr[98]=0;nr[98]=1;or[98]=0;sr[98]=1;fr[98]=0;H[98]=-1;X[98]=0;K[98]=1;U[99]=0;Y[99]=1;_[99]=0;j[99]=0;V[99]=-1;rr[99]=1;ar[99]=1;ir[99]=0;ur[99]=0;er[99]=-1;tr[99]=0;nr[99]=1;or[99]=0;sr[99]=-1;fr[99]=0;H[99]=1;X[99]=0;K[99]=1;j[38]=0;V[38]=-1;rr[38]=1;ar[38]=1;ir[38]=0;ur[38]=0;hr[38]=0;vr[38]=1;cr[38]=1;or[38]=0;sr[38]=1;fr[38]=0;H[38]=-1;X[38]=0;K[38]=1;Z[38]=-1;b[38]=0;Q[38]=0;j[39]=0;V[39]=1;rr[39]=1;ar[39]=-1;ir[39]=0;ur[39]=0;hr[39]=0;vr[39]=-1;cr[39]=1;or[39]=0;sr[39]=1;fr[39]=0;H[39]=-1;X[39]=0;K[39]=1;Z[39]=1;b[39]=0;Q[39]=0;var zt=function(r){return[[r.bottomleft,0],[0,0],[0,r.leftbottom]]},Gt=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0]]},Dt=function(r){return[[r.topright,1],[1,1],[1,r.righttop]]},$t=function(r){return[[0,r.lefttop],[0,1],[r.topleft,1]]},Wt=function(r){return[[r.bottomright,0],[r.bottomleft,0],[0,r.leftbottom],[0,r.lefttop]]},Jt=function(r){return[[r.bottomright,0],[r.bottomleft,0],[1,r.righttop],[1,r.rightbottom]]},Ht=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.topleft,1],[r.topright,1]]},Xt=function(r){return[[0,r.leftbottom],[0,r.lefttop],[r.topleft,1],[r.topright,1]]},Ao=function(r){return[[0,0],[0,r.leftbottom],[1,r.rightbottom],[1,0]]},ko=function(r){return[[1,0],[r.bottomright,0],[r.topright,1],[1,1]]},Oo=function(r){return[[1,1],[1,r.righttop],[0,r.lefttop],[0,1]]},qo=function(r){return[[r.bottomleft,0],[0,0],[0,1],[r.topleft,1]]},Bo=function(r){return[[1,r.righttop],[1,r.rightbottom],[0,r.leftbottom],[0,r.lefttop]]},Fo=function(r){return[[r.topleft,1],[r.topright,1],[r.bottomright,0],[r.bottomleft,0]]},No=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ro=function(r){return[[1,r.rightbottom],[1,0],[0,0],[0,1],[r.topleft,1]]},xo=function(r){return[[r.topright,1],[1,1],[1,0],[0,0],[0,r.leftbottom]]},Io=function(r){return[[1,0],[r.bottomright,0],[0,r.lefttop],[0,1],[1,1]]},To=function(r){return[[1,1],[1,r.righttop],[r.bottomleft,0],[0,0],[0,1]]},zo=function(r){return[[1,r.righttop],[1,r.rightbottom],[0,r.lefttop],[0,1],[r.topleft,1]]},Go=function(r){return[[1,1],[1,r.righttop],[r.bottomright,0],[r.bottomleft,0],[r.topright,1]]},Do=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.leftbottom],[0,r.lefttop]]},$o=function(r){return[[r.topright,1],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topleft,1]]},Wo=function(r){return[[r.bottomright,0],[r.bottomleft,0],[0,r.lefttop],[0,1],[r.topleft,1]]},Jo=function(r){return[[1,1],[1,r.righttop],[0,r.leftbottom],[0,r.lefttop],[r.topright,1]]},Ho=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[r.topleft,1],[r.topright,1]]},Xo=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomleft,0],[0,0],[0,r.leftbottom]]},Ko=function(r){return[[1,r.rightbottom],[1,0],[0,0],[0,r.leftbottom],[r.topleft,1],[r.topright,1]]},Zo=function(r){return[[1,1],[1,0],[r.bottomright,0],[0,r.leftbottom],[0,r.lefttop],[r.topright,1]]},bo=function(r){return[[1,1],[1,r.righttop],[r.bottomright,0],[r.bottomleft,0],[0,r.lefttop],[0,1]]},Qo=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomleft,0],[0,0],[0,1],[r.topleft,1]]},Uo=function(r){return[[1,1],[1,r.righttop],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topright,1]]},Yo=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.lefttop],[0,1],[r.topleft,1]]},_o=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomright,0],[r.bottomleft,0],[0,r.leftbottom],[0,r.lefttop],[r.topleft,1],[r.topright,1]]},jo=function(r){return[[1,1],[1,r.righttop],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topright,1]]},Vo=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.lefttop],[0,1],[r.topleft,1]]},rs=function(r){return[[1,1],[1,r.righttop],[r.bottomright,0],[r.bottomleft,0],[0,r.leftbottom],[0,r.lefttop],[r.topright,1]]},es=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomleft,0],[0,0],[0,r.leftbottom],[r.topleft,1],[r.topright,1]]},ts=function(r){return[[1,r.righttop],[1,r.rightbottom],[r.bottomright,0],[r.bottomleft,0],[0,r.lefttop],[0,1],[r.topleft,1]]},ns=function(r){return[[1,r.rightbottom],[1,0],[r.bottomright,0],[0,r.leftbottom],[0,r.lefttop],[r.topleft,1],[r.topright,1]]},N=[],F=[],x=[],R=[],z=[],I=[],dr=[],lr=[];R[1]=z[1]=18;R[169]=z[169]=18;x[4]=F[4]=12;x[166]=F[166]=12;N[16]=lr[16]=4;N[154]=lr[154]=4;I[64]=dr[64]=22;I[106]=dr[106]=22;x[2]=I[2]=17;R[2]=z[2]=18;x[168]=I[168]=17;R[168]=z[168]=18;N[8]=R[8]=9;F[8]=x[8]=12;N[162]=R[162]=9;F[162]=x[162]=12;N[32]=lr[32]=4;F[32]=dr[32]=1;N[138]=lr[138]=4;F[138]=dr[138]=1;z[128]=lr[128]=21;I[128]=dr[128]=22;z[42]=lr[42]=21;I[42]=dr[42]=22;F[5]=z[5]=14;F[165]=z[165]=14;x[20]=lr[20]=6;x[150]=lr[150]=6;N[80]=I[80]=11;N[90]=I[90]=11;R[65]=dr[65]=3;R[105]=dr[105]=3;N[160]=I[160]=11;F[160]=z[160]=14;N[10]=I[10]=11;F[10]=z[10]=14;x[130]=lr[130]=6;R[130]=dr[130]=3;x[40]=lr[40]=6;R[40]=dr[40]=3;F[101]=dr[101]=1;F[69]=dr[69]=1;z[149]=lr[149]=21;z[21]=lr[21]=21;x[86]=I[86]=17;x[84]=I[84]=17;N[89]=R[89]=9;N[81]=R[81]=9;N[96]=dr[96]=0;F[96]=I[96]=15;N[74]=dr[74]=0;F[74]=I[74]=15;N[24]=x[24]=8;R[24]=lr[24]=7;N[146]=x[146]=8;R[146]=lr[146]=7;F[6]=I[6]=15;x[6]=z[6]=16;F[164]=I[164]=15;x[164]=z[164]=16;R[129]=lr[129]=7;z[129]=dr[129]=20;R[41]=lr[41]=7;z[41]=dr[41]=20;x[66]=dr[66]=2;R[66]=I[66]=19;x[104]=dr[104]=2;R[104]=I[104]=19;N[144]=z[144]=10;I[144]=lr[144]=23;N[26]=z[26]=10;I[26]=lr[26]=23;F[36]=lr[36]=5;x[36]=dr[36]=2;F[134]=lr[134]=5;x[134]=dr[134]=2;N[9]=z[9]=10;F[9]=R[9]=13;N[161]=z[161]=10;F[161]=R[161]=13;F[37]=lr[37]=5;z[37]=dr[37]=20;F[133]=lr[133]=5;z[133]=dr[133]=20;x[148]=z[148]=16;I[148]=lr[148]=23;x[22]=z[22]=16;I[22]=lr[22]=23;N[82]=x[82]=8;R[82]=I[82]=19;N[88]=x[88]=8;R[88]=I[88]=19;N[73]=dr[73]=0;F[73]=R[73]=13;N[97]=dr[97]=0;F[97]=R[97]=13;N[145]=R[145]=9;z[145]=lr[145]=21;N[25]=R[25]=9;z[25]=lr[25]=21;F[70]=dr[70]=1;x[70]=I[70]=17;F[100]=dr[100]=1;x[100]=I[100]=17;N[34]=R[34]=9;F[34]=x[34]=12;z[34]=lr[34]=21;I[34]=dr[34]=22;N[136]=lr[136]=4;F[136]=dr[136]=1;x[136]=I[136]=17;R[136]=z[136]=18;N[35]=lr[35]=4;F[35]=x[35]=12;R[35]=z[35]=18;I[35]=dr[35]=22;N[153]=lr[153]=4;R[153]=z[153]=18;F[102]=x[102]=12;I[102]=dr[102]=22;N[155]=R[155]=9;z[155]=lr[155]=23;F[103]=dr[103]=1;x[103]=I[103]=17;N[152]=lr[152]=4;x[152]=I[152]=17;R[152]=z[152]=18;N[156]=x[156]=8;R[156]=z[156]=18;I[156]=lr[156]=23;N[137]=lr[137]=4;F[137]=dr[137]=1;R[137]=z[137]=18;N[139]=lr[139]=4;F[139]=R[139]=13;z[139]=dr[139]=20;N[98]=R[98]=9;F[98]=x[98]=12;I[98]=dr[98]=22;N[99]=dr[99]=0;F[99]=x[99]=12;R[99]=I[99]=19;F[38]=x[38]=12;z[38]=lr[38]=21;I[38]=dr[38]=22;F[39]=lr[39]=5;x[39]=z[39]=16;I[39]=dr[39]=22;var B=[];B[1]=B[169]=zt;B[4]=B[166]=Gt;B[16]=B[154]=Dt;B[64]=B[106]=$t;B[168]=B[2]=Wt;B[162]=B[8]=Jt;B[138]=B[32]=Ht;B[42]=B[128]=Xt;B[5]=B[165]=Ao;B[20]=B[150]=ko;B[80]=B[90]=Oo;B[65]=B[105]=qo;B[160]=B[10]=Bo;B[130]=B[40]=Fo;B[85]=No;B[101]=B[69]=Ro;B[149]=B[21]=xo;B[86]=B[84]=Io;B[89]=B[81]=To;B[96]=B[74]=zo;B[24]=B[146]=Go;B[6]=B[164]=Do;B[129]=B[41]=$o;B[66]=B[104]=Wo;B[144]=B[26]=Jo;B[36]=B[134]=Ho;B[9]=B[161]=Xo;B[37]=B[133]=Ko;B[148]=B[22]=Zo;B[82]=B[88]=bo;B[73]=B[97]=Qo;B[145]=B[25]=Uo;B[70]=B[100]=Yo;B[34]=function(r){return[Xt(r),Jt(r)]};B[35]=_o;B[136]=function(r){return[Ht(r),Wt(r)]};B[153]=function(r){return[Dt(r),zt(r)]};B[102]=function(r){return[Gt(r),$t(r)]};B[155]=jo;B[103]=Vo;B[152]=function(r){return[Dt(r),Wt(r)]};B[156]=rs;B[137]=function(r){return[Ht(r),zt(r)]};B[139]=es;B[98]=function(r){return[Jt(r),$t(r)]};B[99]=ts;B[38]=function(r){return[Gt(r),Xt(r)]};B[39]=ns;function l(r,e,t){return(r-e)/(t-e)}function ft(r){return r.constructor.toString().indexOf("Array")>-1}function as(r,e,t){for(var n=r.length-1,a=r[0].length-1,i={rows:n,cols:a,cells:[]},u=e+Math.abs(t),f=0;f<n;++f){i.cells[f]=[];for(var s=0;s<a;++s){var o=0,h=r[f+1][s],v=r[f+1][s+1],c=r[f][s+1],d=r[f][s];if(!(isNaN(h)||isNaN(v)||isNaN(c)||isNaN(d))){o|=h<e?0:h>u?128:64,o|=v<e?0:v>u?32:16,o|=c<e?0:c>u?8:4,o|=d<e?0:d>u?2:1;var E=+o,g=0;if(o===17||o===18||o===33||o===34||o===38||o===68||o===72||o===98||o===102||o===132||o===136||o===137||o===152||o===153){var P=(h+v+c+d)/4;g=P>u?2:P<e?0:1,o===34?g===1?o=35:g===0&&(o=136):o===136?g===1?(o=35,g=4):g===0&&(o=34):o===17?g===1?(o=155,g=4):g===0&&(o=153):o===68?g===1?(o=103,g=4):g===0&&(o=102):o===153?g===1&&(o=155):o===102?g===1&&(o=103):o===152?g<2&&(o=156,g=1):o===137?g<2&&(o=139,g=1):o===98?g<2&&(o=99,g=1):o===38?g<2&&(o=39,g=1):o===18?g>0?(o=156,g=4):o=152:o===33?g>0?(o=139,g=4):o=137:o===72?g>0?(o=99,g=4):o=98:o===132&&(g>0?(o=39,g=4):o=38)}if(o!=0&&o!=170){var m,p,w,L,M,q,S,k;m=p=w=L=M=q=S=k=.5;var y=[];o===1?(w=1-l(e,c,d),k=1-l(e,h,d),y.push(R[o])):o===169?(w=l(u,d,c),k=l(u,d,h),y.push(R[o])):o===4?(q=1-l(e,v,c),L=l(e,d,c),y.push(F[o])):o===166?(q=l(u,c,v),L=1-l(u,c,d),y.push(F[o])):o===16?(M=l(e,c,v),p=l(e,h,v),y.push(N[o])):o===154?(M=1-l(u,v,c),p=1-l(u,v,h),y.push(N[o])):o===64?(S=l(e,d,h),m=1-l(e,v,h),y.push(I[o])):o===106?(S=1-l(u,h,d),m=l(u,h,v),y.push(I[o])):o===168?(L=l(u,d,c),w=l(e,d,c),k=l(e,d,h),S=l(u,d,h),y.push(x[o]),y.push(R[o])):o===2?(L=1-l(e,c,d),w=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),y.push(x[o]),y.push(R[o])):o===162?(M=l(u,c,v),q=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),y.push(x[o]),y.push(R[o])):o===8?(M=1-l(e,v,c),q=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),y.push(N[o]),y.push(F[o])):o===138?(M=1-l(e,v,c),q=1-l(u,v,c),m=1-l(u,v,h),p=1-l(e,v,h),y.push(N[o]),y.push(F[o])):o===32?(M=l(u,c,v),q=l(e,c,v),m=l(e,h,v),p=l(u,h,v),y.push(N[o]),y.push(F[o])):o===42?(k=1-l(u,h,d),S=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v),y.push(z[o]),y.push(I[o])):o===128&&(k=l(e,d,h),S=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h),y.push(z[o]),y.push(I[o])),o===5?(q=1-l(e,v,c),k=1-l(e,h,d),y.push(F[o])):o===165?(q=l(u,c,v),k=l(u,d,h),y.push(F[o])):o===20?(L=l(e,d,c),p=l(e,h,v),y.push(x[o])):o===150?(L=1-l(u,c,d),p=1-l(u,v,h),y.push(x[o])):o===80?(M=l(e,c,v),S=l(e,d,h),y.push(N[o])):o===90?(M=1-l(u,v,c),S=1-l(u,h,d),y.push(N[o])):o===65?(w=1-l(e,c,d),m=1-l(e,v,h),y.push(R[o])):o===105?(w=l(u,d,c),m=l(u,h,v),y.push(R[o])):o===160?(M=l(u,c,v),q=l(e,c,v),k=l(e,d,h),S=l(u,d,h),y.push(N[o]),y.push(F[o])):o===10?(M=1-l(e,v,c),q=1-l(u,v,c),k=1-l(u,h,d),S=1-l(e,h,d),y.push(N[o]),y.push(F[o])):o===130?(L=1-l(e,c,d),w=1-l(u,c,d),m=1-l(u,v,h),p=1-l(e,v,h),y.push(x[o]),y.push(R[o])):o===40?(L=l(u,d,c),w=l(e,d,c),m=l(e,h,v),p=l(u,h,v),y.push(x[o]),y.push(R[o])):o===101?(q=l(u,c,v),m=l(u,h,v),y.push(F[o])):o===69?(q=1-l(e,v,c),m=1-l(e,v,h),y.push(F[o])):o===149?(k=l(u,d,h),p=1-l(u,v,h),y.push(z[o])):o===21?(k=1-l(e,h,d),p=l(e,h,v),y.push(z[o])):o===86?(L=1-l(u,c,d),S=1-l(u,h,d),y.push(x[o])):o===84?(L=l(e,d,c),S=l(e,d,h),y.push(x[o])):o===89?(M=1-l(u,v,c),w=l(u,d,c),y.push(R[o])):o===81?(M=l(e,c,v),w=1-l(e,c,d),y.push(R[o])):o===96?(M=l(u,c,v),q=l(e,c,v),S=l(e,d,h),m=l(u,h,v),y.push(N[o]),y.push(F[o])):o===74?(M=1-l(e,v,c),q=1-l(u,v,c),S=1-l(u,h,d),m=1-l(e,v,h),y.push(N[o]),y.push(F[o])):o===24?(M=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),p=l(e,h,v),y.push(N[o]),y.push(R[o])):o===146?(M=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),p=1-l(u,v,h),y.push(N[o]),y.push(R[o])):o===6?(q=1-l(e,v,c),L=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),y.push(F[o]),y.push(x[o])):o===164?(q=l(u,c,v),L=l(e,d,c),k=l(e,d,h),S=l(u,d,h),y.push(F[o]),y.push(x[o])):o===129?(w=1-l(e,c,d),k=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h),y.push(R[o]),y.push(z[o])):o===41?(w=l(u,d,c),k=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v),y.push(R[o]),y.push(z[o])):o===66?(L=1-l(e,c,d),w=1-l(u,c,d),S=1-l(u,h,d),m=1-l(e,v,h),y.push(x[o]),y.push(R[o])):o===104?(L=l(u,d,c),w=l(e,d,c),S=l(e,d,h),m=l(u,h,v),y.push(R[o]),y.push(dr[o])):o===144?(M=l(e,c,v),k=l(e,d,h),S=l(u,d,h),p=1-l(u,v,h),y.push(N[o]),y.push(I[o])):o===26?(M=1-l(u,v,c),k=1-l(u,h,d),S=1-l(e,h,d),p=l(e,h,v),y.push(N[o]),y.push(I[o])):o===36?(q=l(u,c,v),L=l(e,d,c),m=l(e,h,v),p=l(u,h,v),y.push(F[o]),y.push(x[o])):o===134?(q=1-l(e,v,c),L=1-l(u,c,d),m=1-l(u,v,h),p=1-l(e,v,h),y.push(F[o]),y.push(x[o])):o===9?(M=1-l(e,v,c),q=1-l(u,v,c),w=l(u,d,c),k=1-l(e,h,d),y.push(N[o]),y.push(F[o])):o===161?(M=l(u,c,v),q=l(e,c,v),w=1-l(e,c,d),k=l(u,d,h),y.push(N[o]),y.push(F[o])):o===37?(q=l(u,c,v),k=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v),y.push(F[o]),y.push(z[o])):o===133?(q=1-l(e,v,c),k=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h),y.push(F[o]),y.push(z[o])):o===148?(L=l(e,d,c),k=l(e,d,h),S=l(u,d,h),p=1-l(u,v,h),y.push(x[o]),y.push(I[o])):o===22?(L=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),p=l(e,h,v),y.push(x[o]),y.push(I[o])):o===82?(M=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),S=1-l(u,h,d),y.push(N[o]),y.push(R[o])):o===88?(M=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),S=l(e,d,h),y.push(N[o]),y.push(R[o])):o===73?(M=1-l(e,v,c),q=1-l(u,v,c),w=l(u,d,c),m=1-l(e,v,h),y.push(N[o]),y.push(F[o])):o===97?(M=l(u,c,v),q=l(e,c,v),w=1-l(e,c,d),m=l(u,h,v),y.push(N[o]),y.push(F[o])):o===145?(M=l(e,c,v),w=1-l(e,c,d),k=l(u,d,h),p=1-l(u,v,h),y.push(N[o]),y.push(z[o])):o===25?(M=1-l(u,v,c),w=l(u,d,c),k=1-l(e,h,d),p=l(e,h,v),y.push(N[o]),y.push(z[o])):o===70?(q=1-l(e,v,c),L=1-l(u,c,d),S=1-l(u,h,d),m=1-l(e,v,h),y.push(F[o]),y.push(x[o])):o===100?(q=l(u,c,v),L=l(e,d,c),S=l(e,d,h),m=l(u,h,v),y.push(F[o]),y.push(x[o])):o===34?(g===0?(M=1-l(e,v,c),q=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),k=l(e,d,h),S=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h)):(M=l(u,c,v),q=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v)),y.push(N[o]),y.push(F[o]),y.push(z[o]),y.push(I[o])):o===35?(g===4?(M=1-l(e,v,c),q=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),k=l(e,d,h),S=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h)):(M=l(u,c,v),q=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v)),y.push(N[o]),y.push(F[o]),y.push(R[o]),y.push(I[o])):o===136?(g===0?(M=l(u,c,v),q=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v)):(M=1-l(e,v,c),q=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),k=l(e,d,h),S=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h)),y.push(N[o]),y.push(F[o]),y.push(z[o]),y.push(I[o])):o===153?(g===0?(M=l(e,c,v),w=1-l(e,c,d),k=1-l(e,h,d),p=l(e,h,v)):(M=1-l(u,v,c),w=l(u,d,c),k=l(u,d,h),p=1-l(u,v,h)),y.push(N[o]),y.push(R[o])):o===102?(g===0?(q=1-l(e,v,c),L=l(e,d,c),S=l(e,d,h),m=1-l(e,v,h)):(q=l(u,c,v),L=1-l(u,c,d),S=1-l(u,h,d),m=l(u,h,v)),y.push(F[o]),y.push(I[o])):o===155?(g===4?(M=l(e,c,v),w=1-l(e,c,d),k=1-l(e,h,d),p=l(e,h,v)):(M=1-l(u,v,c),w=l(u,d,c),k=l(u,d,h),p=1-l(u,v,h)),y.push(N[o]),y.push(z[o])):o===103?(g===4?(q=1-l(e,v,c),L=l(e,d,c),S=l(e,d,h),m=1-l(e,v,h)):(q=l(u,c,v),L=1-l(u,c,d),S=1-l(u,h,d),m=l(u,h,v)),y.push(F[o]),y.push(x[o])):o===152?(g===0?(M=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),p=l(e,h,v)):(M=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),k=l(e,d,h),S=l(u,d,h),p=1-l(u,v,h)),y.push(N[o]),y.push(x[o]),y.push(R[o])):o===156?(g===4?(M=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),p=l(e,h,v)):(M=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),k=l(e,d,h),S=l(u,d,h),p=1-l(u,v,h)),y.push(N[o]),y.push(R[o]),y.push(I[o])):o===137?(g===0?(M=l(u,c,v),q=l(e,c,v),w=1-l(e,c,d),k=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v)):(M=1-l(e,v,c),q=1-l(u,v,c),w=l(u,d,c),k=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h)),y.push(N[o]),y.push(F[o]),y.push(R[o])):o===139?(g===4?(M=l(u,c,v),q=l(e,c,v),w=1-l(e,c,d),k=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v)):(M=1-l(e,v,c),q=1-l(u,v,c),w=l(u,d,c),k=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h)),y.push(N[o]),y.push(F[o]),y.push(z[o])):o===98?(g===0?(M=1-l(e,v,c),q=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),S=l(e,d,h),m=1-l(e,v,h)):(M=l(u,c,v),q=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),S=1-l(u,h,d),m=l(u,h,v)),y.push(N[o]),y.push(F[o]),y.push(I[o])):o===99?(g===4?(M=1-l(e,v,c),q=1-l(u,v,c),L=l(u,d,c),w=l(e,d,c),S=l(e,d,h),m=1-l(e,v,h)):(M=l(u,c,v),q=l(e,c,v),L=1-l(e,c,d),w=1-l(u,c,d),S=1-l(u,h,d),m=l(u,h,v)),y.push(N[o]),y.push(F[o]),y.push(R[o])):o===38?(g===0?(q=1-l(e,v,c),L=l(e,d,c),k=l(e,d,h),S=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h)):(q=l(u,c,v),L=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v)),y.push(F[o]),y.push(z[o]),y.push(I[o])):o===39?(g===4?(q=1-l(e,v,c),L=l(e,d,c),k=l(e,d,h),S=l(u,d,h),m=1-l(u,v,h),p=1-l(e,v,h)):(q=l(u,c,v),L=1-l(u,c,d),k=1-l(u,h,d),S=1-l(e,h,d),m=l(e,h,v),p=l(u,h,v)),y.push(F[o]),y.push(x[o]),y.push(I[o])):o===85&&(M=1,q=0,L=1,w=0,k=0,S=1,m=0,p=1),m<0||m>1||p<0||p>1||M<0||M>1||L<0||L>1||k<0||k>1||S<0||S>1,i.cells[f][s]={cval:o,cval_real:E,flipped:g,topleft:m,topright:p,righttop:M,rightbottom:q,bottomright:L,bottomleft:w,leftbottom:k,lefttop:S,edges:y}}}}}return i}function is(r){for(var e=[],t=r.rows,n=r.cols,a=[],i=0;i<t;i++)for(var u=0;u<n;u++)if(typeof r.cells[i][u]<"u"&&r.cells[i][u].edges.length>0){var f=r.cells[i][u],s=ss(f),o=null,h=u,v=i;s!==null&&a.push([s.p[0]+h,s.p[1]+v]);do{if(o=fs(r.cells[v][h],s.x,s.y,s.o),o!==null)a.push([o.p[0]+h,o.p[1]+v]),h+=o.x,v+=o.y,s=o;else break;if(v<0||v>=t||h<0||h>=n||typeof r.cells[v][h]>"u"){h-=o.x,v-=o.y;var c=us(r,h,v,o.x,o.y,o.o);if(c!==null)c.path.forEach(function(d){a.push(d)}),h=c.i,v=c.j,s=c;else break}}while(typeof r.cells[v][h]<"u"&&r.cells[v][h].edges.length>0);e.push(a),a=[],r.cells[i][u].edges.length>0&&u--}return e}function us(r,e,t,n,a,i){for(var u=r.cells[t][e],f=u.cval_real,s=e+n,o=t+a,h=[],v=!1;!v;){if(typeof r.cells[o]>"u"||typeof r.cells[o][s]>"u")if(o-=a,s-=n,u=r.cells[o][s],f=u.cval_real,a===-1)if(i===0)if(f&Gr)h.push([s,o]),n=-1,a=0,i=0;else if(f&Tr)h.push([s+1,o]),n=1,a=0,i=0;else{h.push([s+u.bottomright,o]),n=0,a=1,i=1,v=!0;break}else if(f&Gr)h.push([s,o]),n=-1,a=0,i=0;else if(f&Tr){h.push([s+u.bottomright,o]),n=0,a=1,i=1,v=!0;break}else{h.push([s+u.bottomleft,o]),n=0,a=1,i=0,v=!0;break}else if(a===1)if(i===0)if(f&Qr)h.push([s+1,o+1]),n=1,a=0,i=1;else if(f&Jr){h.push([s+u.topleft,o+1]),n=0,a=-1,i=0,v=!0;break}else{h.push([s+u.topright,o+1]),n=0,a=-1,i=1,v=!0;break}else f&Qr?(h.push([s+1,o+1]),n=1,a=0,i=1):(h.push([s+1,o+1]),n=1,a=0,i=1);else if(n===-1)if(i===0)if(f&Jr)h.push([s,o+1]),n=0,a=1,i=0;else if(f&Gr){h.push([s,o+u.leftbottom]),n=1,a=0,i=0,v=!0;break}else{h.push([s,o+u.lefttop]),n=1,a=0,i=1,v=!0;break}else if(f&Jr)h.push([s,o+1]),n=0,a=1,i=0;else break;else if(n===1)if(i===0)if(f&Tr)h.push([s+1,o]),n=0,a=-1,i=1;else{h.push([s+1,o+u.rightbottom]),n=-1,a=0,i=0,v=!0;break}else if(f&Tr)h.push([s+1,o]),n=0,a=-1,i=1;else if(f&Qr){h.push([s+1,o+u.righttop]),n=-1,a=0,i=1;break}else{h.push([s+1,o+u.rightbottom]),n=-1,a=0,i=0,v=!0;break}else break;else if(u=r.cells[o][s],f=u.cval_real,n===-1){if(i===0)if(typeof r.cells[o-1]<"u"&&typeof r.cells[o-1][s]<"u")n=0,a=-1,i=1;else if(f&Gr)h.push([s,o]);else{h.push([s+u.bottomright,o]),n=0,a=1,i=1,v=!0;break}else if(!(f&Jr))break}else if(n===1){if(i===0)break;if(typeof r.cells[o+1]<"u"&&typeof r.cells[o+1][s]<"u")n=0,a=1,i=0;else if(f&Qr)h.push([s+1,o+1]),n=1,a=0,i=1;else{h.push([s+u.topleft,o+1]),n=0,a=-1,i=0,v=!0;break}}else if(a===-1)if(i===1)if(typeof r.cells[o][s+1]<"u")n=1,a=0,i=1;else if(f&Tr)h.push([s+1,o]),n=0,a=-1,i=1;else{h.push([s+1,o+u.righttop]),n=-1,a=0,i=1,v=!0;break}else break;else if(a===1)if(i===0)if(typeof r.cells[o][s-1]<"u")n=-1,a=0,i=0;else if(f&Jr)h.push([s,o+1]),n=0,a=1,i=0;else{h.push([s,o+u.leftbottom]),n=1,a=0,i=0,v=!0;break}else break;else break;if(s+=n,o+=a,s===e&&o===t)break}return{path:h,i:s,j:o,x:n,y:a,o:i}}function os(r,e){delete r.edges[e];for(var t=e+1;t<r.edges.length;t++)r.edges[t-1]=r.edges[t];r.edges.pop()}function ss(r){if(r.edges.length>0){var e=r.edges[r.edges.length-1],t=r.cval_real;switch(e){case 0:return t&Qr?{p:[1,r.righttop],x:-1,y:0,o:1}:{p:[r.topleft,1],x:0,y:-1,o:0};case 1:return t&Tr?{p:[r.topleft,1],x:0,y:-1,o:0}:{p:[1,r.rightbottom],x:-1,y:0,o:0};case 2:return t&Tr?{p:[r.bottomright,0],x:0,y:1,o:1}:{p:[r.topleft,1],x:0,y:-1,o:0};case 3:return t&Gr?{p:[r.topleft,1],x:0,y:-1,o:0}:{p:[r.bottomleft,0],x:0,y:1,o:0};case 4:return t&Qr?{p:[1,r.righttop],x:-1,y:0,o:1}:{p:[r.topright,1],x:0,y:-1,o:1};case 5:return t&Tr?{p:[r.topright,1],x:0,y:-1,o:1}:{p:[1,r.rightbottom],x:-1,y:0,o:0};case 6:return t&Tr?{p:[r.bottomright,0],x:0,y:1,o:1}:{p:[r.topright,1],x:0,y:-1,o:1};case 7:return t&Gr?{p:[r.topright,1],x:0,y:-1,o:1}:{p:[r.bottomleft,0],x:0,y:1,o:0};case 8:return t&Tr?{p:[r.bottomright,0],x:0,y:1,o:1}:{p:[1,r.righttop],x:-1,y:0,o:1};case 9:return t&Gr?{p:[1,r.righttop],x:-1,y:0,o:1}:{p:[r.bottomleft,0],x:0,y:1,o:0};case 10:return t&Gr?{p:[0,r.leftbottom],x:1,y:0,o:0}:{p:[1,r.righttop],x:-1,y:0,o:1};case 11:return t&Jr?{p:[1,r.righttop],x:-1,y:0,o:1}:{p:[0,r.lefttop],x:1,y:0,o:1};case 12:return t&Tr?{p:[r.bottomright,0],x:0,y:1,o:1}:{p:[1,r.rightbottom],x:-1,y:0,o:0};case 13:return t&Gr?{p:[1,r.rightbottom],x:-1,y:0,o:0}:{p:[r.bottomleft,0],x:0,y:1,o:0};case 14:return t&Gr?{p:[0,r.leftbottom],x:1,y:0,o:0}:{p:[1,r.rightbottom],x:-1,y:0,o:0};case 15:return t&Jr?{p:[1,r.rightbottom],x:-1,y:0,o:0}:{p:[0,r.lefttop],x:1,y:0,o:1};case 16:return t&Tr?{p:[r.bottomright,0],x:0,y:1,o:1}:{p:[0,r.leftbottom],x:1,y:0,o:0};case 17:return t&Jr?{p:[r.bottomright,0],x:0,y:1,o:1}:{p:[0,r.lefttop],x:1,y:0,o:1};case 18:return t&Gr?{p:[0,r.leftbottom],x:1,y:0,o:0}:{p:[r.bottomleft,0],x:0,y:1,o:0};case 19:return t&Jr?{p:[r.bottomleft,0],x:0,y:1,o:0}:{p:[0,r.lefttop],x:1,y:0,o:1};case 20:return t&Jr?{p:[r.topleft,1],x:0,y:-1,o:0}:{p:[0,r.leftbottom],x:1,y:0,o:0};case 21:return t&Qr?{p:[0,r.leftbottom],x:1,y:0,o:0}:{p:[r.topright,1],x:0,y:-1,o:1};case 22:return t&Jr?{p:[r.topleft,1],x:0,y:-1,o:0}:{p:[0,r.lefttop],x:1,y:0,o:1};case 23:return t&Qr?{p:[0,r.lefttop],x:1,y:0,o:1}:{p:[r.topright,1],x:0,y:-1,o:1};default:break}}return null}function fs(r,e,t,n){var a,i,u,f,s=r.cval,o;switch(e){case-1:switch(n){case 0:a=F[s],u=j[s],f=V[s],o=rr[s];break;default:a=N[s],u=U[s],f=Y[s],o=_[s];break}break;case 1:switch(n){case 0:a=z[s],u=hr[s],f=vr[s],o=cr[s];break;default:a=I[s],u=or[s],f=sr[s],o=fr[s];break}break;default:switch(t){case-1:switch(n){case 0:a=dr[s],u=H[s],f=X[s],o=K[s];break;default:a=lr[s],u=Z[s],f=b[s],o=Q[s];break}break;case 1:switch(n){case 0:a=R[s],u=er[s],f=tr[s],o=nr[s];break;default:a=x[s],u=ar[s],f=ir[s],o=ur[s];break}break}break}if(i=r.edges.indexOf(a),typeof r.edges[i]<"u")os(r,i);else return null;switch(s=r.cval_real,a){case 0:s&Qr?(e=r.topleft,t=1):(e=1,t=r.righttop);break;case 1:s&Tr?(e=1,t=r.rightbottom):(e=r.topleft,t=1);break;case 2:s&Tr?(e=r.topleft,t=1):(e=r.bottomright,t=0);break;case 3:s&Gr?(e=r.bottomleft,t=0):(e=r.topleft,t=1);break;case 4:s&Qr?(e=r.topright,t=1):(e=1,t=r.righttop);break;case 5:s&Tr?(e=1,t=r.rightbottom):(e=r.topright,t=1);break;case 6:s&Tr?(e=r.topright,t=1):(e=r.bottomright,t=0);break;case 7:s&Gr?(e=r.bottomleft,t=0):(e=r.topright,t=1);break;case 8:s&Tr?(e=1,t=r.righttop):(e=r.bottomright,t=0);break;case 9:s&Gr?(e=r.bottomleft,t=0):(e=1,t=r.righttop);break;case 10:s&Gr?(e=1,t=r.righttop):(e=0,t=r.leftbottom);break;case 11:s&Jr?(e=0,t=r.lefttop):(e=1,t=r.righttop);break;case 12:s&Tr?(e=1,t=r.rightbottom):(e=r.bottomright,t=0);break;case 13:s&Gr?(e=r.bottomleft,t=0):(e=1,t=r.rightbottom);break;case 14:s&Gr?(e=1,t=r.rightbottom):(e=0,t=r.leftbottom);break;case 15:s&Jr?(e=0,t=r.lefttop):(e=1,t=r.rightbottom);break;case 16:s&Tr?(e=0,t=r.leftbottom):(e=r.bottomright,t=0);break;case 17:s&Jr?(e=0,t=r.lefttop):(e=r.bottomright,t=0);break;case 18:s&Gr?(e=r.bottomleft,t=0):(e=0,t=r.leftbottom);break;case 19:s&Jr?(e=0,t=r.lefttop):(e=r.bottomleft,t=0);break;case 20:s&Jr?(e=0,t=r.leftbottom):(e=r.topleft,t=1);break;case 21:s&Qr?(e=r.topright,t=1):(e=0,t=r.leftbottom);break;case 22:s&Jr?(e=0,t=r.lefttop):(e=r.topleft,t=1);break;case 23:s&Qr?(e=r.topright,t=1):(e=0,t=r.lefttop);break;default:return null}return{p:[e,t],x:u,y:f,o}}function hs(r){var e=[],t=0;return r.cells.forEach(function(n,a){n.forEach(function(i,u){if(typeof i<"u"){var f=B[i.cval](i);typeof f=="object"&&ft(f)&&typeof f[0]=="object"&&ft(f[0])&&(typeof f[0][0]=="object"&&ft(f[0][0])?f.forEach(function(s){s.forEach(function(o){o[0]+=u,o[1]+=a}),e[t++]=s}):(f.forEach(function(s){s[0]+=u,s[1]+=a}),e[t++]=f))}})}),e}function vs(r,e,t){if(t=t||{},!wr(t))throw new Error("options is invalid");var n=t.zProperty||"elevation",a=t.commonProperties||{},i=t.breaksProperties||[];if(ie(r,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!wr(a))throw new Error("commonProperties is not an Object");if(!Array.isArray(i))throw new Error("breaksProperties is not an Array");var u=Lo(r,{zProperty:n,flip:!0}),f=cs(u,e,n);f=ds(f,u,r);var s=f.map(function(o,h){if(i[h]&&!wr(i[h]))throw new Error("Each mappedProperty is required to be an Object");var v=mt({},a,i[h]);v[n]=o[n];var c=Zr(o.groupedRings,v);return c});return T(s)}function cs(r,e,t){for(var n=[],a=1;a<e.length;a++){var i=+e[a-1],u=+e[a],f=Co(r,i,u-i),s=ls(f),o=ps(s),h={};h.groupedRings=o,h[t]=i+"-"+u,n.push(h)}return n}function ds(r,e,t){var n=Ar(t),a=n[2]-n[0],i=n[3]-n[1],u=n[0],f=n[1],s=e[0].length-1,o=e.length-1,h=a/s,v=i/o,c=function(d){d[0]=d[0]*h+u,d[1]=d[1]*v+f};return r.forEach(function(d){d.groupedRings.forEach(function(E){E.forEach(function(g){g.forEach(c)})})}),r}function ls(r){var e=[],t=[];r.forEach(function(a){var i=xt(J([a]));t.push(i),e.push({ring:a,area:i})}),t.sort(function(a,i){return i-a});var n=[];return t.forEach(function(a){for(var i=0;i<e.length;i++)if(e[i].area===a){n.push(e[i].ring),e.splice(i,1);break}}),n}function ps(r){for(var e=r.map(function(s){return{lrCoordinates:s,grouped:!1}}),t=[];!gs(e);)for(var n=0;n<e.length;n++)if(!e[n].grouped){var a=[];a.push(e[n].lrCoordinates),e[n].grouped=!0;for(var i=J([e[n].lrCoordinates]),u=n+1;u<e.length;u++)if(!e[u].grouped){var f=J([e[u].lrCoordinates]);ys(f,i)&&(a.push(e[u].lrCoordinates),e[u].grouped=!0)}t.push(a)}return t}function ys(r,e){for(var t=Ye(r),n=0;n<t.features.length;n++)if(!Pr(t.features[n],e))return!1;return!0}function gs(r){for(var e=0;e<r.length;e++)if(r[e].grouped===!1)return!1;return!0}function Ga(r,e,t){if(t=t||{},!wr(t))throw new Error("options is invalid");var n=t.pivot,a=t.mutate;if(!r)throw new Error("geojson is required");if(e==null||isNaN(e))throw new Error("angle is required");return e===0||(n||(n=se(r)),(a===!1||a===void 0)&&(r=Dr(r)),Cr(r,function(i){var u=ye(n,i),f=u+e,s=je(n,i),o=G(Me(n,s,f));i[0]=o[0],i[1]=o[1]})),r}function Da(r,e,t){if(t=t||{},!wr(t))throw new Error("options is invalid");var n=t.origin,a=t.mutate;if(!r)throw new Error("geojson required");if(typeof e!="number"||e===0)throw new Error("invalid factor");var i=Array.isArray(n)||typeof n=="object";return a!==!0&&(r=Dr(r)),r.type==="FeatureCollection"&&!i?(pr(r,function(u,f){r.features[f]=Fn(u,e,n)}),r):Fn(r,e,n)}function Fn(r,e,t){var n=Xr(r)==="Point";return t=ws(r,t),e===1||n||Cr(r,function(a){var i=je(t,a),u=ye(t,a),f=i*e,s=G(Me(t,f,u));a[0]=s[0],a[1]=s[1],a.length===3&&(a[2]*=e)}),r}function ws(r,e){if(e==null&&(e="centroid"),Array.isArray(e)||typeof e=="object")return Er(e);var t=r.bbox?r.bbox:Ar(r),n=t[0],a=t[1],i=t[2],u=t[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return W([n,a]);case"se":case"southeast":case"eastsouth":case"bottomright":return W([i,a]);case"nw":case"northwest":case"westnorth":case"topleft":return W([n,u]);case"ne":case"northeast":case"eastnorth":case"topright":return W([i,u]);case"center":return Ue(r);case void 0:case null:case"centroid":return se(r);default:throw new Error("invalid origin")}}function ms(r,e,t,n){if(n=n||{},!wr(n))throw new Error("options is invalid");var a=n.units,i=n.zTranslation,u=n.mutate;if(!r)throw new Error("geojson is required");if(e==null||isNaN(e))throw new Error("distance is required");if(i&&typeof i!="number"&&isNaN(i))throw new Error("zTranslation is not a number");if(i=i!==void 0?i:0,e===0&&i===0)return r;if(t==null||isNaN(t))throw new Error("direction is required");return e<0&&(e=-e,t=t+180),(u===!1||u===void 0)&&(r=Dr(r)),Cr(r,function(f){var s=G(Me(f,e,t,{units:a}));f[0]=s[0],f[1]=s[1],i&&f.length===3&&(f[2]+=i)}),r}function Ze(r){var e=r[0],t=r[1];return[t[0]-e[0],t[1]-e[1]]}function wt(r,e){return r[0]*e[1]-e[0]*r[1]}function Es(r,e){return[r[0]+e[0],r[1]+e[1]]}function Ms(r,e){return[r[0]-e[0],r[1]-e[1]]}function Ps(r,e){return[r*e[0],r*e[1]]}function Ls(r,e){var t=r[0],n=Ze(r),a=e[0],i=Ze(e),u=wt(n,i),f=Ms(a,t),s=wt(f,i),o=s/u,h=Es(t,Ps(o,n));return h}function Ss(r,e){var t=Ze(r),n=Ze(e);return wt(t,n)===0}function Cs(r,e){return Ss(r,e)?!1:Ls(r,e)}function As(r,e,t){if(t=t||{},!wr(t))throw new Error("options is invalid");var n=t.units;if(!r)throw new Error("geojson is required");if(e==null||isNaN(e))throw new Error("distance is required");var a=Xr(r),i=r.properties;switch(a){case"LineString":return Nn(r,e,n);case"MultiLineString":var u=[];return zr(r,function(f){u.push(Nn(f,e,n).geometry.coordinates)}),fe(u,i);default:throw new Error("geometry "+a+" is not supported")}}function Nn(r,e,t){var n=[],a=He(e,t),i=G(r),u=[];return i.forEach(function(f,s){if(s!==i.length-1){var o=ks(f,i[s+1],a);if(n.push(o),s>0){var h=n[s-1],v=Cs(o,h);v!==!1&&(h[1]=v,o[0]=v),u.push(h[0]),s===i.length-2&&(u.push(o[0]),u.push(o[1]))}i.length===2&&(u.push(o[0]),u.push(o[1]))}}),yr(u,r.properties)}function ks(r,e,t){var n=Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1])),a=r[0]+t*(e[1]-r[1])/n,i=e[0]+t*(e[1]-r[1])/n,u=r[1]+t*(r[0]-e[0])/n,f=e[1]+t*(r[0]-e[0])/n;return[[a,u],[i,f]]}function Os(r){return(r>0)-(r<0)||+r}function Kt(r,e,t){var n=e[0]-r[0],a=e[1]-r[1],i=t[0]-e[0],u=t[1]-e[1];return Os(n*u-i*a)}function qs(r,e){var t=r.geometry.coordinates[0].map(function(u){return u[0]}),n=r.geometry.coordinates[0].map(function(u){return u[1]}),a=e.geometry.coordinates[0].map(function(u){return u[0]}),i=e.geometry.coordinates[0].map(function(u){return u[1]});return Math.max.apply(null,t)===Math.max.apply(null,a)&&Math.max.apply(null,n)===Math.max.apply(null,i)&&Math.min.apply(null,t)===Math.min.apply(null,a)&&Math.min.apply(null,n)===Math.min.apply(null,i)}function Rn(r,e){return e.geometry.coordinates[0].every(function(t){return Pr(W(t),r)})}function Bs(r,e){return r[0]===e[0]&&r[1]===e[1]}var xn=function(){function r(e){this.id=r.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return r.buildId=function(e){return e.join(",")},r.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},r.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},r.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},r.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,n){var a=t.to,i=n.to;if(a.coordinates[0]-e.coordinates[0]>=0&&i.coordinates[0]-e.coordinates[0]<0)return 1;if(a.coordinates[0]-e.coordinates[0]<0&&i.coordinates[0]-e.coordinates[0]>=0)return-1;if(a.coordinates[0]-e.coordinates[0]===0&&i.coordinates[0]-e.coordinates[0]===0)return a.coordinates[1]-e.coordinates[1]>=0||i.coordinates[1]-e.coordinates[1]>=0?a.coordinates[1]-i.coordinates[1]:i.coordinates[1]-a.coordinates[1];var u=Kt(e.coordinates,a.coordinates,i.coordinates);if(u<0)return 1;if(u>0)return-1;var f=Math.pow(a.coordinates[0]-e.coordinates[0],2)+Math.pow(a.coordinates[1]-e.coordinates[1],2),s=Math.pow(i.coordinates[0]-e.coordinates[0],2)+Math.pow(i.coordinates[1]-e.coordinates[1],2);return f-s}),this.outerEdgesSorted=!0)},r.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},r.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},r.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},r}(),Fs=function(){function r(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return r.prototype.getSymetric=function(){return this.symetric||(this.symetric=new r(this.to,this.from),this.symetric.symetric=this),this.symetric},r.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},r.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},r.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},r.prototype.toLineString=function(){return yr([this.from.coordinates,this.to.coordinates])},r.prototype.compareTo=function(e){return Kt(e.from.coordinates,e.to.coordinates,this.to.coordinates)},r}(),Ns=function(){function r(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return r.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},r.prototype.get=function(e){return this.edges[e]},Object.defineProperty(r.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),r.prototype.forEach=function(e){this.edges.forEach(e)},r.prototype.map=function(e){return this.edges.map(e)},r.prototype.some=function(e){return this.edges.some(e)},r.prototype.isValid=function(){return!0},r.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(u,f,s){return f.from.coordinates[1]>e.edges[u].from.coordinates[1]&&(u=s),u},0),n=(t===0?this.length:t)-1,a=(t+1)%this.length,i=Kt(this.edges[n].from.coordinates,this.edges[t].from.coordinates,this.edges[a].from.coordinates);return i===0?this.edges[n].from.coordinates[0]>this.edges[a].from.coordinates[0]:i>0},r.prototype.toMultiPoint=function(){return Ne(this.edges.map(function(e){return e.from.coordinates}))},r.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(t){return t.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=J([e])},r.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ga(this.toPolygon())},r.findEdgeRingContaining=function(e,t){var n=e.getEnvelope(),a,i;return t.forEach(function(u){var f=u.getEnvelope();if(i&&(a=i.getEnvelope()),!qs(f,n)&&Rn(f,n)){for(var s=e.map(function(E){return E.from.coordinates}),o=void 0,h=function(E){u.some(function(g){return Bs(E,g.from.coordinates)})||(o=E)},v=0,c=s;v<c.length;v++){var d=c[v];h(d)}o&&u.inside(W(o))&&(!i||Rn(a,f))&&(i=u)}}),i},r.prototype.inside=function(e){return Pr(e,this.toPolygon())},r}();const $a=Ns;function Rs(r){if(!r)throw new Error("No geojson passed");if(r.type!=="FeatureCollection"&&r.type!=="GeometryCollection"&&r.type!=="MultiLineString"&&r.type!=="LineString"&&r.type!=="Feature")throw new Error("Invalid input type '"+r.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var xs=function(){function r(){this.edges=[],this.nodes={}}return r.fromGeoJson=function(e){Rs(e);var t=new r;return zr(e,function(n){ke(n,"LineString","Graph::fromGeoJson"),Pt(n,function(a,i){if(a){var u=t.getNode(a),f=t.getNode(i);t.addEdge(u,f)}return i})}),t},r.prototype.getNode=function(e){var t=xn.buildId(e),n=this.nodes[t];return n||(n=this.nodes[t]=new xn(e)),n},r.prototype.addEdge=function(e,t){var n=new Fs(e,t),a=n.getSymetric();this.edges.push(n),this.edges.push(a)},r.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},r.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var n=e.getOuterEdges().map(function(a){return a.to});this.removeNode(e),n.forEach(function(a){return t._removeIfDangle(a)})}},r.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},r.prototype._computeNextCWEdges=function(e){var t=this;typeof e>"u"?Object.keys(this.nodes).forEach(function(n){return t._computeNextCWEdges(t.nodes[n])}):e.getOuterEdges().forEach(function(n,a){e.getOuterEdge((a===0?e.getOuterEdges().length:a)-1).symetric.next=n})},r.prototype._computeNextCCWEdges=function(e,t){for(var n=e.getOuterEdges(),a,i,u=n.length-1;u>=0;--u){var f=n[u],s=f.symetric,o=void 0,h=void 0;f.label===t&&(o=f),s.label===t&&(h=s),!(!o||!h)&&(h&&(i=h),o&&(i&&(i.next=o,i=void 0),a||(a=o)))}i&&(i.next=a)},r.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(n){if(!(n.label>=0)){e.push(n);var a=n;do a.label=t,a=a.next;while(!n.isEqual(a));t++}}),e},r.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(n){n.label=void 0}),this._findLabeledEdgeRings().forEach(function(n){e._findIntersectionNodes(n).forEach(function(a){e._computeNextCCWEdges(a,n.label)})});var t=[];return this.edges.forEach(function(n){n.ring||t.push(e._findEdgeRing(n))}),t},r.prototype._findIntersectionNodes=function(e){var t=[],n=e,a=function(){var i=0;n.from.getOuterEdges().forEach(function(u){u.label===e.label&&++i}),i>1&&t.push(n.from),n=n.next};do a();while(!e.isEqual(n));return t},r.prototype._findEdgeRing=function(e){var t=e,n=new $a;do n.push(t),t.ring=n,t=t.next;while(!e.isEqual(t));return n},r.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(n){return t.removeEdge(n)}),e.innerEdges.forEach(function(n){return t.removeEdge(n)}),delete this.nodes[e.id]},r.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()},r}();const Is=xs;function Ts(r){var e=Is.fromGeoJson(r);e.deleteDangles(),e.deleteCutEdges();var t=[],n=[];return e.getEdgeRings().filter(function(a){return a.isValid()}).forEach(function(a){a.isHole()?t.push(a):n.push(a)}),t.forEach(function(a){$a.findEdgeRingContaining(a,n)&&n.push(a)}),T(n.map(function(a){return a.toPolygon()}))}function Wa(r,e){var t=!0;return zr(r,function(n){zr(e,function(a){if(t===!1)return!1;t=zs(n.geometry,a.geometry)})}),t}function zs(r,e){switch(r.type){case"Point":switch(e.type){case"Point":return!Ws(r.coordinates,e.coordinates);case"LineString":return!In(e,r);case"Polygon":return!Pr(r,e)}break;case"LineString":switch(e.type){case"Point":return!In(r,e);case"LineString":return!Gs(r,e);case"Polygon":return!Tn(e,r)}break;case"Polygon":switch(e.type){case"Point":return!Pr(e,r);case"LineString":return!Tn(r,e);case"Polygon":return!Ds(e,r)}}return!1}function In(r,e){for(var t=0;t<r.coordinates.length-1;t++)if($s(r.coordinates[t],r.coordinates[t+1],e.coordinates))return!0;return!1}function Gs(r,e){var t=ue(r,e);return t.features.length>0}function Tn(r,e){for(var t=0,n=e.coordinates;t<n.length;t++){var a=n[t];if(Pr(a,r))return!0}var i=ue(e,qe(r));return i.features.length>0}function Ds(r,e){for(var t=0,n=r.coordinates[0];t<n.length;t++){var a=n[t];if(Pr(a,e))return!0}for(var i=0,u=e.coordinates[0];i<u.length;i++){var f=u[i];if(Pr(f,r))return!0}var s=ue(qe(r),qe(e));return s.features.length>0}function $s(r,e,t){var n=t[0]-r[0],a=t[1]-r[1],i=e[0]-r[0],u=e[1]-r[1],f=n*u-a*i;return f!==0?!1:Math.abs(i)>=Math.abs(u)?i>0?r[0]<=t[0]&&t[0]<=e[0]:e[0]<=t[0]&&t[0]<=r[0]:u>0?r[1]<=t[1]&&t[1]<=e[1]:e[1]<=t[1]&&t[1]<=r[1]}function Ws(r,e){return r[0]===e[0]&&r[1]===e[1]}function Js(r,e){var t=Lr(r),n=Lr(e),a=t.type,i=n.type,u=t.coordinates,f=n.coordinates;switch(a){case"Point":switch(i){case"Point":return Zt(u,f);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return Hs(t,n);case"MultiPoint":return Xs(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return Kr(n,t,{ignoreEndVertices:!0});case"LineString":return bs(t,n);case"MultiPoint":return Ks(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return Pr(n,t,{ignoreBoundary:!0});case"LineString":return Qs(t,n);case"Polygon":return Us(t,n);case"MultiPoint":return Zs(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+a+" geometry not supported")}}function Hs(r,e){var t,n=!1;for(t=0;t<r.coordinates.length;t++)if(Zt(r.coordinates[t],e.coordinates)){n=!0;break}return n}function Xs(r,e){for(var t=0,n=e.coordinates;t<n.length;t++){for(var a=n[t],i=!1,u=0,f=r.coordinates;u<f.length;u++){var s=f[u];if(Zt(a,s)){i=!0;break}}if(!i)return!1}return!0}function Ks(r,e){for(var t=!1,n=0,a=e.coordinates;n<a.length;n++){var i=a[n];if(Kr(i,r,{ignoreEndVertices:!0})&&(t=!0),!Kr(i,r))return!1}return!!t}function Zs(r,e){for(var t=0,n=e.coordinates;t<n.length;t++){var a=n[t];if(!Pr(a,r,{ignoreBoundary:!0}))return!1}return!0}function bs(r,e){for(var t=!1,n=0,a=e.coordinates;n<a.length;n++){var i=a[n];if(Kr({type:"Point",coordinates:i},r,{ignoreEndVertices:!0})&&(t=!0),!Kr({type:"Point",coordinates:i},r,{ignoreEndVertices:!1}))return!1}return t}function Qs(r,e){var t=!1,n=0,a=Ar(r),i=Ar(e);if(!Ja(a,i))return!1;for(n;n<e.coordinates.length-1;n++){var u=Ys(e.coordinates[n],e.coordinates[n+1]);if(Pr({type:"Point",coordinates:u},r,{ignoreBoundary:!0})){t=!0;break}}return t}function Us(r,e){if(r.type==="Feature"&&r.geometry===null||e.type==="Feature"&&e.geometry===null)return!1;var t=Ar(r),n=Ar(e);if(!Ja(t,n))return!1;for(var a=Lr(e).coordinates,i=0,u=a;i<u.length;i++)for(var f=u[i],s=0,o=f;s<o.length;s++){var h=o[s];if(!Pr(h,r))return!1}return!0}function Ja(r,e){return!(r[0]>e[0]||r[2]<e[2]||r[1]>e[1]||r[3]<e[3])}function Zt(r,e){return r[0]===e[0]&&r[1]===e[1]}function Ys(r,e){return[(r[0]+e[0])/2,(r[1]+e[1])/2]}function _s(r,e){var t=Lr(r),n=Lr(e),a=t.type,i=n.type;switch(a){case"MultiPoint":switch(i){case"LineString":return zn(t,n);case"Polygon":return Dn(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"MultiPoint":return zn(n,t);case"LineString":return js(t,n);case"Polygon":return Gn(t,n);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"MultiPoint":return Dn(n,t);case"LineString":return Gn(n,t);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+a+" geometry not supported")}}function zn(r,e){for(var t=!1,n=!1,a=r.coordinates.length,i=0;i<a&&!t&&!n;){for(var u=0;u<e.coordinates.length-1;u++){var f=!0;(u===0||u===e.coordinates.length-2)&&(f=!1),Ha(e.coordinates[u],e.coordinates[u+1],r.coordinates[i],f)?t=!0:n=!0}i++}return t&&n}function js(r,e){var t=ue(r,e);if(t.features.length>0)for(var n=0;n<r.coordinates.length-1;n++)for(var a=0;a<e.coordinates.length-1;a++){var i=!0;if((a===0||a===e.coordinates.length-2)&&(i=!1),Ha(r.coordinates[n],r.coordinates[n+1],e.coordinates[a],i))return!0}return!1}function Gn(r,e){var t=Ia(e),n=ue(r,t);return n.features.length>0}function Dn(r,e){for(var t=!1,n=!1,a=r.coordinates.length,i=0;i<a&&(!t||!n);i++)Pr(W(r.coordinates[i]),e)?t=!0:n=!0;return n&&t}function Ha(r,e,t,n){var a=t[0]-r[0],i=t[1]-r[1],u=e[0]-r[0],f=e[1]-r[1],s=a*f-i*u;return s!==0?!1:n?Math.abs(u)>=Math.abs(f)?u>0?r[0]<=t[0]&&t[0]<=e[0]:e[0]<=t[0]&&t[0]<=r[0]:f>0?r[1]<=t[1]&&t[1]<=e[1]:e[1]<=t[1]&&t[1]<=r[1]:Math.abs(u)>=Math.abs(f)?u>0?r[0]<t[0]&&t[0]<e[0]:e[0]<t[0]&&t[0]<r[0]:f>0?r[1]<t[1]&&t[1]<e[1]:e[1]<t[1]&&t[1]<r[1]}function Vs(r,e){var t=Lr(r),n=Lr(e),a=t.type,i=n.type;if(a==="MultiPoint"&&i!=="MultiPoint"||(a==="LineString"||a==="MultiLineString")&&i!=="LineString"&&i!=="MultiLineString"||(a==="Polygon"||a==="MultiPolygon")&&i!=="Polygon"&&i!=="MultiPolygon")throw new Error("features must be of the same type");if(a==="Point")throw new Error("Point geometry not supported");var u=new Qn({precision:6});if(u.compare(r,e))return!1;var f=0;switch(a){case"MultiPoint":for(var s=0;s<t.coordinates.length;s++)for(var o=0;o<n.coordinates.length;o++){var h=t.coordinates[s],v=n.coordinates[o];if(h[0]===v[0]&&h[1]===v[1])return!0}return!1;case"LineString":case"MultiLineString":ee(r,function(c){ee(e,function(d){za(c,d).features.length&&f++})});break;case"Polygon":case"MultiPolygon":ee(r,function(c){ee(e,function(d){ue(c,d).features.length&&f++})});break}return f>0}function rf(r,e){var t=Lr(r).type,n=Lr(e).type;if(t!==n)return!1;var a=new Qn({precision:6});return a.compare(le(r),le(e))}function Xa(r,e){var t=!1;return zr(r,function(n){zr(e,function(a){if(t===!0)return!0;t=!Wa(n.geometry,a.geometry)})}),t}function ef(r,e,t){t===void 0&&(t={}),t.mutate!==!0&&(r=Dr(r)),t.minPoints=t.minPoints||3;var n=new Mi.DBSCAN,a=n.run(Ee(r),de(e,t.units),t.minPoints,gr),i=-1;return a.forEach(function(u){i++,u.forEach(function(f){var s=r.features[f];s.properties||(s.properties={}),s.properties.cluster=i,s.properties.dbscan="core"})}),n.noise.forEach(function(u){var f=r.features[u];f.properties||(f.properties={}),f.properties.cluster?f.properties.dbscan="edge":f.properties.dbscan="noise"}),r}function tf(r,e){e===void 0&&(e={});var t=r.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(t/2)),e.numberOfClusters>t&&(e.numberOfClusters=t),e.mutate!==!0&&(r=Dr(r));var n=Ee(r),a=n.slice(0,e.numberOfClusters),i=Pi(n,e.numberOfClusters,a),u={};return i.centroids.forEach(function(f,s){u[s]=f}),pr(r,function(f,s){var o=i.idxs[s];f.properties.cluster=o,f.properties.centroid=u[o]}),r}function nf(r,e){if(!r)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");var t=$n(r,"line1");if(t!=="LineString")throw new Error("line1 must be a LineString");var n=$n(e,"line2");if(n!=="LineString")throw new Error("line2 must be a LineString");for(var a=pe(le(r)).features,i=pe(le(e)).features,u=0;u<a.length;u++){var f=a[u].geometry.coordinates;if(!i[u])break;var s=i[u].geometry.coordinates;if(!af(f,s))return!1}return!0}function af(r,e){var t=ce(ye(r[0],r[1])),n=ce(ye(e[0],e[1]));return t===n}function $n(r,e){if(r.geometry&&r.geometry.type)return r.geometry.type;if(r.type)return r.type;throw new Error("Invalid GeoJSON object for "+e)}function Wn(r){for(var e=r,t=[];e.parent;)t.unshift(e),e=e.parent;return t}function uf(){return new Ka(function(r){return r.f})}var Ve={search:function(r,e,t,n){r.cleanDirty(),n=n||{};var a=n.heuristic||Ve.heuristics.manhattan,i=n.closest||!1,u=uf(),f=e;for(e.h=a(e,t),u.push(e);u.size()>0;){var s=u.pop();if(s===t)return Wn(s);s.closed=!0;for(var o=r.neighbors(s),h=0,v=o.length;h<v;++h){var c=o[h];if(!(c.closed||c.isWall())){var d=s.g+c.getCost(s),E=c.visited;(!E||d<c.g)&&(c.visited=!0,c.parent=s,c.h=c.h||a(c,t),c.g=d,c.f=c.g+c.h,r.markDirty(c),i&&(c.h<f.h||c.h===f.h&&c.g<f.g)&&(f=c),E?u.rescoreElement(c):u.push(c))}}}return i?Wn(f):[]},heuristics:{manhattan:function(r,e){var t=Math.abs(e.x-r.x),n=Math.abs(e.y-r.y);return t+n},diagonal:function(r,e){var t=1,n=Math.sqrt(2),a=Math.abs(e.x-r.x),i=Math.abs(e.y-r.y);return t*(a+i)+(n-2*t)*Math.min(a,i)}},cleanNode:function(r){r.f=0,r.g=0,r.h=0,r.visited=!1,r.closed=!1,r.parent=null}};function Pe(r,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var t=0;t<r.length;t++){this.grid[t]=[];for(var n=0,a=r[t];n<a.length;n++){var i=new rt(t,n,a[n]);this.grid[t][n]=i,this.nodes.push(i)}}this.init()}Pe.prototype.init=function(){this.dirtyNodes=[];for(var r=0;r<this.nodes.length;r++)Ve.cleanNode(this.nodes[r])};Pe.prototype.cleanDirty=function(){for(var r=0;r<this.dirtyNodes.length;r++)Ve.cleanNode(this.dirtyNodes[r]);this.dirtyNodes=[]};Pe.prototype.markDirty=function(r){this.dirtyNodes.push(r)};Pe.prototype.neighbors=function(r){var e=[],t=r.x,n=r.y,a=this.grid;return a[t-1]&&a[t-1][n]&&e.push(a[t-1][n]),a[t+1]&&a[t+1][n]&&e.push(a[t+1][n]),a[t]&&a[t][n-1]&&e.push(a[t][n-1]),a[t]&&a[t][n+1]&&e.push(a[t][n+1]),this.diagonal&&(a[t-1]&&a[t-1][n-1]&&e.push(a[t-1][n-1]),a[t+1]&&a[t+1][n-1]&&e.push(a[t+1][n-1]),a[t-1]&&a[t-1][n+1]&&e.push(a[t-1][n+1]),a[t+1]&&a[t+1][n+1]&&e.push(a[t+1][n+1])),e};Pe.prototype.toString=function(){for(var r=[],e=this.grid,t,n,a,i,u=0,f=e.length;u<f;u++){for(t=[],n=e[u],a=0,i=n.length;a<i;a++)t.push(n[a].weight);r.push(t.join(" "))}return r.join(`
`)};function rt(r,e,t){this.x=r,this.y=e,this.weight=t}rt.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};rt.prototype.getCost=function(r){return r&&r.x!==this.x&&r.y!==this.y?this.weight*1.41421:this.weight};rt.prototype.isWall=function(){return this.weight===0};function Ka(r){this.content=[],this.scoreFunction=r}Ka.prototype={push:function(r){this.content.push(r),this.sinkDown(this.content.length-1)},pop:function(){var r=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),r},remove:function(r){var e=this.content.indexOf(r),t=this.content.pop();e!==this.content.length-1&&(this.content[e]=t,this.scoreFunction(t)<this.scoreFunction(r)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(r){this.sinkDown(this.content.indexOf(r))},sinkDown:function(r){for(var e=this.content[r];r>0;){var t=(r+1>>1)-1,n=this.content[t];if(this.scoreFunction(e)<this.scoreFunction(n))this.content[t]=e,this.content[r]=n,r=t;else break}},bubbleUp:function(r){for(var e=this.content.length,t=this.content[r],n=this.scoreFunction(t);;){var a=r+1<<1,i=a-1,u=null,f;if(i<e){var s=this.content[i];f=this.scoreFunction(s),f<n&&(u=i)}if(a<e){var o=this.content[a],h=this.scoreFunction(o);h<(u===null?n:f)&&(u=a)}if(u!==null)this.content[r]=this.content[u],this.content[u]=t,r=u;else break}}};function of(r,e,t){if(t=t||{},!wr(t))throw new Error("options is invalid");var n=t.resolution,a=t.minDistance,i=t.obstacles||T([]);if(!r)throw new Error("start is required");if(!e)throw new Error("end is required");if(n&&!Ir(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var u=Er(r),f=Er(e);switch(r=W(u),e=W(f),Xr(i)){case"FeatureCollection":if(i.features.length===0)return yr([u,f]);break;case"Polygon":i=T([Fr(Lr(i))]);break;default:throw new Error("invalid obstacles")}var s=i;s.features.push(r),s.features.push(e);var o=Ar(Da(Ft(Ar(s)),1.15));if(!n){var h=gr([o[0],o[1]],[o[2],o[1]],t);n=h/100}s.features.pop(),s.features.pop();for(var v=o[0],c=o[1],d=o[2],E=o[3],g=n/gr([v,c],[d,c],t),P=g*(d-v),m=n/gr([v,c],[v,E],t),p=m*(E-c),w=d-v,L=E-c,M=Math.floor(w/P),q=Math.floor(L/p),S=(w-M*P)/2,k=(L-q*p)/2,y=[],qr=[],C=[],A=[],O=1/0,D=1/0,Sr=E-k,$=0;Sr>=c;){for(var Nr=[],kr=[],Mr=v+S,Ur=0;Mr<=d;){var Yr=W([Mr,Sr]),_r=sf(Yr,i);Nr.push(_r?0:1),kr.push(Mr+"|"+Sr);var Br=gr(Yr,r);!_r&&Br<O&&(O=Br,C={x:Ur,y:$});var Or=gr(Yr,e);!_r&&Or<D&&(D=Or,A={x:Ur,y:$}),Mr+=P,Ur++}qr.push(Nr),y.push(kr),Sr-=p,$++}var Wr=new Pe(qr,{diagonal:!0}),jr=Wr.grid[C.y][C.x],Vr=Wr.grid[A.y][A.x],tt=Ve.search(Wr,jr,Vr),Le=[u];return tt.forEach(function(Ie){var Te=y[Ie.x][Ie.y].split("|");Le.push([+Te[0],+Te[1]])}),Le.push(f),le(yr(Le))}function sf(r,e){for(var t=0;t<e.features.length;t++)if(Pr(r,e.features[t]))return!0;return!1}function ff(r){return r=r.slice(),r.push(r[0]),J([r])}function hf(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.bbox||[-180,-85,180,85];if(!r)throw new Error("points is required");if(!Array.isArray(t))throw new Error("bbox is invalid");return ie(r,"Point","points"),T(Li().x(function(n){return n.geometry.coordinates[0]}).y(function(n){return n.geometry.coordinates[1]}).extent([[t[0],t[1]],[t[2],t[3]]]).polygons(r.features).map(ff))}function Za(r,e,t,n){n=n||{};var a=n.steps||64,i=n.units||"kilometers",u=n.angle||0,f=n.pivot||r,s=n.properties||r.properties||{};if(!r)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!t)throw new Error("ySemiAxis is required");if(!wr(n))throw new Error("options must be an object");if(!Ir(a))throw new Error("steps must be a number");if(!Ir(u))throw new Error("angle must be a number");var o=Er(r);if(i==="degrees")var h=xr(u);else e=Me(r,e,90,{units:i}),t=Me(r,t,0,{units:i}),e=Er(e)[0]-o[0],t=Er(t)[1]-o[1];for(var v=[],c=0;c<a;c+=1){var d=c*-360/a,E=e*t/Math.sqrt(Math.pow(t,2)+Math.pow(e,2)*Math.pow(Jn(d),2)),g=e*t/Math.sqrt(Math.pow(e,2)+Math.pow(t,2)/Math.pow(Jn(d),2));if(d<-90&&d>=-270&&(E=-E),d<-180&&d>=-360&&(g=-g),i==="degrees"){var P=E*Math.cos(h)+g*Math.sin(h),m=g*Math.cos(h)-E*Math.sin(h);E=P,g=m}v.push([E+o[0],g+o[1]])}return v.push(v[0]),i==="degrees"?J([v],s):Ga(J([v],s),u,{pivot:f})}function Jn(r){var e=r*Math.PI/180;return Math.tan(e)}function bt(r,e){e===void 0&&(e={});var t=0,n=0,a=0;return br(r,function(i,u,f){var s=e.weight?f==null?void 0:f[e.weight]:void 0;if(s=s??1,!Ir(s))throw new Error("weight value must be a number for feature index "+u);s=Number(s),s>0&&Cr(i,function(o){t+=o[0]*s,n+=o[1]*s,a+=s})}),W([t/a,n/a],e.properties,e)}function vf(r,e){if(e===void 0&&(e={}),e=e||{},!wr(e))throw new Error("options is invalid");var t=e.counter||10;if(!Ir(t))throw new Error("counter must be a number");var n=e.weight,a=bt(r,{weight:e.weight}),i=T([]);pr(r,function(f){var s;i.features.push(se(f,{properties:{weight:(s=f.properties)===null||s===void 0?void 0:s[n]}}))});var u={tolerance:e.tolerance,medianCandidates:[]};return ba(a.geometry.coordinates,[0,0],i,u,t)}function ba(r,e,t,n,a){var i=n.tolerance||.001,u=0,f=0,s=0,o=0;if(pr(t,function(c){var d,E=(d=c.properties)===null||d===void 0?void 0:d.weight,g=E??1;if(g=Number(g),!Ir(g))throw new Error("weight value must be a number");if(g>0){o+=1;var P=g*gr(c,r);P===0&&(P=1);var m=g/P;u+=c.geometry.coordinates[0]*m,f+=c.geometry.coordinates[1]*m,s+=m}}),o<1)throw new Error("no features to measure");var h=u/s,v=f/s;return o===1||a===0||Math.abs(h-e[0])<i&&Math.abs(v-e[1])<i?W([h,v],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([h,v]),ba([h,v],r,t,n,a-1))}function cf(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.steps||64,n=e.weight,a=e.properties||{};if(!Ir(t))throw new Error("steps must be a number");if(!wr(a))throw new Error("properties must be a number");var i=Ee(r).length,u=bt(r,{weight:n}),f=0,s=0,o=0;pr(r,function(S){var k=S.properties[n]||1,y=Hn(G(S),G(u));f+=Math.pow(y.x,2)*k,s+=Math.pow(y.y,2)*k,o+=y.x*y.y*k});var h=f-s,v=Math.sqrt(Math.pow(h,2)+4*Math.pow(o,2)),c=2*o,d=Math.atan((h+v)/c),E=d*180/Math.PI,g=0,P=0,m=0;pr(r,function(S){var k=S.properties[n]||1,y=Hn(G(S),G(u));g+=Math.pow(y.x*Math.cos(d)-y.y*Math.sin(d),2)*k,P+=Math.pow(y.x*Math.sin(d)+y.y*Math.cos(d),2)*k,m+=k});var p=Math.sqrt(2*g/m),w=Math.sqrt(2*P/m),L=Za(u,p,w,{units:"degrees",angle:E,steps:t,properties:a}),M=ht(r,T([L])),q={meanCenterCoordinates:G(u),semiMajorAxis:p,semiMinorAxis:w,numberOfFeatures:i,angle:E,percentageWithinEllipse:100*Ee(M).length/i};return L.properties.standardDeviationalEllipse=q,L}function Hn(r,e){return{x:r[0]-e[0],y:r[1]-e[1]}}function df(r,e,t,n){if(n===void 0&&(n={}),!wr(n))throw new Error("options is invalid");if(!r)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!t)throw new Error("endPoint is required");var a=r,i=e,u=t,f=ce(n.mercator!==!0?ae(a,i):ye(a,i)),s=ce(n.mercator!==!0?ae(u,i):ye(u,i)),o=Math.abs(f-s);return n.explementary===!0?360-o:o}function lf(r,e){var t=[],n=e.iterations||1;if(!r)throw new Error("inputPolys is required");return br(r,function(a,i,u){var f,s,o;switch(a.type){case"Polygon":f=[[]];for(var h=0;h<n;h++)o=[[]],s=a,h>0&&(s=J(f).geometry),pf(s,o),f=o.slice(0);t.push(J(f,u));break;case"MultiPolygon":f=[[[]]];for(var v=0;v<n;v++)o=[[[]]],s=a,v>0&&(s=Zr(f).geometry),yf(s,o),f=o.slice(0);t.push(Zr(f,u));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),T(t)}function pf(r,e){var t=0,n=0;Cr(r,function(a,i,u,f,s){s>t&&(t=s,n=i,e.push([]));var o=i-n,h=r.coordinates[s][o+1],v=a[0],c=a[1],d=h[0],E=h[1];e[s].push([.75*v+.25*d,.75*c+.25*E]),e[s].push([.25*v+.75*d,.25*c+.75*E])},!0),e.forEach(function(a){a.push(a[0])})}function yf(r,e){var t=0,n=0,a=0;Cr(r,function(i,u,f,s,o){s>a&&(a=s,n=u,e.push([[]])),o>t&&(t=o,n=u,e[s].push([]));var h=u-n,v=r.coordinates[s][o][h+1],c=i[0],d=i[1],E=v[0],g=v[1];e[s][o].push([.75*c+.25*E,.75*d+.25*g]),e[s][o].push([.25*c+.75*E,.25*d+.75*g])},!0),e.forEach(function(i){i.forEach(function(u){u.push(u[0])})})}function gf(r,e,t){t===void 0&&(t=2);var n=Er(r),a=Er(e),i=n[0]-a[0],u=n[1]-a[1];return t===1?Math.abs(i)+Math.abs(u):Math.pow(Math.pow(i,t)+Math.pow(u,t),1/t)}function Qa(r,e){e=e||{};var t=e.threshold||1e4,n=e.p||2,a=e.binary||!1,i=e.alpha||-1,u=e.standardization||!1,f=[];pr(r,function(d){f.push(se(d))});for(var s=[],o=0;o<f.length;o++)s[o]=[];for(var o=0;o<f.length;o++)for(var h=o;h<f.length;h++){o===h&&(s[o][h]=0);var v=gf(f[o],f[h],n);s[o][h]=v,s[h][o]=v}for(var o=0;o<f.length;o++)for(var h=0;h<f.length;h++){var v=s[o][h];v!==0&&(a?v<=t?s[o][h]=1:s[o][h]=0:v<=t?s[o][h]=Math.pow(v,i):s[o][h]=0)}if(u)for(var o=0;o<f.length;o++)for(var c=s[o].reduce(function(E,g){return E+g},0),h=0;h<f.length;h++)s[o][h]=s[o][h]/c;return s}function wf(r,e){var t=e.inputField,n=e.threshold||1e5,a=e.p||2,i=e.binary||!1,u=e.alpha||-1,f=e.standardization||!0,s=Qa(r,{alpha:u,binary:i,p:a,standardization:f,threshold:n}),o=[];pr(r,function(C){var A=C.properties||{};o.push(A[t])});for(var h=Ua(o),v=mf(o),c=0,d=0,E=0,g=0,P=s.length,m=0;m<P;m++){for(var p=0,w=0;w<P;w++)c+=s[m][w]*(o[m]-h)*(o[w]-h),d+=s[m][w],E+=Math.pow(s[m][w]+s[w][m],2),p+=s[m][w]+s[w][m];g+=Math.pow(p,2)}E=.5*E;var L=c/d/v,M=-1/(P-1),q=P*P*E-P*g+3*(d*d),S=(P-1)*(P+1)*(d*d),k=q/S-M*M,y=Math.sqrt(k),qr=(L-M)/y;return{expectedMoranIndex:M,moranIndex:L,stdNorm:y,zNorm:qr}}function Ua(r){for(var e=0,t=0,n=r;t<n.length;t++){var a=n[t];e+=a}return e/r.length}function mf(r){for(var e=Ua(r),t=0,n=0,a=r;n<a.length;n++){var i=a[n];t+=Math.pow(i-e,2)}return t/r.length}function Ya(r,e){return e===void 0&&(e={}),ja(r,"mercator",e)}function _a(r,e){return e===void 0&&(e={}),ja(r,"wgs84",e)}function ja(r,e,t){t===void 0&&(t={}),t=t||{};var n=t.mutate;if(!r)throw new Error("geojson is required");return Array.isArray(r)&&Ir(r[0])?r=e==="mercator"?Xn(r):Kn(r):(n!==!0&&(r=Dr(r)),Cr(r,function(a){var i=e==="mercator"?Xn(a):Kn(a);a[0]=i[0],a[1]=i[1]})),r}function Xn(r){var e=Math.PI/180,t=6378137,n=20037508342789244e-9,a=Math.abs(r[0])<=180?r[0]:r[0]-Ef(r[0])*360,i=[t*a*e,t*Math.log(Math.tan(Math.PI*.25+.5*r[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function Kn(r){var e=180/Math.PI,t=6378137;return[r[0]*e/t,(Math.PI*.5-2*Math.atan(Math.exp(-r[1]/t)))*e]}function Ef(r){return r<0?-1:r>0?1:0}const Mf=Object.freeze(Object.defineProperty({__proto__:null,toMercator:Ya,toWgs84:_a},Symbol.toStringTag,{value:"Module"}));var Pf=globalThis&&globalThis.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),a=0,e=0;e<t;e++)for(var i=arguments[e],u=0,f=i.length;u<f;u++,a++)n[a]=i[u];return n};function xe(r){return Array.isArray(r)?Zn(r):r&&r.bbox?Zn(r.bbox):[Sf(),Cf()]}function Va(r,e){e===void 0&&(e={}),r==null&&(r=1);for(var t=[],n=0;n<r;n++)t.push(W(xe(e.bbox)));return T(t)}function ri(r,e){e===void 0&&(e={}),r==null&&(r=1),(!Ir(e.num_vertices)||e.num_vertices===void 0)&&(e.num_vertices=10),(!Ir(e.max_radial_length)||e.max_radial_length===void 0)&&(e.max_radial_length=10);for(var t=[],n=function(i){var u=[],f=Pf(Array(e.num_vertices+1)).map(Math.random);f.forEach(function(s,o,h){h[o]=o>0?s+h[o-1]:s}),f.forEach(function(s){s=s*2*Math.PI/f[f.length-1];var o=Math.random();u.push([o*(e.max_radial_length||10)*Math.sin(s),o*(e.max_radial_length||10)*Math.cos(s)])}),u[u.length-1]=u[0],u=u.map(Lf(xe(e.bbox))),t.push(J([u]))},a=0;a<r;a++)n();return T(t)}function ei(r,e){if(e===void 0&&(e={}),e=e||{},!wr(e))throw new Error("options is invalid");var t=e.bbox,n=e.num_vertices,a=e.max_length,i=e.max_rotation;r==null&&(r=1),(!Ir(n)||n===void 0||n<2)&&(n=10),(!Ir(a)||a===void 0)&&(a=1e-4),(!Ir(i)||i===void 0)&&(i=Math.PI/8);for(var u=[],f=0;f<r;f++){for(var s=xe(t),o=[s],h=0;h<n-1;h++){var v=h===0?Math.random()*2*Math.PI:Math.tan((o[h][1]-o[h-1][1])/(o[h][0]-o[h-1][0])),c=v+(Math.random()-.5)*i*2,d=Math.random()*a;o.push([o[h][0]+d*Math.cos(c),o[h][1]+d*Math.sin(c)])}u.push(yr(o))}return T(u)}function Lf(r){return function(e){return[e[0]+r[0],e[1]+r[1]]}}function ti(){return Math.random()-.5}function Sf(){return ti()*360}function Cf(){return ti()*180}function Zn(r){return[Math.random()*(r[2]-r[0])+r[0],Math.random()*(r[3]-r[1])+r[1]]}const Af=Object.freeze(Object.defineProperty({__proto__:null,randomLineString:ei,randomPoint:Va,randomPolygon:ri,randomPosition:xe},Symbol.toStringTag,{value:"Module"}));function ni(r,e){if(!r)throw new Error("geojson is required");if(r.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(e==null)throw new Error("filter is required");var t=[];return pr(r,function(n){et(n.properties,e)&&t.push(n)}),T(t)}function Qt(r,e,t){if(!r)throw new Error("geojson is required");if(r.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(e==null)throw new Error("property is required");for(var n=Ut(r,e),a=Object.keys(n),i=0;i<a.length;i++){for(var u=a[i],f=n[u],s=[],o=0;o<f.length;o++)s.push(r.features[f[o]]);t(T(s),u,i)}}function ai(r,e,t,n){var a=n;return Qt(r,e,function(i,u,f){f===0&&n===void 0?a=i:a=t(a,i,u,f)}),a}function Ut(r,e){var t={};return pr(r,function(n,a){var i=n.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var u=i[e];Object.prototype.hasOwnProperty.call(t,u)?t[u].push(a):t[u]=[a]}}),t}function et(r,e){if(r===void 0)return!1;var t=typeof e;if(t==="number"||t==="string")return Object.prototype.hasOwnProperty.call(r,e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!et(r,e[n]))return!1;return!0}else return Yt(r,e)}function Yt(r,e){for(var t=Object.keys(e),n=0;n<t.length;n++){var a=t[n];if(r[a]!==e[a])return!1}return!0}function ii(r,e){if(!e)return{};if(!e.length)return{};for(var t={},n=0;n<e.length;n++){var a=e[n];Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}const kf=Object.freeze(Object.defineProperty({__proto__:null,applyFilter:et,clusterEach:Qt,clusterReduce:ai,createBins:Ut,filterProperties:ii,getCluster:ni,propertiesContainsFilter:Yt},Symbol.toStringTag,{value:"Module"}));function Of(r,e){var t=Lr(r),n=Lr(e),a=r.properties||{},i=ne.difference(t.coordinates,n.coordinates);return i.length===0?null:i.length===1?J(i[0],a):Zr(i,a)}function qf(r,e,t){t=t||{};var n=t.units||"kilometers",a=t.steps||8;if(!r)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof a!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(a<=0)throw new Error("steps must be greater than 0");var i=[];switch(r.type){case"GeometryCollection":return br(r,function(u){var f=We(u,e,n,a);f&&i.push(f)}),T(i);case"FeatureCollection":return pr(r,function(u){var f=We(u,e,n,a);f&&pr(f,function(s){s&&i.push(s)})}),T(i)}return We(r,e,n,a)}function We(r,e,t,n){var a=r.properties||{},i=r.type==="Feature"?r.geometry:r;if(i.type==="GeometryCollection"){var u=[];return br(r,function(g){var P=We(g,e,t,n);P&&u.push(P)}),T(u)}var f=Bf(i),s={type:i.type,coordinates:oi(i.coordinates,f)},o=new Si,h=o.read(s),v=me(ve(e,t),"meters"),c=Ci.bufferOp(h,v,n),d=new Ai;if(c=d.write(c),!ui(c.coordinates)){var E={type:c.type,coordinates:si(c.coordinates,f)};return Fr(E,a)}}function ui(r){return Array.isArray(r[0])?ui(r[0]):isNaN(r[0])}function oi(r,e){return typeof r[0]!="object"?e(r):r.map(function(t){return oi(t,e)})}function si(r,e){return typeof r[0]!="object"?e.invert(r):r.map(function(t){return si(t,e)})}function Bf(r){var e=Ue(r).geometry.coordinates,t=[-e[0],-e[1]];return ki().rotate(t).scale(Rr)}function Ff(r,e,t){t===void 0&&(t={});var n=Lr(r),a=Lr(e),i=ne.union(n.coordinates,a.coordinates);return i.length===0?null:i.length===1?J(i[0],t.properties):Zr(i,t.properties)}function Fe(r,e,t){t===void 0&&(t={});var n=Lr(r),a=Lr(e),i=ne.intersection(n.coordinates,a.coordinates);return i.length===0?null:i.length===1?J(i[0],t.properties):Zr(i,t.properties)}function Nf(r,e){if(e=e||{},!wr(e))throw new Error("options is invalid");var t=e.propertyName;ie(r,"Polygon","dissolve");var n=[];if(e.propertyName){var a={};pr(r,function(s){Object.prototype.hasOwnProperty.call(a,s.properties[t])||(a[s.properties[t]]=[]),a[s.properties[t]].push(s)});for(var i=Object.keys(a),u=0;u<i.length;u++){var f=Zr(ne.union.apply(null,a[i[u]].map(function(s){return s.geometry.coordinates})));f.properties[t]=i[u],n.push(f)}}else return pt(Zr(ne.union.apply(null,r.features.map(function(s){return s.geometry.coordinates}))));return pt(T(n))}function fi(r,e,t){t===void 0&&(t={});var n=JSON.stringify(t.properties||{}),a=r[0],i=r[1],u=r[2],f=r[3],s=(i+f)/2,o=(a+u)/2,h=e*2/gr([a,s],[u,s],t),v=h*(u-a),c=e*2/gr([o,i],[o,f],t),d=c*(f-i),E=v/2,g=E*2,P=Math.sqrt(3)/2*d,m=u-a,p=f-i,w=3/4*g,L=P,M=(m-g)/(g-E/2),q=Math.floor(M),S=(q*w-E/2-m)/2-E/2+w/2,k=Math.floor((p-P)/P),y=(p-k*P)/2,qr=k*P-p>P/2;qr&&(y-=P/4);for(var C=[],A=[],O=0;O<6;O++){var D=2*Math.PI/6*O;C.push(Math.cos(D)),A.push(Math.sin(D))}for(var Sr=[],$=0;$<=q;$++)for(var Nr=0;Nr<=k;Nr++){var kr=$%2===1;if(!(Nr===0&&kr)&&!(Nr===0&&qr)){var Mr=$*w+a-S,Ur=Nr*L+i+y;if(kr&&(Ur-=P/2),t.triangles===!0)xf([Mr,Ur],v/2,d/2,JSON.parse(n),C,A).forEach(function(_r){t.mask?Fe(t.mask,_r)&&Sr.push(_r):Sr.push(_r)});else{var Yr=Rf([Mr,Ur],v/2,d/2,JSON.parse(n),C,A);t.mask?Fe(t.mask,Yr)&&Sr.push(Yr):Sr.push(Yr)}}}return T(Sr)}function Rf(r,e,t,n,a,i){for(var u=[],f=0;f<6;f++){var s=r[0]+e*a[f],o=r[1]+t*i[f];u.push([s,o])}return u.push(u[0].slice()),J([u],n)}function xf(r,e,t,n,a,i){for(var u=[],f=0;f<6;f++){var s=[];s.push(r),s.push([r[0]+e*a[f],r[1]+t*i[f]]),s.push([r[0]+e*a[(f+1)%6],r[1]+t*i[(f+1)%6]]),s.push(r),u.push(J([s],n))}return u}function If(r,e){var t=zf(e),n=null;return r.type==="FeatureCollection"?n=Tf(r):n=hi(ne.union(r.geometry.coordinates)),n.geometry.coordinates.forEach(function(a){t.geometry.coordinates.push(a[0])}),t}function Tf(r){var e=r.features.length===2?ne.union(r.features[0].geometry.coordinates,r.features[1].geometry.coordinates):ne.union.apply(ne,r.features.map(function(t){return t.geometry.coordinates}));return hi(e)}function hi(r){return Zr(r)}function zf(r){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=r&&r.geometry.coordinates||e;return J(t)}function Gf(r,e,t,n){n===void 0&&(n={});for(var a=[],i=r[0],u=r[1],f=r[2],s=r[3],o=e/gr([i,u],[f,u],n),h=o*(f-i),v=t/gr([i,u],[i,s],n),c=v*(s-u),d=f-i,E=s-u,g=Math.floor(d/h),P=Math.floor(E/c),m=(d-g*h)/2,p=(E-P*c)/2,w=i+m,L=0;L<g;L++){for(var M=u+p,q=0;q<P;q++){var S=J([[[w,M],[w,M+c],[w+h,M+c],[w+h,M],[w,M]]],n.properties);n.mask?Xa(n.mask,S)&&a.push(S):a.push(S),M+=c}w+=h}return T(a)}function vi(r,e,t){return t===void 0&&(t={}),Gf(r,e,e,t)}function ci(r,e,t){t===void 0&&(t={});for(var n=[],a=e/gr([r[0],r[1]],[r[2],r[1]],t),i=a*(r[2]-r[0]),u=e/gr([r[0],r[1]],[r[0],r[3]],t),f=u*(r[3]-r[1]),s=0,o=r[0];o<=r[2];){for(var h=0,v=r[1];v<=r[3];){var c=null,d=null;s%2===0&&h%2===0?(c=J([[[o,v],[o,v+f],[o+i,v],[o,v]]],t.properties),d=J([[[o,v+f],[o+i,v+f],[o+i,v],[o,v+f]]],t.properties)):s%2===0&&h%2===1?(c=J([[[o,v],[o+i,v+f],[o+i,v],[o,v]]],t.properties),d=J([[[o,v],[o,v+f],[o+i,v+f],[o,v]]],t.properties)):h%2===0&&s%2===1?(c=J([[[o,v],[o,v+f],[o+i,v+f],[o,v]]],t.properties),d=J([[[o,v],[o+i,v+f],[o+i,v],[o,v]]],t.properties)):h%2===1&&s%2===1&&(c=J([[[o,v],[o,v+f],[o+i,v],[o,v]]],t.properties),d=J([[[o,v+f],[o+i,v+f],[o+i,v],[o,v+f]]],t.properties)),t.mask?(Fe(t.mask,c)&&n.push(c),Fe(t.mask,d)&&n.push(d)):(n.push(c),n.push(d)),v+=f,h++}s++,o+=i}return T(n)}function Df(r,e,t){if(t=t||{},typeof t!="object")throw new Error("options is invalid");var n=t.gridType,a=t.property,i=t.weight;if(!r)throw new Error("points is required");if(ie(r,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(i!==void 0&&typeof i!="number")throw new Error("weight must be a number");a=a||"elevation",n=n||"square",i=i||1;var u=Ar(r),f;switch(n){case"point":case"points":f=Ba(u,e,t);break;case"square":case"squares":f=vi(u,e,t);break;case"hex":case"hexes":f=fi(u,e,t);break;case"triangle":case"triangles":f=ci(u,e,t);break;default:throw new Error("invalid gridType")}var s=[];return pr(f,function(o){var h=0,v=0;pr(r,function(d){var E=n==="point"?o:se(o),g=gr(E,d,t),P;if(a!==void 0&&(P=d.properties[a]),P===void 0&&(P=d.geometry.coordinates[2]),P===void 0)throw new Error("zValue is missing");g===0&&(h=P);var m=1/Math.pow(g,i);v+=m,h+=m*P});var c=Dr(o);c.properties[a]=h/v,s.push(c)}),T(s)}const Wf=Object.freeze(Object.defineProperty({__proto__:null,along:Hu,angle:df,applyFilter:et,area:xt,areaFactors:Je,bbox:Ar,bboxClip:yo,bboxPolygon:Ft,bearing:ae,bearingToAngle:ce,bearingToAzimuth:ce,bezier:un,bezierSpline:un,booleanClockwise:Ke,booleanContains:Js,booleanCrosses:_s,booleanDisjoint:Wa,booleanEqual:rf,booleanIntersects:Xa,booleanOverlap:Vs,booleanParallel:nf,booleanPointInPolygon:Pr,booleanPointOnLine:Kr,booleanWithin:ka,buffer:qf,center:Ue,centerMean:bt,centerMedian:vf,centerOfMass:ma,centroid:se,circle:Nt,cleanCoords:le,clone:Dr,clusterEach:Qt,clusterReduce:ai,clusters:kf,clustersDbscan:ef,clustersKmeans:tf,collect:_i,collectionOf:ie,combine:lu,concave:Ui,containsNumber:qt,convertArea:ea,convertDistance:de,convertLength:de,convex:ca,coordAll:Ee,coordEach:Cr,coordReduce:Pt,createBins:Ut,degrees2radians:xr,degreesToRadians:xr,destination:re,difference:Of,dissolve:Nf,distance:gr,distanceToDegrees:He,distanceToRadians:ve,distanceWeight:Qa,earthRadius:Rr,ellipse:Za,envelope:ga,explode:Ye,factors:Qe,feature:Fr,featureCollection:T,featureEach:pr,featureOf:ke,featureReduce:St,filterProperties:ii,findPoint:sa,findSegment:oa,flatten:pt,flattenEach:zr,flattenReduce:ua,flip:ji,geojsonType:ha,geomEach:br,geomReduce:Ct,geometry:Yn,geometryCollection:Mt,getCluster:ni,getCoord:Er,getCoords:G,getGeom:Lr,getType:Xr,greatCircle:fo,helpers:aa,hexGrid:fi,inside:Pr,interpolate:Df,intersect:Fe,invariant:Oi,isNumber:Ir,isObject:wr,isobands:vs,isolines:Ti,kinks:Du,length:lt,lengthToDegrees:He,lengthToRadians:ve,lineArc:xa,lineChunk:eo,lineDistance:lt,lineEach:kt,lineIntersect:ue,lineOffset:As,lineOverlap:za,lineReduce:Ot,lineSegment:pe,lineSlice:Xu,lineSliceAlong:Aa,lineSplit:ho,lineString:yr,lineStringToPolygon:Mn,lineStrings:Vn,lineToPolygon:Mn,mask:If,meta:fa,midpoint:du,moranIndex:wf,multiLineString:fe,multiPoint:Ne,multiPolygon:Zr,nearest:Xe,nearestPoint:Xe,nearestPointOnLine:te,nearestPointToLine:Tu,planepoint:Gu,point:W,pointGrid:Ba,pointOnFeature:hn,pointOnLine:te,pointOnSurface:hn,pointToLineDistance:Ca,points:_n,pointsWithinPolygon:ht,polygon:J,polygonSmooth:lf,polygonTangents:mo,polygonToLine:qe,polygonToLineString:qe,polygonize:Ts,polygons:jn,projection:Mf,propEach:Lt,propReduce:ia,propertiesContainsFilter:Yt,radians2degrees:oe,radiansToDegrees:oe,radiansToDistance:me,radiansToLength:me,random:Af,randomLineString:ei,randomPoint:Va,randomPolygon:ri,randomPosition:xe,rewind:Po,rhumbBearing:ye,rhumbDestination:Me,rhumbDistance:je,round:ra,sample:hu,sector:go,segmentEach:ee,segmentReduce:At,shortestPath:of,simplify:nu,square:wa,squareGrid:vi,standardDeviationalEllipse:cf,tag:fu,tesselate:pu,tin:da,toMercator:Ya,toWgs84:_a,transformRotate:Ga,transformScale:Da,transformTranslate:ms,triangleGrid:ci,truncate:Fa,union:Ff,unitsFactors:Un,unkinkPolygon:so,validateBBox:ta,validateId:na,voronoi:hf,within:ht},Symbol.toStringTag,{value:"Module"}));export{Wf as _,Eu as a,$r as b,xt as c,Sa as j};
