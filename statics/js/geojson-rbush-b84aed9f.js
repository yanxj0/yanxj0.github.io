import{c as Q,r as T,g as U,a as V,b as W}from"./@turf-67881268.js";var q={exports:{}},I={exports:{}};(function(J,v){(function(h,p){J.exports=p()})(Q,function(){function h(t,r,i,a,n){(function o(e,l,s,c,m){for(;c>s;){if(c-s>600){var u=c-s+1,x=l-s+1,S=Math.log(u),M=.5*Math.exp(2*S/3),Y=.5*Math.sqrt(S*M*(u-M)/u)*(x-u/2<0?-1:1),_=Math.max(s,Math.floor(l-x*M/u+Y)),L=Math.min(c,Math.floor(l+(u-x)*M/u+Y));o(e,l,_,L,m)}var F=e[l],A=s,y=c;for(p(e,s,l),m(e[c],F)>0&&p(e,s,c);A<y;){for(p(e,A,y),A++,y--;m(e[A],F)<0;)A++;for(;m(e[y],F)>0;)y--}m(e[s],F)===0?p(e,s,y):p(e,++y,c),y<=l&&(s=y+1),l<=y&&(c=y-1)}})(t,r,i||0,a||t.length-1,n||d)}function p(t,r,i){var a=t[r];t[r]=t[i],t[i]=a}function d(t,r){return t<r?-1:t>r?1:0}var f=function(t){t===void 0&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function z(t,r,i){if(!i)return r.indexOf(t);for(var a=0;a<r.length;a++)if(i(t,r[a]))return a;return-1}function B(t,r){E(t,0,t.children.length,r,t)}function E(t,r,i,a,n){n||(n=X(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o=r;o<i;o++){var e=t.children[o];w(n,t.leaf?a(e):e)}return n}function w(t,r){return t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY),t}function H(t,r){return t.minX-r.minX}function K(t,r){return t.minY-r.minY}function N(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function O(t){return t.maxX-t.minX+(t.maxY-t.minY)}function R(t,r){return t.minX<=r.minX&&t.minY<=r.minY&&r.maxX<=t.maxX&&r.maxY<=t.maxY}function $(t,r){return r.minX<=t.maxX&&r.minY<=t.maxY&&r.maxX>=t.minX&&r.maxY>=t.minY}function X(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function C(t,r,i,a,n){for(var o=[r,i];o.length;)if(!((i=o.pop())-(r=o.pop())<=a)){var e=r+Math.ceil((i-r)/a/2)*a;h(t,e,r,i,n),o.push(r,e,e,i)}}return f.prototype.all=function(){return this._all(this.data,[])},f.prototype.search=function(t){var r=this.data,i=[];if(!$(t,r))return i;for(var a=this.toBBox,n=[];r;){for(var o=0;o<r.children.length;o++){var e=r.children[o],l=r.leaf?a(e):e;$(t,l)&&(r.leaf?i.push(e):R(t,l)?this._all(e,i):n.push(e))}r=n.pop()}return i},f.prototype.collides=function(t){var r=this.data;if(!$(t,r))return!1;for(var i=[];r;){for(var a=0;a<r.children.length;a++){var n=r.children[a],o=r.leaf?this.toBBox(n):n;if($(t,o)){if(r.leaf||R(t,o))return!0;i.push(n)}}r=i.pop()}return!1},f.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var r=0;r<t.length;r++)this.insert(t[r]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var a=this.data;this.data=i,i=a}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},f.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},f.prototype.clear=function(){return this.data=X([]),this},f.prototype.remove=function(t,r){if(!t)return this;for(var i,a,n,o=this.data,e=this.toBBox(t),l=[],s=[];o||l.length;){if(o||(o=l.pop(),a=l[l.length-1],i=s.pop(),n=!0),o.leaf){var c=z(t,o.children,r);if(c!==-1)return o.children.splice(c,1),l.push(o),this._condense(l),this}n||o.leaf||!R(o,e)?a?(i++,o=a.children[i],n=!1):o=null:(l.push(o),s.push(i),i=0,a=o,o=o.children[0])}return this},f.prototype.toBBox=function(t){return t},f.prototype.compareMinX=function(t,r){return t.minX-r.minX},f.prototype.compareMinY=function(t,r){return t.minY-r.minY},f.prototype.toJSON=function(){return this.data},f.prototype.fromJSON=function(t){return this.data=t,this},f.prototype._all=function(t,r){for(var i=[];t;)t.leaf?r.push.apply(r,t.children):i.push.apply(i,t.children),t=i.pop();return r},f.prototype._build=function(t,r,i,a){var n,o=i-r+1,e=this._maxEntries;if(o<=e)return B(n=X(t.slice(r,i+1)),this.toBBox),n;a||(a=Math.ceil(Math.log(o)/Math.log(e)),e=Math.ceil(o/Math.pow(e,a-1))),(n=X([])).leaf=!1,n.height=a;var l=Math.ceil(o/e),s=l*Math.ceil(Math.sqrt(e));C(t,r,i,s,this.compareMinX);for(var c=r;c<=i;c+=s){var m=Math.min(c+s-1,i);C(t,c,m,l,this.compareMinY);for(var u=c;u<=m;u+=l){var x=Math.min(u+l-1,m);n.children.push(this._build(t,u,x,a-1))}}return B(n,this.toBBox),n},f.prototype._chooseSubtree=function(t,r,i,a){for(;a.push(r),!r.leaf&&a.length-1!==i;){for(var n=1/0,o=1/0,e=void 0,l=0;l<r.children.length;l++){var s=r.children[l],c=N(s),m=(u=t,x=s,(Math.max(x.maxX,u.maxX)-Math.min(x.minX,u.minX))*(Math.max(x.maxY,u.maxY)-Math.min(x.minY,u.minY))-c);m<o?(o=m,n=c<n?c:n,e=s):m===o&&c<n&&(n=c,e=s)}r=e||r.children[0]}var u,x;return r},f.prototype._insert=function(t,r,i){var a=i?t:this.toBBox(t),n=[],o=this._chooseSubtree(a,this.data,r,n);for(o.children.push(t),w(o,a);r>=0&&n[r].children.length>this._maxEntries;)this._split(n,r),r--;this._adjustParentBBoxes(a,n,r)},f.prototype._split=function(t,r){var i=t[r],a=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,a);var o=this._chooseSplitIndex(i,n,a),e=X(i.children.splice(o,i.children.length-o));e.height=i.height,e.leaf=i.leaf,B(i,this.toBBox),B(e,this.toBBox),r?t[r-1].children.push(e):this._splitRoot(i,e)},f.prototype._splitRoot=function(t,r){this.data=X([t,r]),this.data.height=t.height+1,this.data.leaf=!1,B(this.data,this.toBBox)},f.prototype._chooseSplitIndex=function(t,r,i){for(var a,n,o,e,l,s,c,m=1/0,u=1/0,x=r;x<=i-r;x++){var S=E(t,0,x,this.toBBox),M=E(t,x,i,this.toBBox),Y=(n=S,o=M,e=void 0,l=void 0,s=void 0,c=void 0,e=Math.max(n.minX,o.minX),l=Math.max(n.minY,o.minY),s=Math.min(n.maxX,o.maxX),c=Math.min(n.maxY,o.maxY),Math.max(0,s-e)*Math.max(0,c-l)),_=N(S)+N(M);Y<m?(m=Y,a=x,u=_<u?_:u):Y===m&&_<u&&(u=_,a=x)}return a||i-r},f.prototype._chooseSplitAxis=function(t,r,i){var a=t.leaf?this.compareMinX:H,n=t.leaf?this.compareMinY:K;this._allDistMargin(t,r,i,a)<this._allDistMargin(t,r,i,n)&&t.children.sort(a)},f.prototype._allDistMargin=function(t,r,i,a){t.children.sort(a);for(var n=this.toBBox,o=E(t,0,r,n),e=E(t,i-r,i,n),l=O(o)+O(e),s=r;s<i-r;s++){var c=t.children[s];w(o,t.leaf?n(c):c),l+=O(o)}for(var m=i-r-1;m>=r;m--){var u=t.children[m];w(e,t.leaf?n(u):u),l+=O(e)}return l},f.prototype._adjustParentBBoxes=function(t,r,i){for(var a=i;a>=0;a--)w(r[a],t)},f.prototype._condense=function(t){for(var r=t.length-1,i=void 0;r>=0;r--)t[r].children.length===0?r>0?(i=t[r-1].children).splice(i.indexOf(t[r]),1):this.clear():B(t[r],this.toBBox)},f})})(I);var Z=I.exports,b=Z,P=V,G=W,g=T.default,j=G.featureEach;G.coordEach;P.polygon;var D=P.featureCollection;function k(J){var v=new b(J);return v.insert=function(h){if(h.type!=="Feature")throw new Error("invalid feature");return h.bbox=h.bbox?h.bbox:g(h),b.prototype.insert.call(this,h)},v.load=function(h){var p=[];return Array.isArray(h)?h.forEach(function(d){if(d.type!=="Feature")throw new Error("invalid features");d.bbox=d.bbox?d.bbox:g(d),p.push(d)}):j(h,function(d){if(d.type!=="Feature")throw new Error("invalid features");d.bbox=d.bbox?d.bbox:g(d),p.push(d)}),b.prototype.load.call(this,p)},v.remove=function(h,p){if(h.type!=="Feature")throw new Error("invalid feature");return h.bbox=h.bbox?h.bbox:g(h),b.prototype.remove.call(this,h,p)},v.clear=function(){return b.prototype.clear.call(this)},v.search=function(h){var p=b.prototype.search.call(this,this.toBBox(h));return D(p)},v.collides=function(h){return b.prototype.collides.call(this,this.toBBox(h))},v.all=function(){var h=b.prototype.all.call(this);return D(h)},v.toJSON=function(){return b.prototype.toJSON.call(this)},v.fromJSON=function(h){return b.prototype.fromJSON.call(this,h)},v.toBBox=function(h){var p;if(h.bbox)p=h.bbox;else if(Array.isArray(h)&&h.length===4)p=h;else if(Array.isArray(h)&&h.length===6)p=[h[0],h[1],h[3],h[4]];else if(h.type==="Feature")p=g(h);else if(h.type==="FeatureCollection")p=g(h);else throw new Error("invalid geojson");return{minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}},v}q.exports=k;q.exports.default=k;var tt=q.exports;const it=U(tt);export{it as r};
