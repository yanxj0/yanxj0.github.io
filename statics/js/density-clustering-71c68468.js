import{g as E}from"./@turf-67881268.js";var C={exports:{}},l={exports:{}},y;function P(){return y||(y=1,function(u){function h(r,t,e,s){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,t,e,s)}h.prototype.run=function(r,t,e,s){this._init(r,t,e,s);for(var i=0;i<this._datasetLength;i++)if(this._visited[i]!==1){this._visited[i]=1;var n=this._regionQuery(i);if(n.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,n)}}return this.clusters},h.prototype._init=function(r,t,e,s){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),e&&(this.minPts=e),s&&(this.distance=s)},h.prototype._expandCluster=function(r,t){for(var e=0;e<t.length;e++){var s=t[e];if(this._visited[s]!==1){this._visited[s]=1;var i=this._regionQuery(s);i.length>=this.minPts&&(t=this._mergeArrays(t,i))}this._assigned[s]!==1&&this._addToCluster(s,r)}},h.prototype._addToCluster=function(r,t){this.clusters[t].push(r),this._assigned[r]=1},h.prototype._regionQuery=function(r){for(var t=[],e=0;e<this._datasetLength;e++){var s=this.distance(this.dataset[r],this.dataset[e]);s<this.epsilon&&t.push(e)}return t},h.prototype._mergeArrays=function(r,t){for(var e=t.length,s=0;s<e;s++){var i=t[s];r.indexOf(i)<0&&r.push(i)}return r},h.prototype._euclideanDistance=function(r,t){for(var e=0,s=Math.min(r.length,t.length);s--;)e+=(r[s]-t[s])*(r[s]-t[s]);return Math.sqrt(e)},u.exports&&(u.exports=h)}(l)),l.exports}var v={exports:{}},d;function q(){return d||(d=1,function(u){function h(r,t,e){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,t,e)}h.prototype.init=function(r,t,e){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof t<"u"&&(this.k=t),typeof e<"u"&&(this.distance=e)},h.prototype.run=function(r,t){this.init(r,t);for(var e=this.dataset.length,s=0;s<this.k;s++)this.centroids[s]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var n=0;n<this.k;n++){for(var a=new Array(_),o=0,f=0;f<_;f++)a[f]=0;for(var c=0;c<e;c++){var _=this.dataset[c].length;if(n===this.assignments[c]){for(var f=0;f<_;f++)a[f]+=this.dataset[c][f];o++}}if(o>0){for(var f=0;f<_;f++)a[f]/=o;this.centroids[n]=a}else this.centroids[n]=this.randomCentroid(),i=!0}}return this.getClusters()},h.prototype.randomCentroid=function(){var r=this.dataset.length-1,t,e;do e=Math.round(Math.random()*r),t=this.dataset[e];while(this.centroids.indexOf(t)>=0);return t},h.prototype.assign=function(){for(var r=!1,t=this.dataset.length,e,s=0;s<t;s++)e=this.argmin(this.dataset[s],this.centroids,this.distance),e!=this.assignments[s]&&(this.assignments[s]=e,r=!0);return r},h.prototype.getClusters=function(){for(var r=new Array(this.k),t,e=0;e<this.assignments.length;e++)t=this.assignments[e],typeof r[t]>"u"&&(r[t]=[]),r[t].push(e);return r},h.prototype.argmin=function(r,t,e){for(var s=Number.MAX_VALUE,i=0,n=t.length,a,o=0;o<n;o++)a=e(r,t[o]),a<s&&(s=a,i=o);return i},h.prototype.distance=function(r,t){for(var e=0,s=Math.min(r.length,t.length);s--;){var i=r[s]-t[s];e+=i*i}return Math.sqrt(e)},u.exports&&(u.exports=h)}(v)),v.exports}var p={exports:{}},g={exports:{}},x;function A(){return x||(x=1,function(u){function h(r,t,e){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,t,e)}h.prototype.insert=function(r,t){for(var e=this._queue.length,s=e;s--;){var i=this._priorities[s];this._sorting==="desc"?t>i&&(e=s):t<i&&(e=s)}this._insertAt(r,t,e)},h.prototype.remove=function(r){for(var t=this._queue.length;t--;){var e=this._queue[t];if(r===e){this._queue.splice(t,1),this._priorities.splice(t,1);break}}},h.prototype.forEach=function(r){this._queue.forEach(r)},h.prototype.getElements=function(){return this._queue},h.prototype.getElementPriority=function(r){return this._priorities[r]},h.prototype.getPriorities=function(){return this._priorities},h.prototype.getElementsWithPriorities=function(){for(var r=[],t=0,e=this._queue.length;t<e;t++)r.push([this._queue[t],this._priorities[t]]);return r},h.prototype._init=function(r,t,e){if(r&&t){if(this._queue=[],this._priorities=[],r.length!==t.length)throw new Error("Arrays must have the same length");for(var s=0;s<r.length;s++)this.insert(r[s],t[s])}e&&(this._sorting=e)},h.prototype._insertAt=function(r,t,e){this._queue.length===e?(this._queue.push(r),this._priorities.push(t)):(this._queue.splice(e,0,r),this._priorities.splice(e,0,t))},u.exports&&(u.exports=h)}(g)),g.exports}var m;function M(){return m||(m=1,function(u){if(u.exports)var h=A();function r(t,e,s,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,s,i)}r.prototype.run=function(t,e,s,i){this._init(t,e,s,i);for(var n=0,a=this.dataset.length;n<a;n++)if(this._processed[n]!==1){this._processed[n]=1,this.clusters.push([n]);var o=this.clusters.length-1;this._orderedList.push(n);var f=new h(null,null,"asc"),c=this._regionQuery(n);this._distanceToCore(n)!==void 0&&(this._updateQueue(n,c,f),this._expandCluster(o,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,s=this._orderedList.length;e<s;e++){var i=this._orderedList[e],n=this._reachability[i];t.push([i,n])}return t},r.prototype._init=function(t,e,s,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),s&&(this.minPts=s),i&&(this.distance=i)},r.prototype._updateQueue=function(t,e,s){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(n){if(i._processed[n]===void 0){var a=i.distance(i.dataset[t],i.dataset[n]),o=Math.max(i._coreDistance,a);i._reachability[n]===void 0?(i._reachability[n]=o,s.insert(n,o)):o<i._reachability[n]&&(i._reachability[n]=o,s.remove(n),s.insert(n,o))}})},r.prototype._expandCluster=function(t,e){for(var s=e.getElements(),i=0,n=s.length;i<n;i++){var a=s[i];if(this._processed[a]===void 0){var o=this._regionQuery(a);this._processed[a]=1,this.clusters[t].push(a),this._orderedList.push(a),this._distanceToCore(a)!==void 0&&(this._updateQueue(a,o,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,s=0;s<e;s++){var i=this._regionQuery(t,s);if(i.length>=this.minPts)return s}},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var s=[],i=0,n=this.dataset.length;i<n;i++)this.distance(this.dataset[t],this.dataset[i])<e&&s.push(i);return s},r.prototype._euclideanDistance=function(t,e){for(var s=0,i=Math.min(t.length,e.length);i--;)s+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(s)},u.exports&&(u.exports=r)}(p)),p.exports}(function(u){u.exports&&(u.exports={DBSCAN:P(),KMEANS:q(),OPTICS:M(),PriorityQueue:A()})})(C);var S=C.exports;const Q=E(S);export{Q as c};
