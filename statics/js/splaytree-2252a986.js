/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function w(o,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},e,i,n,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(c){return a([f,c])}}function a(f){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,i&&(n=f[0]&2?i.return:f[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,f[1])).done)return n;switch(i=0,n&&(f=[f[0]&2,n.value]),f[0]){case 0:case 1:n=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!n||f[1]>n[0]&&f[1]<n[3])){r.label=f[1];break}if(f[0]===6&&r.label<n[1]){r.label=n[1],n=f;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(f);break}n[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(o,r)}catch(c){f=[6,c],i=0}finally{e=n=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var s=function(){function o(t,r){this.next=null,this.key=t,this.data=r,this.left=null,this.right=null}return o}();function d(o,t){return o>t?1:o<t?-1:0}function h(o,t,r){for(var e=new s(null,null),i=e,n=e;;){var l=r(o,t.key);if(l<0){if(t.left===null)break;if(r(o,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,t.left===null)break}n.left=t,n=t,t=t.left}else if(l>0){if(t.right===null)break;if(r(o,t.right.key)>0){var u=t.right;if(t.right=u.left,u.left=t,t=u,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,n.left=t.right,t.left=e.right,t.right=e.left,t}function p(o,t,r,e){var i=new s(o,t);if(r===null)return i.left=i.right=null,i;r=h(o,r,e);var n=e(o,r.key);return n<0?(i.left=r.left,i.right=r,r.left=null):n>=0&&(i.right=r.right,i.left=r,r.right=null),i}function b(o,t,r){var e=null,i=null;if(t){t=h(o,t,r);var n=r(t.key,o);n===0?(e=t.left,i=t.right):n<0?(i=t.right,t.right=null,e=t):(e=t.left,t.left=null,i=t)}return{left:e,right:i}}function k(o,t,r){return t===null?o:(o===null||(t=h(o.key,t,r),t.left=o),t)}function v(o,t,r,e,i){if(o){e(""+t+(r?"└── ":"├── ")+i(o)+`
`);var n=t+(r?"    ":"│   ");o.left&&v(o.left,n,!1,e,i),o.right&&v(o.right,n,!0,e,i)}}var E=function(){function o(t){t===void 0&&(t=d),this._root=null,this._size=0,this._comparator=t}return o.prototype.insert=function(t,r){return this._size++,this._root=p(t,r,this._root,this._comparator)},o.prototype.add=function(t,r){var e=new s(t,r);this._root===null&&(e.left=e.right=null,this._size++,this._root=e);var i=this._comparator,n=h(t,this._root,i),l=i(t,n.key);return l===0?this._root=n:(l<0?(e.left=n.left,e.right=n,n.left=null):l>0&&(e.right=n.right,e.left=n,n.right=null),this._size++,this._root=e),this._root},o.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},o.prototype._remove=function(t,r,e){var i;if(r===null)return null;r=h(t,r,e);var n=e(t,r.key);return n===0?(r.left===null?i=r.right:(i=h(t,r.left,e),i.right=r.right),this._size--,i):r},o.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=h(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},o.prototype.findStatic=function(t){for(var r=this._root,e=this._comparator;r;){var i=e(t,r.key);if(i===0)return r;i<0?r=r.left:r=r.right}return null},o.prototype.find=function(t){return this._root&&(this._root=h(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},o.prototype.contains=function(t){for(var r=this._root,e=this._comparator;r;){var i=e(t,r.key);if(i===0)return!0;i<0?r=r.left:r=r.right}return!1},o.prototype.forEach=function(t,r){for(var e=this._root,i=[],n=!1;!n;)e!==null?(i.push(e),e=e.left):i.length!==0?(e=i.pop(),t.call(r,e),e=e.right):n=!0;return this},o.prototype.range=function(t,r,e,i){for(var n=[],l=this._comparator,u=this._root,a;n.length!==0||u;)if(u)n.push(u),u=u.left;else{if(u=n.pop(),a=l(u.key,r),a>0)break;if(l(u.key,t)>=0&&e.call(i,u))return this;u=u.right}return this},o.prototype.keys=function(){var t=[];return this.forEach(function(r){var e=r.key;return t.push(e)}),t},o.prototype.values=function(){var t=[];return this.forEach(function(r){var e=r.data;return t.push(e)}),t},o.prototype.min=function(){return this._root?this.minNode(this._root).key:null},o.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},o.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},o.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},o.prototype.at=function(t){for(var r=this._root,e=!1,i=0,n=[];!e;)if(r)n.push(r),r=r.left;else if(n.length>0){if(r=n.pop(),i===t)return r;i++,r=r.right}else e=!0;return null},o.prototype.next=function(t){var r=this._root,e=null;if(t.right){for(e=t.right;e.left;)e=e.left;return e}for(var i=this._comparator;r;){var n=i(t.key,r.key);if(n===0)break;n<0?(e=r,r=r.left):r=r.right}return e},o.prototype.prev=function(t){var r=this._root,e=null;if(t.left!==null){for(e=t.left;e.right;)e=e.right;return e}for(var i=this._comparator;r;){var n=i(t.key,r.key);if(n===0)break;n<0?r=r.left:(e=r,r=r.right)}return e},o.prototype.clear=function(){return this._root=null,this._size=0,this},o.prototype.toList=function(){return m(this._root)},o.prototype.load=function(t,r,e){r===void 0&&(r=[]),e===void 0&&(e=!1);var i=t.length,n=this._comparator;if(e&&y(t,r,0,i-1,n),this._root===null)this._root=_(t,r,0,i),this._size=i;else{var l=z(this.toList(),x(t,r),n);i=this._size+i,this._root=g({head:l},0,i)}return this},o.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(o.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),o.prototype.toString=function(t){t===void 0&&(t=function(e){return String(e.key)});var r=[];return v(this._root,"",!0,function(e){return r.push(e)},t),r.join("")},o.prototype.update=function(t,r,e){var i=this._comparator,n=b(t,this._root,i),l=n.left,u=n.right;i(t,r)<0?u=p(r,e,u,i):l=p(r,e,l,i),this._root=k(l,u,i)},o.prototype.split=function(t){return b(t,this._root,this._comparator)},o.prototype[Symbol.iterator]=function(){var t,r,e;return w(this,function(i){switch(i.label){case 0:t=this._root,r=[],e=!1,i.label=1;case 1:return e?[3,6]:t===null?[3,2]:(r.push(t),t=t.left,[3,5]);case 2:return r.length===0?[3,4]:(t=r.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:e=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},o}();function _(o,t,r,e){var i=e-r;if(i>0){var n=r+Math.floor(i/2),l=o[n],u=t[n],a=new s(l,u);return a.left=_(o,t,r,n),a.right=_(o,t,n+1,e),a}return null}function x(o,t){for(var r=new s(null,null),e=r,i=0;i<o.length;i++)e=e.next=new s(o[i],t[i]);return e.next=null,r.next}function m(o){for(var t=o,r=[],e=!1,i=new s(null,null),n=i;!e;)t?(r.push(t),t=t.left):r.length>0?(t=n=n.next=r.pop(),t=t.right):e=!0;return n.next=null,i.next}function g(o,t,r){var e=r-t;if(e>0){var i=t+Math.floor(e/2),n=g(o,t,i),l=o.head;return l.left=n,o.head=o.head.next,l.right=g(o,i+1,r),l}return null}function z(o,t,r){for(var e=new s(null,null),i=e,n=o,l=t;n!==null&&l!==null;)r(n.key,l.key)<0?(i.next=n,n=n.next):(i.next=l,l=l.next),i=i.next;return n!==null?i.next=n:l!==null&&(i.next=l),e.next}function y(o,t,r,e,i){if(!(r>=e)){for(var n=o[r+e>>1],l=r-1,u=e+1;;){do l++;while(i(o[l],n)<0);do u--;while(i(o[u],n)>0);if(l>=u)break;var a=o[l];o[l]=o[u],o[u]=a,a=t[l],t[l]=t[u],t[u]=a}y(o,t,r,u,i),y(o,t,u+1,e,i)}}export{E as T};
