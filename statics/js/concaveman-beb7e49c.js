import{c as T,g as b}from"./@turf-67881268.js";import{r as rr}from"./tinyqueue-63bbd1a4.js";import{p as tr}from"./point-in-polygon-dd230ff3.js";import{o as nr}from"./robust-predicates-6da5d2ef.js";var Q={exports:{}},W={exports:{}};(function(e,i){(function(a,f){e.exports=f()})(T,function(){function a(r,t,n,o,u){(function h(m,l,d,g,M){for(;g>d;){if(g-d>600){var X=g-d+1,B=l-d+1,C=Math.log(X),O=.5*Math.exp(2*C/3),P=.5*Math.sqrt(C*O*(X-O)/X)*(B-X/2<0?-1:1),R=Math.max(d,Math.floor(l-B*O/X+P)),L=Math.min(g,Math.floor(l+(X-B)*O/X+P));h(m,l,R,L,M)}var A=m[l],q=d,j=g;for(f(m,d,l),M(m[g],A)>0&&f(m,d,g);q<j;){for(f(m,q,j),q++,j--;M(m[q],A)<0;)q++;for(;M(m[j],A)>0;)j--}M(m[d],A)===0?f(m,d,j):f(m,++j,g),j<=l&&(d=j+1),l<=j&&(g=j-1)}})(r,t,n||0,o||r.length-1,u||p)}function f(r,t,n){var o=r[t];r[t]=r[n],r[n]=o}function p(r,t){return r<t?-1:r>t?1:0}var s=function(r){r===void 0&&(r=9),this._maxEntries=Math.max(4,r),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function c(r,t,n){if(!n)return t.indexOf(r);for(var o=0;o<t.length;o++)if(n(r,t[o]))return o;return-1}function x(r,t){v(r,0,r.children.length,t,r)}function v(r,t,n,o,u){u||(u=E(null)),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0;for(var h=t;h<n;h++){var m=r.children[h];_(u,r.leaf?o(m):m)}return u}function _(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function I(r,t){return r.minX-t.minX}function N(r,t){return r.minY-t.minY}function Y(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function w(r){return r.maxX-r.minX+(r.maxY-r.minY)}function D(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function y(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function E(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(r,t,n,o,u){for(var h=[t,n];h.length;)if(!((n=h.pop())-(t=h.pop())<=o)){var m=t+Math.ceil((n-t)/o/2)*o;a(r,m,t,n,u),h.push(t,m,m,n)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(r){var t=this.data,n=[];if(!y(r,t))return n;for(var o=this.toBBox,u=[];t;){for(var h=0;h<t.children.length;h++){var m=t.children[h],l=t.leaf?o(m):m;y(r,l)&&(t.leaf?n.push(m):D(r,l)?this._all(m,n):u.push(m))}t=u.pop()}return n},s.prototype.collides=function(r){var t=this.data;if(!y(r,t))return!1;for(var n=[];t;){for(var o=0;o<t.children.length;o++){var u=t.children[o],h=t.leaf?this.toBBox(u):u;if(y(r,h)){if(t.leaf||D(r,h))return!0;n.push(u)}}t=n.pop()}return!1},s.prototype.load=function(r){if(!r||!r.length)return this;if(r.length<this._minEntries){for(var t=0;t<r.length;t++)this.insert(r[t]);return this}var n=this._build(r.slice(),0,r.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},s.prototype.insert=function(r){return r&&this._insert(r,this.data.height-1),this},s.prototype.clear=function(){return this.data=E([]),this},s.prototype.remove=function(r,t){if(!r)return this;for(var n,o,u,h=this.data,m=this.toBBox(r),l=[],d=[];h||l.length;){if(h||(h=l.pop(),o=l[l.length-1],n=d.pop(),u=!0),h.leaf){var g=c(r,h.children,t);if(g!==-1)return h.children.splice(g,1),l.push(h),this._condense(l),this}u||h.leaf||!D(h,m)?o?(n++,h=o.children[n],u=!1):h=null:(l.push(h),d.push(n),n=0,o=h,h=h.children[0])}return this},s.prototype.toBBox=function(r){return r},s.prototype.compareMinX=function(r,t){return r.minX-t.minX},s.prototype.compareMinY=function(r,t){return r.minY-t.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(r){return this.data=r,this},s.prototype._all=function(r,t){for(var n=[];r;)r.leaf?t.push.apply(t,r.children):n.push.apply(n,r.children),r=n.pop();return t},s.prototype._build=function(r,t,n,o){var u,h=n-t+1,m=this._maxEntries;if(h<=m)return x(u=E(r.slice(t,n+1)),this.toBBox),u;o||(o=Math.ceil(Math.log(h)/Math.log(m)),m=Math.ceil(h/Math.pow(m,o-1))),(u=E([])).leaf=!1,u.height=o;var l=Math.ceil(h/m),d=l*Math.ceil(Math.sqrt(m));S(r,t,n,d,this.compareMinX);for(var g=t;g<=n;g+=d){var M=Math.min(g+d-1,n);S(r,g,M,l,this.compareMinY);for(var X=g;X<=M;X+=l){var B=Math.min(X+l-1,M);u.children.push(this._build(r,X,B,o-1))}}return x(u,this.toBBox),u},s.prototype._chooseSubtree=function(r,t,n,o){for(;o.push(t),!t.leaf&&o.length-1!==n;){for(var u=1/0,h=1/0,m=void 0,l=0;l<t.children.length;l++){var d=t.children[l],g=Y(d),M=(X=r,B=d,(Math.max(B.maxX,X.maxX)-Math.min(B.minX,X.minX))*(Math.max(B.maxY,X.maxY)-Math.min(B.minY,X.minY))-g);M<h?(h=M,u=g<u?g:u,m=d):M===h&&g<u&&(u=g,m=d)}t=m||t.children[0]}var X,B;return t},s.prototype._insert=function(r,t,n){var o=n?r:this.toBBox(r),u=[],h=this._chooseSubtree(o,this.data,t,u);for(h.children.push(r),_(h,o);t>=0&&u[t].children.length>this._maxEntries;)this._split(u,t),t--;this._adjustParentBBoxes(o,u,t)},s.prototype._split=function(r,t){var n=r[t],o=n.children.length,u=this._minEntries;this._chooseSplitAxis(n,u,o);var h=this._chooseSplitIndex(n,u,o),m=E(n.children.splice(h,n.children.length-h));m.height=n.height,m.leaf=n.leaf,x(n,this.toBBox),x(m,this.toBBox),t?r[t-1].children.push(m):this._splitRoot(n,m)},s.prototype._splitRoot=function(r,t){this.data=E([r,t]),this.data.height=r.height+1,this.data.leaf=!1,x(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(r,t,n){for(var o,u,h,m,l,d,g,M=1/0,X=1/0,B=t;B<=n-t;B++){var C=v(r,0,B,this.toBBox),O=v(r,B,n,this.toBBox),P=(u=C,h=O,m=void 0,l=void 0,d=void 0,g=void 0,m=Math.max(u.minX,h.minX),l=Math.max(u.minY,h.minY),d=Math.min(u.maxX,h.maxX),g=Math.min(u.maxY,h.maxY),Math.max(0,d-m)*Math.max(0,g-l)),R=Y(C)+Y(O);P<M?(M=P,o=B,X=R<X?R:X):P===M&&R<X&&(X=R,o=B)}return o||n-t},s.prototype._chooseSplitAxis=function(r,t,n){var o=r.leaf?this.compareMinX:I,u=r.leaf?this.compareMinY:N;this._allDistMargin(r,t,n,o)<this._allDistMargin(r,t,n,u)&&r.children.sort(o)},s.prototype._allDistMargin=function(r,t,n,o){r.children.sort(o);for(var u=this.toBBox,h=v(r,0,t,u),m=v(r,n-t,n,u),l=w(h)+w(m),d=t;d<n-t;d++){var g=r.children[d];_(h,r.leaf?u(g):g),l+=w(h)}for(var M=n-t-1;M>=t;M--){var X=r.children[M];_(m,r.leaf?u(X):X),l+=w(m)}return l},s.prototype._adjustParentBBoxes=function(r,t,n){for(var o=n;o>=0;o--)_(t[o],r)},s.prototype._condense=function(r){for(var t=r.length-1,n=void 0;t>=0;t--)r[t].children.length===0?t>0?(n=r[t-1].children).splice(n.indexOf(r[t]),1):this.clear():x(r[t],this.toBBox)},s})})(W);var er=W.exports,z=er,J=rr,ir=tr,ar=nr.orient2d;J.default&&(J=J.default);Q.exports=Z;Q.exports.default=Z;function Z(e,i,a){i=Math.max(0,i===void 0?2:i),a=a||0;var f=mr(e),p=new z(16);p.toBBox=function(r){return{minX:r[0],minY:r[1],maxX:r[0],maxY:r[1]}},p.compareMinX=function(r,t){return r[0]-t[0]},p.compareMinY=function(r,t){return r[1]-t[1]},p.load(e);for(var s=[],c=0,x;c<f.length;c++){var v=f[c];p.remove(v),x=V(v,x),s.push(x)}var _=new z(16);for(c=0;c<s.length;c++)_.insert(k(s[c]));for(var I=i*i,N=a*a;s.length;){var Y=s.shift(),w=Y.p,D=Y.next.p,y=F(w,D);if(!(y<N)){var E=y/I;v=or(p,Y.prev.p,w,D,Y.next.next.p,E,_),v&&Math.min(F(v,w),F(v,D))<=E&&(s.push(Y),s.push(V(v,Y)),p.remove(v),_.remove(Y),_.insert(k(Y)),_.insert(k(Y.next)))}}Y=x;var S=[];do S.push(Y.p),Y=Y.next;while(Y!==x);return S.push(Y.p),S}function or(e,i,a,f,p,s,c){for(var x=new J([],hr),v=e.data;v;){for(var _=0;_<v.children.length;_++){var I=v.children[_],N=v.leaf?G(I,a,f):ur(a,f,I);N>s||x.push({node:I,dist:N})}for(;x.length&&!x.peek().node.children;){var Y=x.pop(),w=Y.node,D=G(w,i,a),y=G(w,f,p);if(Y.dist<D&&Y.dist<y&&U(a,w,c)&&U(f,w,c))return w}v=x.pop(),v&&(v=v.node)}return null}function hr(e,i){return e.dist-i.dist}function ur(e,i,a){if(K(e,a)||K(i,a))return 0;var f=H(e[0],e[1],i[0],i[1],a.minX,a.minY,a.maxX,a.minY);if(f===0)return 0;var p=H(e[0],e[1],i[0],i[1],a.minX,a.minY,a.minX,a.maxY);if(p===0)return 0;var s=H(e[0],e[1],i[0],i[1],a.maxX,a.minY,a.maxX,a.maxY);if(s===0)return 0;var c=H(e[0],e[1],i[0],i[1],a.minX,a.maxY,a.maxX,a.maxY);return c===0?0:Math.min(f,p,s,c)}function K(e,i){return e[0]>=i.minX&&e[0]<=i.maxX&&e[1]>=i.minY&&e[1]<=i.maxY}function U(e,i,a){for(var f=Math.min(e[0],i[0]),p=Math.min(e[1],i[1]),s=Math.max(e[0],i[0]),c=Math.max(e[1],i[1]),x=a.search({minX:f,minY:p,maxX:s,maxY:c}),v=0;v<x.length;v++)if(sr(x[v].p,x[v].next.p,e,i))return!1;return!0}function $(e,i,a){return ar(e[0],e[1],i[0],i[1],a[0],a[1])}function sr(e,i,a,f){return e!==f&&i!==a&&$(e,i,a)>0!=$(e,i,f)>0&&$(a,f,e)>0!=$(a,f,i)>0}function k(e){var i=e.p,a=e.next.p;return e.minX=Math.min(i[0],a[0]),e.minY=Math.min(i[1],a[1]),e.maxX=Math.max(i[0],a[0]),e.maxY=Math.max(i[1],a[1]),e}function mr(e){for(var i=e[0],a=e[0],f=e[0],p=e[0],s=0;s<e.length;s++){var c=e[s];c[0]<i[0]&&(i=c),c[0]>f[0]&&(f=c),c[1]<a[1]&&(a=c),c[1]>p[1]&&(p=c)}var x=[i,a,f,p],v=x.slice();for(s=0;s<e.length;s++)ir(e[s],x)||v.push(e[s]);return lr(v)}function V(e,i){var a={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function F(e,i){var a=e[0]-i[0],f=e[1]-i[1];return a*a+f*f}function G(e,i,a){var f=i[0],p=i[1],s=a[0]-f,c=a[1]-p;if(s!==0||c!==0){var x=((e[0]-f)*s+(e[1]-p)*c)/(s*s+c*c);x>1?(f=a[0],p=a[1]):x>0&&(f+=s*x,p+=c*x)}return s=e[0]-f,c=e[1]-p,s*s+c*c}function H(e,i,a,f,p,s,c,x){var v=a-e,_=f-i,I=c-p,N=x-s,Y=e-p,w=i-s,D=v*v+_*_,y=v*I+_*N,E=I*I+N*N,S=v*Y+_*w,r=I*Y+N*w,t=D*E-y*y,n,o,u,h,m=t,l=t;t===0?(o=0,m=1,h=r,l=E):(o=y*r-E*S,h=D*r-y*S,o<0?(o=0,h=r,l=E):o>m&&(o=m,h=r+y,l=E)),h<0?(h=0,-S<0?o=0:-S>D?o=m:(o=-S,m=D)):h>l&&(h=l,-S+y<0?o=0:-S+y>D?o=m:(o=-S+y,m=D)),n=o===0?0:o/m,u=h===0?0:h/l;var d=(1-n)*e+n*a,g=(1-n)*i+n*f,M=(1-u)*p+u*c,X=(1-u)*s+u*x,B=M-d,C=X-g;return B*B+C*C}function fr(e,i){return e[0]===i[0]?e[1]-i[1]:e[0]-i[0]}function lr(e){e.sort(fr);for(var i=[],a=0;a<e.length;a++){for(;i.length>=2&&$(i[i.length-2],i[i.length-1],e[a])<=0;)i.pop();i.push(e[a])}for(var f=[],p=e.length-1;p>=0;p--){for(;f.length>=2&&$(f[f.length-2],f[f.length-1],e[p])<=0;)f.pop();f.push(e[p])}return f.pop(),i.pop(),i.concat(f)}var cr=Q.exports;const gr=b(cr);export{gr as c};
